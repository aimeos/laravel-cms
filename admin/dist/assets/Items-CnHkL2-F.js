import{l as F}from"./vue-draggable-plus-BDMZhDjn.js";import{_ as j,c as n,a as u,d as V,f as h,w as r,a2 as B,F as f,a1 as v,b as p,a3 as k,r as w,o as t,a4 as D,a5 as E,t as y,a6 as U,a7 as N,j as P,a8 as A}from"../index.js";const O={components:{VueDraggable:F},props:{modelValue:{type:Array,default:()=>[]},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","error","addFile","removeFile"],data(){return{errors:[],items:[],panel:[]}},methods:{add(){this.items.push({}),this.panel.push(this.items.length-1),this.$emit("update:modelValue",this.items),this.validate()},change(){this.$emit("update:modelValue",this.items)},remove(s){this.items.splice(s,1),this.$emit("update:modelValue",this.items),this.validate()},title(s){return Object.values(s||{}).map(e=>e&&typeof e!="object"&&typeof e!="boolean"?e:null).filter(e=>!!e).join(" - ").substring(0,50)||""},async validate(){const s=[e=>!this.config.max||this.config.max&&e.length<=this.config.max||`Maximum is ${this.config.max} items`,e=>(this.config.min??1)&&e.length>=(this.config.min??1)||`Minimum is ${this.config.min??1} items`];return this.errors=s.map(e=>e(this.items)).filter(e=>e!==!0),this.$emit("error",this.errors.length>0),await!this.errors.length}},watch:{modelValue:{immediate:!0,handler(s){this.items=s,this.validate()}}}},T={class:"element-title"},I={key:0,class:"v-input--error"},L={class:"v-input__details",role:"alert","aria-live":"polite"},M={class:"v-messages"},R={class:"btn-group"};function S(s,e,l,q,a,c){const C=w("VueDraggable");return t(),n(f,null,[u(B,{class:"items",modelValue:a.panel,"onUpdate:modelValue":e[4]||(e[4]=i=>a.panel=i),elevation:"0",multiple:""},{default:r(()=>[u(C,{modelValue:a.items,"onUpdate:modelValue":e[2]||(e[2]=i=>a.items=i),disabled:l.readonly,onChange:e[3]||(e[3]=i=>c.change()),draggable:".item",group:"items",animation:"500"},{default:r(()=>[(t(!0),n(f,null,v(a.items,(i,o)=>(t(),p(D,{key:o,class:"item"},{default:r(()=>[u(E,null,{default:r(()=>[l.readonly?V("",!0):(t(),p(k,{key:0,icon:"mdi-trash-can",variant:"plain",onClick:m=>c.remove(o)},null,8,["onClick"])),h("div",T,y(c.title(i)),1)]),_:2},1024),u(U,null,{default:r(()=>[(t(!0),n(f,null,v(l.config.item||{},(m,g)=>{var _,b,x;return t(),n("div",{key:g,class:"field"},[u(N,null,{default:r(()=>[P(y(m.label||g),1)]),_:2},1024),(t(),p(A(((b=(_=m.type)==null?void 0:_.charAt(0))==null?void 0:b.toUpperCase())+((x=m.type)==null?void 0:x.slice(1))),{modelValue:a.items[o][g],"onUpdate:modelValue":d=>a.items[o][g]=d,assets:l.assets,config:m,readonly:l.readonly,onAddFile:e[0]||(e[0]=d=>s.$emit("addFile",d)),onRemoveFile:e[1]||(e[1]=d=>s.$emit("removeFile",d))},null,40,["modelValue","onUpdate:modelValue","assets","config","readonly"]))])}),128))]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["modelValue"]),a.errors.length?(t(),n("div",I,[h("div",L,[h("div",M,[(t(!0),n(f,null,v(a.errors,(i,o)=>(t(),n("div",{key:o,class:"v-messages__message"},y(i),1))),128))])])])):V("",!0),h("div",R,[!l.readonly&&(!l.config.max||l.config.max&&+a.items.length<+l.config.max)?(t(),p(k,{key:0,icon:"mdi-view-grid-plus",onClick:e[5]||(e[5]=i=>c.add())})):V("",!0)])],64)}const H=j(O,[["render",S],["__scopeId","data-v-d0d6e230"]]);export{H as default};
