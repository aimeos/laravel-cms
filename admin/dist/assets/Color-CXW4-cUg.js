import{n as O,p as S,u as $,s as C,q as P,v as q,x as V,y as A,z as D,A as j,B as K,C as k,D as I,E as g,a as c,f as x,i as N,F as b,G as v,H as R,_ as T,b as z,r as G,o as H}from"../index.js";const J=S({pip:Boolean,pipIcon:{type:String,default:"$color"},...j(),...D(),...A(),...V(K(),["width"])},"VColorInput"),L=O()({name:"VColorInput",props:J(),emits:{"update:modelValue":e=>!0},setup(e,p){let{slots:a}=p;const o=$(e,"modelValue"),l=C(!1),i=C(e.focused),s=P(()=>!e.disabled&&!e.readonly),n=P(()=>o.value||null);function F(d){if(d.key!=="Enter")return;if(!l.value||!i.value){l.value=!0;return}const m=d.target;o.value=m.value}function f(d){d.preventDefault(),d.stopPropagation(),l.value=!0}function _(){l.value=!1}q(()=>{const d=k.filterProps(e),m=I.filterProps(V(e,["active","color"])),h=g.filterProps(V(e,["prependInnerIcon"])),w=!!(a.prepend||e.pipIcon);return c(g,v(h,{class:["v-color-input",e.class],style:e.style,modelValue:n.value,onKeydown:s.value?F:void 0,focused:l.value||i.value,"onClick:control":s.value?f:void 0,"onClick:prependInner":s.value?f:void 0,"onUpdate:focused":t=>i.value=t,"onClick:appendInner":s.value?f:void 0,"onUpdate:modelValue":t=>{o.value=t}}),{...a,prepend:e.pipIcon?t=>{var u;return x(b,null,[w&&c(N,{color:e.pip?o.value:void 0,icon:e.pipIcon},null),(u=a.prepend)==null?void 0:u.call(a,t)])}:void 0,default:()=>{var t;return x(b,null,[c(R,{modelValue:l.value,"onUpdate:modelValue":u=>l.value=u,activator:"parent","min-width":"0",closeOnContentClick:!1,openOnClick:!1},{default:()=>[c(k,v(d,{modelValue:o.value,"onUpdate:modelValue":u=>o.value=u,onSave:_}),{default:u=>{let{actions:B,model:y,save:U,cancel:E,isPristine:M}=u;return c(I,v(m,{modelValue:y.value,"onUpdate:modelValue":r=>{y.value=r,o.value=r},onMousedown:r=>r.preventDefault()}),{actions:e.hideActions?void 0:()=>{var r;return((r=a.actions)==null?void 0:r.call(a,{save:U,cancel:E,isPristine:M}))??B()}})}})]}),(t=a.default)==null?void 0:t.call(a)])}})})}}),Q={components:{VColorInput:L},props:{modelValue:{type:String,default:""},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","error"],methods:{update(e){this.$emit("update:modelValue",e)},async validate(){return await!0}}};function W(e,p,a,o,l,i){const s=G("v-color-input");return H(),z(s,{rules:[n=>!a.config.required||!!n||e.$gettext("Value is required"),n=>!n||/^#[0-9A-F]{6,8}$/i.test(n)||e.$gettext("Value must be a hex color code")],clearable:!a.readonly,disabled:a.readonly,modelValue:a.modelValue,"onUpdate:modelValue":p[0]||(p[0]=n=>i.update(n))},null,8,["rules","clearable","disabled","modelValue"])}const Y=T(Q,[["render",W]]);export{Y as default};
