import g from"./File-Dor4fCve.js";import{F as D}from"./FileAiDialog-BDdyU3LJ.js";import{_ as U,c as u,a as t,b as a,w as m,V as A,r as V,T as k,F as I,o as i,d,e as F,f as p,g as B,$ as N,h as j,i as T,j as f,k as E,l as v,t as n}from"../index.js";import"./FileListItems-CRPdcvPl.js";import"./HistoryDialog-BhGSg-LU.js";import"./FileDialog-DvFXKIj_.js";const L={extends:g,components:{FileAiDialog:D},setup(){return{...g.setup()}},data(){return{vcreate:!1}},methods:{handle(e,l){return new Promise((s,y)=>{const r=new Image;r.onload=s,r.onerror=y,r.src=this.url(Object.values(e.previews).shift()||e.path)}).then(()=>g.methods.handle.call(this,e,l)).catch(s=>(console.error(s),!1))},srcset(e){let l=[];for(const s in e)l.push(`${this.url(e[s])} ${s}w`);return l.join(", ")}}},M={class:"files"},P={key:1,class:"file"};function R(e,l,s,y,r,b){const w=V("FileDialog"),$=V("FileAiDialog"),C=V("FileUrlDialog");return i(),u(I,null,[t(A,null,{default:m(()=>[t(F,{cols:"12",md:"6"},{default:m(()=>[p("div",M,[e.file.path?(i(),u("div",{key:0,class:"file",onClick:l[1]||(l[1]=o=>e.open(e.file))},[e.file.uploading?(i(),a(B,{key:0,color:"primary",height:"5",indeterminate:"",rounded:""})):d("",!0),t(N,{draggable:!1,src:e.url(e.file.path),srcset:b.srcset(e.file.previews)},null,8,["src","srcset"]),!e.readonly&&e.file.path?(i(),u("button",{key:1,onClick:l[0]||(l[0]=j(o=>e.remove(),["stop"])),class:"btn-overlay",title:"Remove image",type:"button"},[t(T,{icon:"mdi-trash-can",role:"img"})])):d("",!0)])):e.readonly?d("",!0):(i(),u("div",P,[e.auth.can("file:view")?(i(),a(f,{key:0,icon:"mdi-button-cursor",variant:"flat",onClick:l[2]||(l[2]=o=>e.vfiles=!0)})):d("",!0),t(f,{onClick:l[3]||(l[3]=o=>e.vurls=!0),icon:"mdi-link-variant-plus",variant:"flat"}),t(f,{onClick:l[4]||(l[4]=o=>r.vcreate=!0),icon:"mdi-creation",variant:"flat"}),t(f,{icon:"mdi-upload",variant:"flat"},{default:m(()=>[t(E,{modelValue:e.selected,"onUpdate:modelValue":[l[5]||(l[5]=o=>e.selected=o),l[6]||(l[6]=o=>e.add(o))],accept:e.config.accept||"image/*","hide-input":!0,"prepend-icon":"mdi-upload"},null,8,["modelValue","accept"])]),_:1})]))])]),_:1}),e.file.path?(i(),a(F,{key:0,cols:"12",md:"6"},{default:m(()=>[v(n(e.$gettext("Name"))+": "+n(e.file.name),1),l[13]||(l[13]=p("br",null,null,-1)),v(" "+n(e.$gettext("Mime"))+": "+n(e.file.mime),1),l[14]||(l[14]=p("br",null,null,-1)),v(" "+n(e.$gettext("Editor"))+": "+n(e.file.editor),1),l[15]||(l[15]=p("br",null,null,-1)),v(" "+n(e.$gettext("Updated"))+": "+n(new Date(e.file.updated_at).toLocaleString()),1)]),_:1,__:[13,14,15]})):d("",!0)]),_:1}),(i(),a(k,{to:"body"},[t(w,{modelValue:e.vfiles,"onUpdate:modelValue":l[7]||(l[7]=o=>e.vfiles=o),onAdd:l[8]||(l[8]=o=>{b.handle(o),e.vfiles=!1}),filter:{mime:"image/"},grid:""},null,8,["modelValue"])])),(i(),a(k,{to:"body"},[t($,{modelValue:r.vcreate,"onUpdate:modelValue":l[9]||(l[9]=o=>r.vcreate=o),onAdd:l[10]||(l[10]=o=>{e.select(o),r.vcreate=!1})},null,8,["modelValue"])])),(i(),a(k,{to:"body"},[t(C,{modelValue:e.vurls,"onUpdate:modelValue":l[11]||(l[11]=o=>e.vurls=o),onAdd:l[12]||(l[12]=o=>{e.select(o),e.vurls=!1})},null,8,["modelValue"])]))],64)}const J=U(L,[["render",R],["__scopeId","data-v-77010812"]]);export{J as default};
