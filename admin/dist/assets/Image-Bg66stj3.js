import p from"./File-BvYeVW4V.js";import{_ as V,c as n,a as r,b as f,w as g,V as w,r as h,T as C,F as $,o,d,e as y,f as s,g as I,Y as F,h as N,i as B,j as u,t as m}from"../index.js";import"./FileDetail-DoAmmBBH.js";import"./HistoryDialog-DB5QzTyj.js";import"./FileDialog-BmY6pYYe.js";const D={extends:p,setup(){return{...p.setup()}},methods:{handle(e,l){return new Promise((t,v)=>{const a=new Image;a.onload=t,a.onerror=v,a.src=this.url(Object.values(e.previews)[0]||e.path)}).then(()=>p.methods.handle.call(this,e,l)).catch(t=>(console.error(t),!1))},srcset(e){let l=[];for(const t in e)l.push(`${this.url(e[t])} ${t}w`);return l.join(", ")}}},j={class:"files"},S={key:1,class:"file file-input"},T={class:"upload-file"},A=["disabled","accept","id","value"],E=["for"];function L(e,l,t,v,a,b){const k=h("FileDialog");return o(),n($,null,[r(w,null,{default:g(()=>[r(y,{cols:"12",md:"6"},{default:g(()=>[s("div",j,[e.file.path?(o(),n("div",{key:0,class:"file",onClick:l[1]||(l[1]=i=>e.open(e.file))},[e.file.uploading?(o(),f(I,{key:0,color:"primary",height:"5",indeterminate:"",rounded:""})):d("",!0),r(F,{draggable:!1,src:e.url(e.file.path),srcset:b.srcset(e.file.previews)},null,8,["src","srcset"]),!e.readonly&&e.file.path?(o(),n("button",{key:1,onClick:l[0]||(l[0]=N(i=>e.remove(),["stop"])),class:"btn-overlay",title:"Remove image",type:"button"},[r(B,{icon:"mdi-trash-can",role:"img"})])):d("",!0)])):(o(),n("div",S,[e.auth.can("file:view")?(o(),n("div",{key:0,class:"select-file",onClick:l[2]||(l[2]=i=>e.vfiles=!0)},l[6]||(l[6]=[s("label",null,[s("span",{class:"btn"},"Select image")],-1)]))):d("",!0),s("div",T,[s("input",{type:"file",onInput:l[3]||(l[3]=i=>e.add(i)),disabled:e.readonly,accept:e.config.accept||"image/*",id:"image-"+e.index,value:e.selected,hidden:""},null,40,A),s("label",{for:"image-"+e.index},l[7]||(l[7]=[s("span",{class:"btn"},"Add image",-1)]),8,E)])]))])]),_:1}),e.file.path?(o(),f(y,{key:0,cols:"12",md:"6"},{default:g(()=>[u(" Name: "+m(e.file.name),1),l[8]||(l[8]=s("br",null,null,-1)),u(" Mime: "+m(e.file.mime),1),l[9]||(l[9]=s("br",null,null,-1)),u(" Editor: "+m(e.file.editor),1),l[10]||(l[10]=s("br",null,null,-1)),u(" Updated: "+m(new Date(e.file.updated_at).toLocaleString()),1)]),_:1,__:[8,9,10]})):d("",!0)]),_:1}),(o(),f(C,{to:"body"},[r(k,{modelValue:e.vfiles,"onUpdate:modelValue":l[4]||(l[4]=i=>e.vfiles=i),onAdd:l[5]||(l[5]=i=>b.handle(i)),filter:{mime:"image/"},grid:""},null,8,["modelValue"])]))],64)}const O=V(D,[["render",L],["__scopeId","data-v-014e6066"]]);export{O as default};
