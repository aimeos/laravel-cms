import{l as O,p as S,u as q,s as C,m as P,n as A,q as V,v as D,x as j,y as K,z as N,A as k,B as I,C as _,a as c,f as g,i as R,F as x,D as v,E as T,_ as $,b as z,r as G,o as H}from"../index.js";const J=S({pip:Boolean,pipIcon:{type:String,default:"$color"},...K(),...j(),...D(),...V(N(),["width"])},"VColorInput"),L=O()({name:"VColorInput",props:J(),emits:{"update:modelValue":e=>!0},setup(e,p){let{slots:a}=p;const o=q(e,"modelValue"),l=C(!1),i=C(e.focused),s=P(()=>!e.disabled&&!e.readonly),n=P(()=>o.value||null);function b(d){if(d.key!=="Enter")return;if(!l.value||!i.value){l.value=!0;return}const m=d.target;o.value=m.value}function f(d){d.preventDefault(),d.stopPropagation(),l.value=!0}function F(){l.value=!1}A(()=>{const d=k.filterProps(e),m=I.filterProps(V(e,["active","color"])),h=_.filterProps(V(e,["prependInnerIcon"])),w=!!(a.prepend||e.pipIcon);return c(_,v(h,{class:["v-color-input",e.class],style:e.style,modelValue:n.value,onKeydown:s.value?b:void 0,focused:l.value||i.value,"onClick:control":s.value?f:void 0,"onClick:prependInner":s.value?f:void 0,"onUpdate:focused":t=>i.value=t,"onClick:appendInner":s.value?f:void 0,"onUpdate:modelValue":t=>{o.value=t}}),{...a,prepend:e.pipIcon?t=>{var u;return g(x,null,[w&&c(R,{color:e.pip?o.value:void 0,icon:e.pipIcon},null),(u=a.prepend)==null?void 0:u.call(a,t)])}:void 0,default:()=>{var t;return g(x,null,[c(T,{modelValue:l.value,"onUpdate:modelValue":u=>l.value=u,activator:"parent","min-width":"0",closeOnContentClick:!1,openOnClick:!1},{default:()=>[c(k,v(d,{modelValue:o.value,"onUpdate:modelValue":u=>o.value=u,onSave:F}),{default:u=>{let{actions:B,model:y,save:U,cancel:E,isPristine:M}=u;return c(I,v(m,{modelValue:y.value,"onUpdate:modelValue":r=>{y.value=r,o.value=r},onMousedown:r=>r.preventDefault()}),{actions:e.hideActions?void 0:()=>{var r;return((r=a.actions)==null?void 0:r.call(a,{save:U,cancel:E,isPristine:M}))??B()}})}})]}),(t=a.default)==null?void 0:t.call(a)])}})})}}),Q={components:{VColorInput:L},props:{modelValue:{type:String,default:""},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","error"],methods:{update(e){this.$emit("update:modelValue",e)},async validate(){return await!0}}};function W(e,p,a,o,l,i){const s=G("v-color-input");return H(),z(s,{rules:[n=>!a.config.required||!!n||"Value is required",n=>!n||/^#[0-9A-F]{6,8}$/i.test(n)||"Value must be a hex color code"],clearable:!a.readonly,disabled:a.readonly,modelValue:a.modelValue,"onUpdate:modelValue":p[0]||(p[0]=n=>i.update(n))},null,8,["rules","clearable","disabled","modelValue"])}const Y=$(Q,[["render",W]]);export{Y as default};
