import{l as F}from"./vue-draggable-plus-wEOAkpgF.js";import{_ as j,c as n,a as d,d as V,f as h,w as r,aa as B,F as f,a2 as v,b as p,j as k,r as w,o as t,ab as D,ac as E,t as y,ad as U,ae as N,l as P,af as A}from"../index.js";const O={components:{VueDraggable:F},props:{modelValue:{type:Array,default:()=>[]},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","error","addFile","removeFile"],data(){return{errors:[],items:[],panel:[]}},methods:{add(){this.items.push({}),this.panel.push(this.items.length-1),this.$emit("update:modelValue",this.items),this.validate()},change(){this.$emit("update:modelValue",this.items)},remove(s){this.items.splice(s,1),this.$emit("update:modelValue",this.items),this.validate()},title(s){return Object.values(s||{}).map(e=>e&&typeof e!="object"&&typeof e!="boolean"?e:null).filter(e=>!!e).join(" - ").substring(0,50)||""},async validate(){const s=[e=>!this.config.max||this.config.max&&e.length<=this.config.max||this.$gettext("Maximum is %{num} entries",{num:this.config.max}),e=>(this.config.min??1)&&e.length>=(this.config.min??1)||this.$gettext("Minimum is %{num} entries",{num:this.config.min??1})];return this.errors=s.map(e=>e(this.items)).filter(e=>e!==!0),this.$emit("error",this.errors.length>0),await!this.errors.length}},watch:{modelValue:{immediate:!0,handler(s){this.items=s,this.validate()}}}},T={class:"element-title"},I={key:0,class:"v-input--error"},L={class:"v-input__details",role:"alert","aria-live":"polite"},M={class:"v-messages"},R={class:"btn-group"};function S(s,e,l,q,a,g){const C=w("VueDraggable");return t(),n(f,null,[d(B,{class:"items",modelValue:a.panel,"onUpdate:modelValue":e[4]||(e[4]=i=>a.panel=i),elevation:"0",multiple:""},{default:r(()=>[d(C,{modelValue:a.items,"onUpdate:modelValue":e[2]||(e[2]=i=>a.items=i),disabled:l.readonly,onChange:e[3]||(e[3]=i=>g.change()),draggable:".item",group:"items",animation:"500"},{default:r(()=>[(t(!0),n(f,null,v(a.items,(i,o)=>(t(),p(D,{key:o,class:"item"},{default:r(()=>[d(E,null,{default:r(()=>[l.readonly?V("",!0):(t(),p(k,{key:0,icon:"mdi-trash-can",variant:"plain",onClick:m=>g.remove(o)},null,8,["onClick"])),h("div",T,y(g.title(i)),1)]),_:2},1024),d(U,null,{default:r(()=>[(t(!0),n(f,null,v(l.config.item||{},(m,c)=>{var _,b,x;return t(),n("div",{key:c,class:"field"},[d(N,null,{default:r(()=>[P(y(m.label||c),1)]),_:2},1024),(t(),p(A(((b=(_=m.type)==null?void 0:_.charAt(0))==null?void 0:b.toUpperCase())+((x=m.type)==null?void 0:x.slice(1))),{modelValue:a.items[o][c],"onUpdate:modelValue":u=>a.items[o][c]=u,assets:l.assets,config:m,readonly:l.readonly,onAddFile:e[0]||(e[0]=u=>s.$emit("addFile",u)),onRemoveFile:e[1]||(e[1]=u=>s.$emit("removeFile",u))},null,40,["modelValue","onUpdate:modelValue","assets","config","readonly"]))])}),128))]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["modelValue"]),a.errors.length?(t(),n("div",I,[h("div",L,[h("div",M,[(t(!0),n(f,null,v(a.errors,(i,o)=>(t(),n("div",{key:o,class:"v-messages__message"},y(i),1))),128))])])])):V("",!0),h("div",R,[!l.readonly&&(!l.config.max||l.config.max&&+a.items.length<+l.config.max)?(t(),p(k,{key:0,icon:"mdi-view-grid-plus",onClick:e[5]||(e[5]=i=>g.add())})):V("",!0)])],64)}const H=j(O,[["render",S],["__scopeId","data-v-220a9e1b"]]);export{H as default};
