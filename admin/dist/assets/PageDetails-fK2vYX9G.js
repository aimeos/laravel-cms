import{_ as B,d as v,h as i,Z as He,z as w,o as A,b as n,S as $,T as D,p,$ as me,a0 as Pe,a1 as q,c,F as b,A as E,k as te,a2 as x,a3 as j,t as U,a4 as X,v as Me,P as J,a5 as T,a6 as I,a as L,a7 as Ye,L as $e,u as ce,a8 as ee,e as Q,x as y,g as qe,w as he,a9 as xe,K as V,aa as je,ab as Xe,ac as Ge,ad as oe,ae as we,af as We,ag as Ke,ah as et,ai as tt,aj as lt,ak as at,al as nt,am as it,an as st,f as ut,ao as ot,V as dt,i as de,j as re,ap as rt,aq as Ue,ar as ke,n as le,as as mt,s as Ee,l as Ae,at as ae,au as ne,Q as Oe,av as Je,aw as _,ax as Te,ay as R,U as _e,R as Re,m as Fe,az as At,M as ft,N as vt,O as pt}from"../index.js";import{g as ze}from"./index-D44mBlCu.js";const gt={props:["state"],emits:["update:state"],data:()=>({width:window.innerWidth})};function Vt(t,e,l,d,r,s){const a=w("router-link");return A(),v(He,{width:"220",modelValue:l.state,"onUpdate:modelValue":e[0]||(e[0]=o=>t.$emit("update:state",o)),rail:!(t.width>1200),"expand-on-hover":""},{default:i(()=>[n($,null,{default:i(()=>[n(D,{"prepend-icon":"mdi-file-tree",value:"pages"},{default:i(()=>[n(a,{to:"/pages"},{default:i(()=>e[1]||(e[1]=[p("Pages")])),_:1})]),_:1})]),_:1}),n(me),n($,null,{default:i(()=>[n(D,{"prepend-icon":"mdi-folder-multiple-image",value:"files"},{default:i(()=>[n(a,{to:"/files"},{default:i(()=>e[2]||(e[2]=[p("Files")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","rail"])}const hl=B(gt,[["render",Vt],["__scopeId","data-v-ab757f2b"]]),ct="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAwBAADAREAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQIE/9oADAMBAAIQAxAAAAHwevjAAAJbCgCSpSFIWgBC0ApbOYskAACFIAAAtKlqoAXeaUAlBABQA53MBQoAAQBhYUAACFIUgbOi1ICVzubNJQAAIEACoIUABpLVABiUAUhQksKShZKABZSFAoBTVlTmZqAQAABAClLZQAADc1ZYVAUkKKgBlMagQKFACABkytAAAABY6mgKgIc9ZAuamgBAgAChAAAaTVAAZzQoAASwAhUoAFgoBKCm7FIzXOFQCAAIUtUoCAAADU1qAUgAUIAYucgFWFAEAAQwtAAAAOhuKAKgInPWQAVm2aAgQACUAABuygAGZQAAASUAEoCFWAUVBa2ikBXEEEAClqgAIAAAANS6lUgpFIUIAnPUgikWgQAAUDAAAAKdTQgBQgInPUIAAVm2agQKAEAABuygFBiUAAACXJQEoAFgAtS10QASkYrBClBQAEKQAAAUgKbzpQQFACBM1ixABRRABQAMkAAB0OghQAgAM2YuQAAAVmpQoIVAAAdLBQAZlAAQoDNgIE0AEWkBWzaAKAGTkaAACFAIUgAFAABuaCFACABMWSoIKAEUAKABgAGjqUAAhSIAM2YsAAAACVNAIVAAAdLmqAKf/8QAHRAAAQQDAQEAAAAAAAAAAAAAAREwQFAAIDECYP/aAAgBAQABBQKYkNK8DU8jCjL6Ri8XEwDY8jCjLiOB0yR5YPPgUxLMBcARk2gG/rRJ5gHceWzZgMHluAuIjhm//8QAGxEAAgIDAQAAAAAAAAAAAAAAAREwYCBAUHD/2gAIAQMBAT8Bsr8CdOEp4JydMHOMDvBid2Mb0v/EABYRAQEBAAAAAAAAAAAAAAAAABFwYP/aAAgBAgEBPwHSkCIEQIgRE//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEABj8CQD//xAAfEAABBAIDAQEAAAAAAAAAAAABETAxQAAQICFQUUH/2gAIAQEAAT8huQpIdEpmbas4ichfVJgCaFC8h0QMB2D0nARwIaFpwvgLiJsem0OiNwdk8Yb+l8EXgF5Ho81UAciwTAGUK4i6pzDtdpogpCfDPo3H0/0LA+GM0DHEuAEPCief/9oADAMBAAIAAwAAABC2yTcgABPfJb5LKI//ALfX/wD7B4/91t2//YAv2EAL+1AACWXf/n/OrYklv2zfbYXAALbBA7KQCbU1slluhL220/8AvVsvvlZtPsyDy/sAD/8AcAAJJt7bNuADWS3/AGybYAMAJGyQCJJYCTWlu23fEJG2n9IE+/8A/wCbTbZMie/UALb/ALAABJKe2zY6SZ0lv23JJAAJJCabLXJICPW9m77/ACCZtIASdv8A/wD8mWmWTIxO4Am+doABJJaW2BI4bbZ1vySJIAIJALbbbZZASbW/nGkpgKDBJLO//wDdbVktkgTyb/QNvQSQCSSlgkySS2222f8AJRsgkUAEJBLJMFJNvL9DbIAGEklmn3/3aSTJdJMm6E8knbaEgkkhBIEF/wC7bbba0CWbJBuFIP/EAB8RAQABBAMBAQEAAAAAAAAAAAERADBAUBAgMVEhQf/aAAgBAwEBPxC6X1wpqanp/de+UMUfdTOI3XseXlwZqbBddC+cjFH1UzpS5OZ42ZNH1R+4DeepbcycAZ/juMUfWa9S0sZbye3Hg1IUoloCyureDVhFDOD/AP/EAB4RAQACAgMAAwAAAAAAAAAAAAERMABAIDFQEFFg/9oACAECAQE/ELW+NOMjTPAMSccRGoab3caMZFDaXOmd/MY4jSNNsNCLG0PBO+PeP00S44vkPnHNJx3ReG82HhFKTivyh4RWmJGj/8QAIhAAAQMEAgMBAQAAAAAAAAAAAQARMSAhMEEQUUBhcYGR/9oACAEBAAE/EMplTijkXNlcYMlR4IJpDsf4gAgUAsRnJ3Y4RDhu0bE5XRbrB0gAMAwokTnRXsv3xIHwzORkCJYIAW4uOjS+EE0h2P8AEAQK4VwfJFkTfeYJd5DNh+r2J7p+Kbn4h2T45wjeDvFvghIADDlx+xilA2mQDZQAQFulswaDdnWYX9hiZ7Ik2+kABYBgKdcT1P4BUeY2p3SKj+gQAAYChnshcHXBoufaBPSAbugAIGH1RtTIxt7RLCVJzkMWr0ilhbtQlz3UcX8T54Kdpqm4MUtiJcbBAMGFTAduXHSdtfsgG8G0KdVmwbwAu9LJiS0rZ/KYCwFq9claPeJ8gTIUsmoZb5MtldaDparcLsIAbQAEZG5ioWOQ3Pl8oOVNwgdoRZfvJAeMNlLJl//Z",ht={setup(){return{aside:Pe()}},props:["state"],emits:["update:state"],data:()=>({active:{},panel:[0,1,2,3,4,5,6,7,8,9],width:window.innerWidth}),methods:{isActive(t,e){return typeof this.active[t]>"u"&&(this.active[t]={}),typeof this.active[t][e]>"u"&&(this.active[t][e]=!0),this.active[t][e]},toggle(t,e){this.aside.toggle(t,e),this.active[t][e]=!this.active[t][e]}}};function yt(t,e,l,d,r,s){return A(),v(He,{location:"end",width:"220",modelValue:l.state,"onUpdate:modelValue":e[1]||(e[1]=a=>t.$emit("update:state",a)),rail:!(t.width>1200),"expand-on-hover":""},{default:i(()=>[n(q,{variant:"accordion",modelValue:t.panel,"onUpdate:modelValue":e[0]||(e[0]=a=>t.panel=a)},{default:i(()=>[(A(!0),c(b,null,E(d.aside.store,(a,o)=>te((A(),v(x,{key:o,elevation:"0"},{default:i(()=>[n(j,null,{default:i(()=>[p(U(o),1)]),_:2},1024),n(X,null,{default:i(()=>[n($,{density:"compact"},{default:i(()=>[(A(!0),c(b,null,E(a,(f,u)=>(A(),v(D,{key:u,active:s.isActive(o,u),onClick:m=>s.toggle(o,u)},{default:i(()=>[p(U(u)+" ("+U(f)+") ",1)]),_:2},1032,["active","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Me,d.aside.show[o]]])),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","rail"])}const Ct=B(ht,[["render",yt]]),bt={props:["item"],emits:["update:item"],data:()=>({panel:[0],elements:{"cms::test":{type:"cms::test",fields:{"test/key":{type:"cms::string",label:"Test string config"},"test/color":{type:"cms::color",label:"Test color selector"}}},"cms::test2":{type:"cms::test2",fields:{"test2/key":{type:"cms::string",label:"Second string value"}}}}})},wt=["is","config","onUpdate:modelValue"];function Ut(t,e,l,d,r,s){return A(),v(J,null,{default:i(()=>[n(q,{modelValue:t.panel,"onUpdate:modelValue":e[0]||(e[0]=a=>t.panel=a)},{default:i(()=>[(A(!0),c(b,null,E(t.elements,(a,o)=>(A(),v(x,{key:o,elevation:"1"},{default:i(()=>[n(j,null,{default:i(()=>[p(U(o),1)]),_:2},1024),n(X,null,{default:i(()=>[n(J,null,{default:i(()=>[n(T,null,{default:i(()=>[(A(!0),c(b,null,E(a.fields,(f,u)=>(A(),v(I,{cols:"12",md:"6"},{default:i(()=>[te(L("input",{is:t.name(f.type),config:f,"onUpdate:modelValue":m=>l.item.config[u]=m},null,8,wt),[[Ye,l.item.config[u]]])]),_:2},1024))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})}const kt=B(bt,[["render",Ut],["__scopeId","data-v-9a99315b"]]),Et={setup(){const t=$e();return{app:ce(),languages:t}},props:["item"],emits:["update:item"],data:()=>({}),computed:{langs(){const t=[{code:"",name:"None"}];return Object.entries(this.languages.available).forEach(e=>{t.push({code:e[0],name:e[1]})}),t}},watch:{item:{deep:!0,handler(){this.$emit("update:item",this.item)}}}};function Bt(t,e,l,d,r,s){return A(),v(J,null,{default:i(()=>[n(T,null,{default:i(()=>[n(I,{cols:"12",md:"6"},{default:i(()=>[n(ee,{modelValue:l.item.status,"onUpdate:modelValue":e[0]||(e[0]=a=>l.item.status=a),label:"Status",items:[{key:0,val:"Disabled"},{key:1,val:"Enabled"},{key:2,val:"Hidden in navigation"}],"item-title":"val","item-value":"key",variant:"underlined",required:""},null,8,["modelValue"])]),_:1}),n(I,{cols:"12",md:"6"},{default:i(()=>[n(ee,{modelValue:l.item.lang,"onUpdate:modelValue":e[1]||(e[1]=a=>l.item.lang=a),label:"Language",items:s.langs,"item-title":"name","item-value":"code",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1}),n(T,null,{default:i(()=>[n(I,{cols:"12",md:"6"},{default:i(()=>[n(Q,{modelValue:l.item.name,"onUpdate:modelValue":e[2]||(e[2]=a=>l.item.name=a),label:"Page name",variant:"underlined",counter:"30",required:""},null,8,["modelValue"]),n(Q,{modelValue:l.item.title,"onUpdate:modelValue":e[3]||(e[3]=a=>l.item.title=a),label:"Page title",variant:"underlined",counter:"70"},null,8,["modelValue"])]),_:1}),n(I,{cols:"12",md:"6"},{default:i(()=>[n(Q,{modelValue:l.item.slug,"onUpdate:modelValue":e[4]||(e[4]=a=>l.item.slug=a),label:"URL segment",variant:"underlined",counter:"255",required:""},null,8,["modelValue"]),n(Q,{modelValue:l.item.domain,"onUpdate:modelValue":e[5]||(e[5]=a=>l.item.domain=a),label:"Domain",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),n(T,null,{default:i(()=>[n(I,{cols:"12",md:"6"},{default:i(()=>[n(Q,{modelValue:l.item.tag,"onUpdate:modelValue":e[6]||(e[6]=a=>l.item.tag=a),label:"Page tag",variant:"underlined"},null,8,["modelValue"])]),_:1}),n(I,{cols:"12",md:"6"},{default:i(()=>[n(ee,{modelValue:l.item.cache,"onUpdate:modelValue":e[7]||(e[7]=a=>l.item.cache=a),label:"Cache time",items:[{key:0,val:"No cache"},{key:1,val:"1 minute"},{key:5,val:"5 minutes"},{key:15,val:"15 minutes"},{key:30,val:"30 minutes"},{key:60,val:"1 hour"},{key:180,val:"3 hours"},{key:360,val:"6 hours"},{key:720,val:"12 hours"},{key:1440,val:"24 hours"}],"item-title":"val","item-value":"key",variant:"underlined"},null,8,["modelValue"])]),_:1}),n(I,{cols:"12"},{default:i(()=>[n(Q,{modelValue:l.item.to,"onUpdate:modelValue":e[8]||(e[8]=a=>l.item.to=a),label:"Redirect URL",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),n(T,null,{default:i(()=>[n(I,{cols:"12",md:"6"},{default:i(()=>[n(Q,{type:"datetime-local",modelValue:l.item.start,"onUpdate:modelValue":e[9]||(e[9]=a=>l.item.start=a),label:"Start date",variant:"underlined"},null,8,["modelValue"])]),_:1}),n(I,{cols:"12",md:"6"},{default:i(()=>[n(Q,{type:"datetime-local",modelValue:l.item.end,"onUpdate:modelValue":e[10]||(e[10]=a=>l.item.end=a),label:"End date",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})}const It=B(Et,[["render",Bt]]),Dt={props:["ce","index"],emits:["add"],data:()=>({panel:[0]})},Lt=["innerHTML"];function Qt(t,e,l,d,r,s){return A(),v(J,null,{default:i(()=>[n(q,{modelValue:t.panel,"onUpdate:modelValue":e[0]||(e[0]=a=>t.panel=a)},{default:i(()=>[n(x,{elevation:"1"},{default:i(()=>[n(j,null,{default:i(()=>e[1]||(e[1]=[p(" Available elements ")])),_:1}),n(X,null,{default:i(()=>[(A(!0),c(b,null,E(l.ce,(a,o)=>(A(),v(y,{key:o,variant:"text",stacked:"",onClick:f=>t.$emit("add",{type:o,index:l.index})},{prepend:i(()=>[L("span",{class:"icon",innerHTML:a.icon},null,8,Lt)]),default:i(()=>[p(" "+U(o),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Se=B(Dt,[["render",Qt],["__scopeId","data-v-64544cac"]]),Ht={props:["data","fields"],emits:["update:data"],data:()=>({img:{}}),setup(){return{app:ce()}},methods:{srcset(t){let e=[];for(const l in t)e.push(`${this.url(t[l])} ${l}w`);return e.join(", ")},file(t,e){this.data[t]={path:URL.createObjectURL(e),uploading:!0},this.upload(e).then(l=>{URL.revokeObjectURL(this.data[t].path),this.data[t]=l}).finally(()=>{delete this.data[t].uploading})},files(t,e){this.data[t]=[];for(const l in e)this.data[t][l]={path:URL.createObjectURL(e[l]),uploading:!0},this.upload(e[l]).then(d=>{URL.revokeObjectURL(this.data[t][l].path),this.data[t][l]=d}).finally(()=>{delete this.data[t][l].uploading})},async upload(t){return await this.$apollo.mutate({mutation:ze`mutation($file: Upload!) {
            addFile(file: $file) {
              id
              mime
              name
              path
              previews
            }
          }`,variables:{file:t},context:{hasUpload:!0}}).then(e=>{var l;if(e.errors)throw e.errors;return((l=e.data)==null?void 0:l.addFile)||{}}).then(e=>(delete e.__typename,e.previews=JSON.parse(e.previews)||{},e)).catch(e=>{this.data[code].uploading=!1,console.error("addFile("+code+")",e)})},url(t){return t.startsWith("http")||t.startsWith("blob:")?t:this.app.urlfiles.replace(/\/+$/g,"")+"/"+t}}},Pt={key:4},Mt={key:5};function Ot(t,e,l,d,r,s){return A(),v(J,null,{default:i(()=>[n(qe,{onSubmit:e[0]||(e[0]=he(()=>{},["prevent"]))},{default:i(()=>[(A(!0),c(b,null,E(l.fields,(a,o)=>(A(),v(T,{key:o},{default:i(()=>[n(I,{cols:"12",sm:"3",class:"form-label"},{default:i(()=>[n(xe,null,{default:i(()=>[p(U(a.label||o),1)]),_:2},1024)]),_:2},1024),n(I,{cols:"12",sm:"9"},{default:i(()=>{var f;return[a.type==="autocomplete"?(A(),v(je,{key:0,items:a.options||[],label:a.label||"",modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u,variant:"underlined"},null,8,["items","label","modelValue","onUpdate:modelValue"])):V("",!0),a.type==="checkbox"?(A(),v(Xe,{key:1,label:a.label||"",modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u},null,8,["label","modelValue","onUpdate:modelValue"])):V("",!0),a.type==="combobox"?(A(),v(Ge,{key:2,items:a.options||[],label:a.label||"",multiple:a.multiple,chips:a.multiple,modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u,variant:"underlined",clearable:""},null,8,["items","label","multiple","chips","modelValue","onUpdate:modelValue"])):V("",!0),a.type==="file"?(A(),v(oe,{key:3,label:a.label||"",modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u,variant:"underlined",clearable:""},null,8,["label","modelValue","onUpdate:modelValue"])):V("",!0),a.type==="image"?(A(),c("div",Pt,[n(oe,{label:a.label||"","onUpdate:modelValue":u=>s.file(o,u),variant:"underlined","show-size":"1024",clearable:""},null,8,["label","onUpdate:modelValue"]),l.data[o].uploading?(A(),v(we,{key:0,color:"primary",height:"5",indeterminate:"",rounded:""})):V("",!0),l.data[o]?(A(),v(We,{key:1,src:s.url(l.data[o].path),srcset:s.srcset(l.data[o].previews),"max-width":"50vw","max-height":"50vh"},null,8,["src","srcset"])):V("",!0)])):V("",!0),a.type==="images"?(A(),c("div",Mt,[n(oe,{label:a.label||"","onUpdate:modelValue":u=>s.files(o,u),variant:"underlined","show-size":"1024",clearable:"",multiple:"",counter:""},null,8,["label","onUpdate:modelValue"]),(f=l.data[o])!=null&&f.length?(A(),v(Ke,{key:0,"show-arrows":l.data[o].length>1},{default:i(()=>[(A(!0),c(b,null,E(l.data[o],u=>(A(),v(et,{src:s.url(u.path),srcset:s.srcset(u.previews)},{default:i(()=>[u.uploading?(A(),v(we,{key:0,color:"primary",height:"5",indeterminate:"",rounded:""})):V("",!0)]),_:2},1032,["src","srcset"]))),256))]),_:2},1032,["show-arrows"])):V("",!0)])):V("",!0),a.type==="number"?(A(),v(tt,{key:6,label:a.label||"",modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u,variant:"outlined"},null,8,["label","modelValue","onUpdate:modelValue"])):V("",!0),a.type==="radio"?(A(),v(lt,{key:7,modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u},{default:i(()=>[(A(!0),c(b,null,E(a.options||[],(u,m)=>(A(),v(at,{label:u,value:m},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])):V("",!0),a.type==="range"?(A(),v(nt,{key:8,modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u},null,8,["modelValue","onUpdate:modelValue"])):V("",!0),a.type==="select"?(A(),v(ee,{key:9,items:a.options||[],label:a.label||"",multiple:a.multiple,chips:a.multiple,modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u,variant:"underlined","item-title":"label"},null,8,["items","label","multiple","chips","modelValue","onUpdate:modelValue"])):V("",!0),a.type==="slider"?(A(),v(it,{key:10,modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u},null,8,["modelValue","onUpdate:modelValue"])):V("",!0),a.type==="switch"?(A(),v(st,{key:11,label:a.label||"",modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u,inset:""},null,8,["label","modelValue","onUpdate:modelValue"])):V("",!0),a.type==="string"?(A(),v(Q,{key:12,label:a.label||"",modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u,variant:"underlined",clearable:""},null,8,["label","modelValue","onUpdate:modelValue"])):V("",!0),a.type==="text"?(A(),v(ut,{key:13,label:a.label||"",modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u,variant:"underlined",clearable:""},null,8,["label","modelValue","onUpdate:modelValue"])):V("",!0),a.type==="date"?(A(),v(ot,{key:14,modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u,"show-adjacent-months":""},null,8,["modelValue","onUpdate:modelValue"])):V("",!0),a.type==="color"?(A(),v(dt,{key:15,modelValue:l.data[o],"onUpdate:modelValue":u=>l.data[o]=u},null,8,["modelValue","onUpdate:modelValue"])):V("",!0)]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}const Ne=B(Ht,[["render",Ot],["__scopeId","data-v-5b95d920"]]);function H(){}H.prototype={diff:function(e,l){var d,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.callback;typeof r=="function"&&(s=r,r={});var a=this;function o(h){return h=a.postProcess(h,r),s?(setTimeout(function(){s(h)},0),!0):h}e=this.castInput(e,r),l=this.castInput(l,r),e=this.removeEmpty(this.tokenize(e,r)),l=this.removeEmpty(this.tokenize(l,r));var f=l.length,u=e.length,m=1,g=f+u;r.maxEditLength!=null&&(g=Math.min(g,r.maxEditLength));var C=(d=r.timeout)!==null&&d!==void 0?d:1/0,M=Date.now()+C,k=[{oldPos:-1,lastComponent:void 0}],P=this.extractCommon(k[0],l,e,0,r);if(k[0].oldPos+1>=u&&P+1>=f)return o(Be(a,k[0].lastComponent,l,e,a.useLongestToken));var z=-1/0,S=1/0;function G(){for(var h=Math.max(z,-m);h<=Math.min(S,m);h+=2){var O=void 0,N=k[h-1],Z=k[h+1];N&&(k[h-1]=void 0);var ue=!1;if(Z){var Ce=Z.oldPos-h;ue=Z&&0<=Ce&&Ce<f}var be=N&&N.oldPos+1<u;if(!ue&&!be){k[h]=void 0;continue}if(!be||ue&&N.oldPos<Z.oldPos?O=a.addToPath(Z,!0,!1,0,r):O=a.addToPath(N,!1,!0,1,r),P=a.extractCommon(O,l,e,h,r),O.oldPos+1>=u&&P+1>=f)return o(Be(a,O.lastComponent,l,e,a.useLongestToken));k[h]=O,O.oldPos+1>=u&&(S=Math.min(S,h-1)),P+1>=f&&(z=Math.max(z,h+1))}m++}if(s)(function h(){setTimeout(function(){if(m>g||Date.now()>M)return s();G()||h()},0)})();else for(;m<=g&&Date.now()<=M;){var W=G();if(W)return W}},addToPath:function(e,l,d,r,s){var a=e.lastComponent;return a&&!s.oneChangePerToken&&a.added===l&&a.removed===d?{oldPos:e.oldPos+r,lastComponent:{count:a.count+1,added:l,removed:d,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:l,removed:d,previousComponent:a}}},extractCommon:function(e,l,d,r,s){for(var a=l.length,o=d.length,f=e.oldPos,u=f-r,m=0;u+1<a&&f+1<o&&this.equals(d[f+1],l[u+1],s);)u++,f++,m++,s.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return m&&!s.oneChangePerToken&&(e.lastComponent={count:m,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=f,u},equals:function(e,l,d){return d.comparator?d.comparator(e,l):e===l||d.ignoreCase&&e.toLowerCase()===l.toLowerCase()},removeEmpty:function(e){for(var l=[],d=0;d<e.length;d++)e[d]&&l.push(e[d]);return l},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function Be(t,e,l,d,r){for(var s=[],a;e;)s.push(e),a=e.previousComponent,delete e.previousComponent,e=a;s.reverse();for(var o=0,f=s.length,u=0,m=0;o<f;o++){var g=s[o];if(g.removed)g.value=t.join(d.slice(m,m+g.count)),m+=g.count;else{if(!g.added&&r){var C=l.slice(u,u+g.count);C=C.map(function(M,k){var P=d[m+k];return P.length>M.length?P:M}),g.value=t.join(C)}else g.value=t.join(l.slice(u,u+g.count));u+=g.count,g.added||(m+=g.count)}}return s}function Ie(t,e){var l;for(l=0;l<t.length&&l<e.length;l++)if(t[l]!=e[l])return t.slice(0,l);return t.slice(0,l)}function De(t,e){var l;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(l=0;l<t.length&&l<e.length;l++)if(t[t.length-(l+1)]!=e[e.length-(l+1)])return t.slice(-l);return t.slice(-l)}function fe(t,e,l){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return l+t.slice(e.length)}function ve(t,e,l){if(!e)return t+l;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+l}function Y(t,e){return fe(t,e,"")}function K(t,e){return ve(t,e,"")}function Le(t,e){return e.slice(0,Jt(t,e))}function Jt(t,e){var l=0;t.length>e.length&&(l=t.length-e.length);var d=e.length;t.length<e.length&&(d=t.length);var r=Array(d),s=0;r[0]=0;for(var a=1;a<d;a++){for(e[a]==e[s]?r[a]=r[s]:r[a]=s;s>0&&e[a]!=e[s];)s=r[s];e[a]==e[s]&&s++}s=0;for(var o=l;o<t.length;o++){for(;s>0&&t[o]!=e[s];)s=r[s];t[o]==e[s]&&s++}return s}var ie="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Tt=new RegExp("[".concat(ie,"]+|\\s+|[^").concat(ie,"]"),"ug"),se=new H;se.equals=function(t,e,l){return l.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};se.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');l=Array.from(e.intlSegmenter.segment(t),function(s){return s.segment})}else l=t.match(Tt)||[];var d=[],r=null;return l.forEach(function(s){/\s/.test(s)?r==null?d.push(s):d.push(d.pop()+s):/\s/.test(r)?d[d.length-1]==r?d.push(d.pop()+s):d.push(r+s):d.push(s),r=s}),d};se.join=function(t){return t.map(function(e,l){return l==0?e:e.replace(/^\s+/,"")}).join("")};se.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var l=null,d=null,r=null;return t.forEach(function(s){s.added?d=s:s.removed?r=s:((d||r)&&Qe(l,r,d,s),l=s,d=null,r=null)}),(d||r)&&Qe(l,r,d,null),t};function Qe(t,e,l,d){if(e&&l){var r=e.value.match(/^\s*/)[0],s=e.value.match(/\s*$/)[0],a=l.value.match(/^\s*/)[0],o=l.value.match(/\s*$/)[0];if(t){var f=Ie(r,a);t.value=ve(t.value,a,f),e.value=Y(e.value,f),l.value=Y(l.value,f)}if(d){var u=De(s,o);d.value=fe(d.value,o,u),e.value=K(e.value,u),l.value=K(l.value,u)}}else if(l)t&&(l.value=l.value.replace(/^\s*/,"")),d&&(d.value=d.value.replace(/^\s*/,""));else if(t&&d){var m=d.value.match(/^\s*/)[0],g=e.value.match(/^\s*/)[0],C=e.value.match(/\s*$/)[0],M=Ie(m,g);e.value=Y(e.value,M);var k=De(Y(m,M),C);e.value=K(e.value,k),d.value=fe(d.value,m,k),t.value=ve(t.value,m,m.slice(0,m.length-k.length))}else if(d){var P=d.value.match(/^\s*/)[0],z=e.value.match(/\s*$/)[0],S=Le(z,P);e.value=K(e.value,S)}else if(t){var G=t.value.match(/\s*$/)[0],W=e.value.match(/^\s*/)[0],h=Le(G,W);e.value=Y(e.value,h)}}var _t=new H;_t.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(ie,"]+|[^\\S\\n\\r]+|[^").concat(ie,"]"),"ug");return t.match(e)||[]};var ye=new H;ye.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var l=[],d=t.split(/(\n|\r\n)/);d[d.length-1]||d.pop();for(var r=0;r<d.length;r++){var s=d[r];r%2&&!e.newlineIsToken?l[l.length-1]+=s:l.push(s)}return l};ye.equals=function(t,e,l){return l.ignoreWhitespace?((!l.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!l.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):l.ignoreNewlineAtEof&&!l.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),H.prototype.equals.call(this,t,e,l)};var Rt=new H;Rt.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Ft=new H;Ft.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function pe(t){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(t)}var F=new H;F.useLongestToken=!0;F.tokenize=ye.tokenize;F.castInput=function(t,e){var l=e.undefinedReplacement,d=e.stringifyReplacer,r=d===void 0?function(s,a){return typeof a>"u"?l:a}:d;return typeof t=="string"?t:JSON.stringify(ge(t,null,null,r),r,"  ")};F.equals=function(t,e,l){return H.prototype.equals.call(F,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),l)};function zt(t,e,l){return F.diff(t,e,l)}function ge(t,e,l,d,r){e=e||[],l=l||[],d&&(t=d(r,t));var s;for(s=0;s<e.length;s+=1)if(e[s]===t)return l[s];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),l.push(a),s=0;s<t.length;s+=1)a[s]=ge(t[s],e,l,d,r);return e.pop(),l.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),pe(t)==="object"&&t!==null){e.push(t),a={},l.push(a);var o=[],f;for(f in t)Object.prototype.hasOwnProperty.call(t,f)&&o.push(f);for(o.sort(),s=0;s<o.length;s+=1)f=o[s],a[f]=ge(t[f],e,l,d,f);e.pop(),l.pop()}else a=t;return a}var Ve=new H;Ve.tokenize=function(t){return t.slice()};Ve.join=Ve.removeEmpty=function(t){return t};const St={props:["name","data","versions"],emit:["hide","use"],data:()=>({list:[]}),mounted(){this.versions.forEach(t=>{const e={...t};e[this.name]=JSON.parse(t[this.name]),this.list.push(e)})},methods:{diff(t,e){return t&&e?zt(t,e):e?[e]:[]}}};function Nt(t,e,l,d,r,s){return A(),v(de,{"prepend-icon":"mdi-history"},{append:i(()=>[n(Ae,{onClick:e[0]||(e[0]=a=>t.$emit("hide"))},{default:i(()=>e[2]||(e[2]=[p("mdi-close")])),_:1})]),title:i(()=>e[3]||(e[3]=[p(" History ")])),default:i(()=>[n(me),n(re,null,{default:i(()=>[n(rt,{side:"end",align:"start"},{default:i(()=>[l.versions[0]&&l.versions[0][l.name]!=JSON.stringify(l.data)?(A(),v(Ue,{key:0,size:"small","dot-color":"blue"},{default:i(()=>[n(de,{class:"elevation-2"},{default:i(()=>[n(ke,null,{default:i(()=>e[4]||(e[4]=[p("Current")])),_:1}),n(re,null,{default:i(()=>[(A(!0),c(b,null,E(s.diff(t.list[0]?t.list[0][l.name]:{},l.data),a=>(A(),c("span",{class:le({added:a.added,removed:a.removed})},U(a.value||a),3))),256))]),_:1})]),_:1})]),_:1})):V("",!0),(A(!0),c(b,null,E(t.list,(a,o)=>(A(),v(Ue,{key:o,size:"small","dot-color":a.published?"success":"grey-lighten-1"},{default:i(()=>[n(de,{class:"elevation-2"},{default:i(()=>[n(ke,null,{default:i(()=>[p(U(a.created_at),1)]),_:2},1024),n(mt,null,{default:i(()=>[p(U(a.editor),1)]),_:2},1024),n(re,null,{default:i(()=>[(A(!0),c(b,null,E(s.diff(a[o+1]?a[o+1][l.name]:a[l.name],a[l.name]),f=>(A(),c("span",{class:le({added:f.added,removed:f.removed})},U(f.value||f),3))),256))]),_:2},1024),n(Ee,null,{default:i(()=>[n(y,{variant:"outlined",onClick:f=>t.$emit("use",a[l.name])},{default:i(()=>e[5]||(e[5]=[p(" Use ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["dot-color"]))),128))]),_:1})]),_:1}),n(me),n(Ee,null,{default:i(()=>[n(y,{block:"",onClick:e[1]||(e[1]=a=>t.$emit("hide"))},{default:i(()=>e[6]||(e[6]=[p(" Close ")])),_:1})]),_:1})]),_:1})}const Ze=B(St,[["render",Nt],["__scopeId","data-v-a249e51e"]]),Zt={components:{Elements:Se,Fields:Ne,History:Ze},props:["item"],emits:["update:item"],data:()=>({ce:{"cms::meta":{type:"meta",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z" /></svg>',fields:{description:{type:"string"},keywords:{type:"string"}}},"cms::social":{type:"social",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.34 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z" /></svg>',fields:{"og:url":{type:"string"},"og:title":{type:"string"}}},"cms::canonical":{type:"canonical",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5,6.41L6.41,5L17,15.59V9H19V19H9V17H15.59L5,6.41Z" /></svg>',fields:{url:{type:"string"}}}},meta:{},velements:!1,vhistory:!1,panel:[0]}),mounted(){var t;this.meta=JSON.parse(((t=this.item.versions[0])==null?void 0:t.meta)||this.item.meta||"{}")},computed:{available(){return Object.keys(this.elements).length},elements(){const t={...this.ce};for(const e in this.meta)delete t[e];return t},history(){return!!this.vhistory}},methods:{add(t){this.meta[t]={type:t},this.velements=!1},remove(t){delete this.meta[t]},use(t){this.meta=t,this.vhistory=null}},watch:{meta:{deep:!0,handler(){const t={...this.item};t.meta=this.meta,this.$emit("update:item",t)}}}},Yt={class:"header"},$t={class:"panel-heading"},qt={class:"subtext"},xt={key:0,class:"btn-group"};function jt(t,e,l,d,r,s){const a=w("Fields"),o=w("Elements"),f=w("History");return A(),c(b,null,[L("div",Yt,[n(y,{class:le({hidden:!l.item.versions.length}),variant:"outlined",onClick:e[0]||(e[0]=u=>t.vhistory=!0)},{default:i(()=>e[7]||(e[7]=[p(" History ")])),_:1},8,["class"])]),n(q,null,{default:i(()=>[(A(!0),c(b,null,E(t.meta||{},(u,m)=>(A(),v(x,{key:m,elevation:"1"},{default:i(()=>[n(j,{"collapse-icon":"mdi-pencil"},{default:i(()=>[n(y,{icon:"mdi-delete",variant:"text",onClick:g=>s.remove(m)},null,8,["onClick"]),L("div",$t,[p(U(m)+" ",1),L("span",qt,U(u.title||u.text||""),1)])]),_:2},1024),n(X,null,{default:i(()=>[n(a,{item:u,"onUpdate:item":g=>t.meta[m]=g},null,8,["item","onUpdate:item"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s.available?(A(),c("div",xt,[n(y,{icon:"mdi-view-grid-plus",color:"primary",onClick:e[1]||(e[1]=u=>t.velements=!0)})])):V("",!0),(A(),v(ne,{to:"body"},[n(ae,{modelValue:t.velements,"onUpdate:modelValue":e[3]||(e[3]=u=>t.velements=u),scrollable:"",width:"auto"},{default:i(()=>[n(o,{ce:s.elements,onAdd:e[2]||(e[2]=u=>s.add(u.type))},null,8,["ce"])]),_:1},8,["modelValue"])])),(A(),v(ne,{to:"body"},[n(ae,{modelValue:t.vhistory,"onUpdate:modelValue":e[6]||(e[6]=u=>t.vhistory=u),scrollable:"",width:"auto"},{default:i(()=>[n(f,{name:"meta",data:t.meta,versions:l.item.versions||[],onUse:e[4]||(e[4]=u=>s.use(u)),onHide:e[5]||(e[5]=u=>t.vhistory=!1)},null,8,["data","versions"])]),_:1},8,["modelValue"])]))],64)}const Xt=B(Zt,[["render",jt],["__scopeId","data-v-8a7dcee5"]]),Gt={components:{PageDetailsPageConfig:kt,PageDetailsPageProps:It,PageDetailsPageMeta:Xt},props:["item"],emits:["update:item"],data:()=>({tab:"details"})};function Wt(t,e,l,d,r,s){const a=w("PageDetailsPageProps"),o=w("PageDetailsPageMeta"),f=w("PageDetailsPageConfig");return A(),v(J,null,{default:i(()=>[n(Oe,null,{default:i(()=>[n(Je,{class:"subtabs",modelValue:t.tab,"onUpdate:modelValue":e[0]||(e[0]=u=>t.tab=u),"align-tabs":"center",density:"compact"},{default:i(()=>[n(_,{value:"details"},{default:i(()=>e[5]||(e[5]=[p("Details")])),_:1}),n(_,{value:"meta"},{default:i(()=>e[6]||(e[6]=[p("Meta")])),_:1}),n(_,{value:"config"},{default:i(()=>e[7]||(e[7]=[p("Config")])),_:1})]),_:1},8,["modelValue"]),n(Te,{modelValue:t.tab,"onUpdate:modelValue":e[4]||(e[4]=u=>t.tab=u)},{default:i(()=>[n(R,{value:"details"},{default:i(()=>[n(a,{item:l.item,"onUpdate:item":e[1]||(e[1]=u=>t.$emit("update:item",u))},null,8,["item"])]),_:1}),n(R,{value:"meta"},{default:i(()=>[n(o,{item:l.item,"onUpdate:item":e[2]||(e[2]=u=>t.$emit("update:item",u))},null,8,["item"])]),_:1}),n(R,{value:"config"},{default:i(()=>[n(f,{item:l.item,"onUpdate:item":e[3]||(e[3]=u=>t.$emit("update:item",u))},null,8,["item"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const Kt=B(Gt,[["render",Wt],["__scopeId","data-v-85522f67"]]),el={components:{Fields:Ne},props:["clip","content"],emits:["copy","cut","insert","paste","remove","update:content"]},tl={class:"content-type"},ll={class:"content-title"};function al(t,e,l,d,r,s){const a=w("Fields");return A(),v(x,{elevation:"1",rounded:"lg"},{default:i(()=>[n(j,{"collapse-icon":"mdi-pencil"},{default:i(()=>{var o,f;return[n(_e,{modelValue:l.content._checked,"onUpdate:modelValue":e[0]||(e[0]=u=>l.content._checked=u)},null,8,["modelValue"]),n(Re,null,{activator:i(({props:u})=>[n(y,Fe({icon:"mdi-dots-vertical",variant:"text"},u),null,16)]),default:i(()=>[n($,null,{default:i(()=>[n(D,null,{default:i(()=>[n(y,{"prepend-icon":"mdi-content-copy",variant:"text",onClick:e[1]||(e[1]=u=>t.$emit("copy"))},{default:i(()=>e[9]||(e[9]=[p("Copy")])),_:1})]),_:1}),n(D,null,{default:i(()=>[n(y,{"prepend-icon":"mdi-content-cut",variant:"text",onClick:e[2]||(e[2]=u=>t.$emit("cut"))},{default:i(()=>e[10]||(e[10]=[p("Cut")])),_:1})]),_:1}),n(D,null,{default:i(()=>[n(y,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:e[3]||(e[3]=u=>t.$emit("insert",0))},{default:i(()=>e[11]||(e[11]=[p("Insert before")])),_:1})]),_:1}),n(D,null,{default:i(()=>[n(y,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:e[4]||(e[4]=u=>t.$emit("insert",1))},{default:i(()=>e[12]||(e[12]=[p("Insert after")])),_:1})]),_:1}),l.clip?(A(),v(D,{key:0},{default:i(()=>[n(y,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:e[5]||(e[5]=u=>t.$emit("paste",0))},{default:i(()=>e[13]||(e[13]=[p("Paste before")])),_:1})]),_:1})):V("",!0),l.clip?(A(),v(D,{key:1},{default:i(()=>[n(y,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:e[6]||(e[6]=u=>t.$emit("paste",1))},{default:i(()=>e[14]||(e[14]=[p("Paste after")])),_:1})]),_:1})):V("",!0),n(D,null,{default:i(()=>[n(y,{"prepend-icon":"mdi-delete",variant:"text",onClick:e[7]||(e[7]=u=>t.$emit("remove"))},{default:i(()=>e[15]||(e[15]=[p("Delete")])),_:1})]),_:1})]),_:1})]),_:1}),L("div",tl,U(l.content.type),1),L("div",ll,U(((o=l.content.data)==null?void 0:o.title)||((f=l.content.data)==null?void 0:f.text)||""),1)]}),_:1}),n(X,null,{default:i(()=>[n(a,{fields:l.content.fields,data:l.content.data,"onUpdate:data":e[8]||(e[8]=o=>l.content.data=o)},null,8,["fields","data"])]),_:1})]),_:1})}const nl=B(el,[["render",al],["__scopeId","data-v-8cec2898"]]),il={components:{Content:nl,History:Ze,Elements:Se},setup(){return{aside:Pe()}},props:["item"],emits:["update:item"],data:()=>({contents:[],menu:{},side:{},clip:null,index:null,checked:!1,vhistory:!1,velements:!1,elements:{"cms::heading":{type:"heading",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M13,8H15.31L15.63,5H17.63L17.31,8H19.31L19.63,5H21.63L21.31,8H23V10H21.1L20.9,12H23V14H20.69L20.37,17H18.37L18.69,14H16.69L16.37,17H14.37L14.69,14H13V12H14.9L15.1,10H13V8M17.1,10L16.9,12H18.9L19.1,10H17.1Z" /></svg>',fields:{level:{type:"select",options:[{value:1,label:"H1"},{value:2,label:"H2"},{value:3,label:"H3"},{value:4,label:"H4"},{value:5,label:"H5"},{value:6,label:"H6"}]},text:{type:"string"}}},"cms::paragraph":{type:"paragraph",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" /></svg>',fields:{text:{type:"text"}}},"cms::article":{type:"article",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 21H5C3.89 21 3 20.11 3 19V5C3 3.89 3.89 3 5 3H19C20.11 3 21 3.89 21 5V10.33C20.7 10.21 20.37 10.14 20.04 10.14C19.67 10.14 19.32 10.22 19 10.37V5H5V19H10.11L10 19.11V21M7 9H17V7H7V9M7 17H12.11L14 15.12V15H7V17M7 13H16.12L17 12.12V11H7V13M21.7 13.58L20.42 12.3C20.21 12.09 19.86 12.09 19.65 12.3L18.65 13.3L20.7 15.35L21.7 14.35C21.91 14.14 21.91 13.79 21.7 13.58M12 22H14.06L20.11 15.93L18.06 13.88L12 19.94V22Z" /></svg>',fields:{title:{type:"string"},intro:{type:"text"},cover:{type:"images"}}}}}),mounted(){this.contents=JSON.parse(this.item.versions[0]?this.item.versions[0].data:this.item.data||"[]")},methods:{add(t,e){if(!this.elements[t]){console.error("Element not found",t);return}const l=Object.assign(JSON.parse(JSON.stringify(this.elements[t])),{data:{}});e!==null?this.contents.splice(e,0,l):this.contents.push(l),this.velements=!1},clean(){return this.contents.forEach(t=>{delete t._checked,delete t._hide}),this.contents},copy(t){const e=JSON.parse(JSON.stringify(this.contents[t]));e.id=null,this.clip={type:"copy",index:t,content:e}},cut(t){this.clip={type:"cut",index:t,content:this.contents[t]},this.contents.splice(t,1)},insert(t){this.index=t,this.velements=!0},paste(t){this.contents.splice(t,0,this.clip.content),this.clip=null},purge(){for(let t=this.contents.length-1;t>=0;t--)this.contents[t]._checked&&this.remove(t);this.checked=!1},remove(t){this.contents.splice(t,1)},search(t){this.contents.forEach(e=>{e._hide=t!==""&&!JSON.stringify(e).toLocaleLowerCase().includes(t)})},show(t){return(typeof t._hide>"u"||typeof t._hide<"u"&&t._hide!==!0)&&this.aside.isUsed("type",t.type)},toggle(){this.contents.forEach(t=>{t._checked=!t._checked})},visibility(t){this.aside.show.type=!!t}},watch:{contents:{deep:!0,handler(){const t={};this.contents.forEach(e=>{e.type&&(t[e.type]=(t[e.type]||0)+1)}),this.aside.store.type=t}}}},sl={class:"header"},ul={class:"bulk"},ol={class:"btn-group"};function dl(t,e,l,d,r,s){const a=w("Content"),o=w("Elements"),f=w("History"),u=At("observe-visibility");return A(),c(b,null,[te((A(),v(J,null,{default:i(()=>[n(Oe,{elevation:"0"},{default:i(()=>[L("div",sl,[L("div",ul,[n(_e,{modelValue:t.checked,"onUpdate:modelValue":e[0]||(e[0]=m=>t.checked=m),onClick:e[1]||(e[1]=he(m=>s.toggle(),["stop"]))},null,8,["modelValue"]),n(Re,{location:"bottom right"},{activator:i(({props:m})=>[n(y,Fe({"append-icon":"mdi-menu-down",variant:"outlined"},m),{default:i(()=>e[12]||(e[12]=[p("Actions")])),_:2},1040)]),default:i(()=>[n($,null,{default:i(()=>[n(D,null,{default:i(()=>[n(y,{"prepend-icon":"mdi-delete",variant:"text",onClick:e[2]||(e[2]=m=>s.purge())},{default:i(()=>e[13]||(e[13]=[p("Delete")])),_:1})]),_:1})]),_:1})]),_:1})]),n(Q,{"prepend-inner-icon":"mdi-magnify",label:"Search",variant:"underlined",class:"search",clearable:"","hide-details":"",onInput:e[3]||(e[3]=m=>s.search(m.target.value)),"onClick:clear":e[4]||(e[4]=m=>s.search(""))}),n(y,{class:le({hidden:!l.item.versions.length}),variant:"outlined",onClick:e[5]||(e[5]=m=>t.vhistory=!0)},{default:i(()=>e[14]||(e[14]=[p(" History ")])),_:1},8,["class"])]),n(q,null,{default:i(()=>[(A(!0),c(b,null,E(t.contents,(m,g)=>te((A(),v(a,{key:g,clip:t.clip,content:t.contents[g],"onUpdate:content":C=>t.contents[g]=C,onCopy:C=>s.copy(g),onCut:C=>s.cut(g),onInsert:C=>s.insert(g+C),onPaste:C=>s.paste(g+C),onRemove:C=>s.remove(g)},null,8,["clip","content","onUpdate:content","onCopy","onCut","onInsert","onPaste","onRemove"])),[[Me,s.show(m)]])),128))]),_:1}),L("div",ol,[n(y,{icon:"mdi-view-grid-plus",color:"primary",onClick:e[6]||(e[6]=m=>t.velements=!0)})])]),_:1})]),_:1})),[[u,s.visibility]]),(A(),v(ne,{to:"body"},[n(ae,{modelValue:t.velements,"onUpdate:modelValue":e[8]||(e[8]=m=>t.velements=m),scrollable:"",width:"auto"},{default:i(()=>[n(o,{ce:t.elements,index:t.index,onAdd:e[7]||(e[7]=m=>s.add(m.type,m.index))},null,8,["ce","index"])]),_:1},8,["modelValue"])])),(A(),v(ne,{to:"body"},[n(ae,{modelValue:t.vhistory,"onUpdate:modelValue":e[11]||(e[11]=m=>t.vhistory=m),scrollable:"",width:"auto"},{default:i(()=>[n(f,{name:"data",data:s.clean(),versions:l.item.versions||[],onUse:e[9]||(e[9]=m=>t.use(m)),onHide:e[10]||(e[10]=m=>t.vhistory=!1)},null,8,["data","versions"])]),_:1},8,["modelValue"])]))],64)}const rl=B(il,[["render",dl],["__scopeId","data-v-86ee0a31"]]),ml={props:["item"],emits:["update:item"],setup(){return{app:ce()}},computed:{url(){const t=this.app.url.replace(/:domain/,this.item.domain).replace(/:slug/,this.item.slug).replace(/xx_XX/,this.item.lang).replace(/\/+$/g,"");return t+(t.includes("?")?"&":"?")+"cid="+this.item.id}}},Al=["src"];function fl(t,e,l,d,r,s){return A(),c("iframe",{ref:"preview",src:s.url},null,8,Al)}const vl=B(ml,[["render",fl]]),pl={components:{Aside:Ct,PageDetailsPage:Kt,PageDetailsContent:rl,PageDetailsPreview:vl},props:["item"],emits:["update:item"],data:()=>({tab:"page",nav:null,page:{},bgUrl:ct}),watch:{item(){this.page.id&&this.item.id===this.page.id||this.$apollo.query({query:ze`query($id: ID!) {
            page(id: $id) {
              id
              parent_id
              domain
              slug
              lang
              name
              title
              to
              tag
              status
              cache
              config
              data
              meta
              start
              end
              editor
              created_at
              updated_at
              deleted_at
              has
              contents {
                id
                data
              }
              versions {
                published
                meta
                data
                editor
                created_at
              }
            }
          }`,variables:{id:this.item.id}}).then(t=>{!t.errors&&t.data?this.page=Object.assign(this.page,t.data.page):console.log(`page(id: ${this.item.id})`,t)}).catch(t=>{console.log(`page(id: ${this.item.id})`,t)})}}};function gl(t,e,l,d,r,s){const a=w("PageDetailsPage"),o=w("PageDetailsContent"),f=w("PageDetailsPreview"),u=w("Aside");return A(),c(b,null,[n(ft,{elevation:2,density:"compact",image:t.bgUrl},{append:i(()=>[n(y,{onClick:e[1]||(e[1]=he(m=>t.nav=!t.nav,["stop"]))},{default:i(()=>[n(Ae,{size:"x-large"},{default:i(()=>[p(U(t.nav?"mdi-chevron-right":"mdi-chevron-left"),1)]),_:1})]),_:1})]),default:i(()=>[n(pt,null,{default:i(()=>[L("div",{class:"app-title",onClick:e[0]||(e[0]=m=>t.$emit("update:item",t.page))},[n(Ae,{icon:"mdi-keyboard-backspace"}),e[8]||(e[8]=p(" Back to pages "))])]),_:1})]),_:1},8,["image"]),n(vt,null,{default:i(()=>[n(Je,{"fixed-tabs":"",modelValue:t.tab,"onUpdate:modelValue":e[2]||(e[2]=m=>t.tab=m)},{default:i(()=>[n(_,{value:"page"},{default:i(()=>e[9]||(e[9]=[p("Page")])),_:1}),n(_,{value:"content"},{default:i(()=>e[10]||(e[10]=[p("Content")])),_:1}),n(_,{value:"preview"},{default:i(()=>e[11]||(e[11]=[p("Preview")])),_:1})]),_:1},8,["modelValue"]),n(Te,{modelValue:t.tab,"onUpdate:modelValue":e[6]||(e[6]=m=>t.tab=m)},{default:i(()=>[n(R,{value:"page"},{default:i(()=>[n(a,{item:t.page,"onUpdate:item":e[3]||(e[3]=m=>t.page=m)},null,8,["item"])]),_:1}),n(R,{value:"content"},{default:i(()=>[n(o,{item:t.page,"onUpdate:item":e[4]||(e[4]=m=>t.page=m)},null,8,["item"])]),_:1}),n(R,{value:"preview"},{default:i(()=>[n(f,{item:t.page,"onUpdate:item":e[5]||(e[5]=m=>t.page=m)},null,8,["item"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(u,{state:t.nav,"onUpdate:state":e[7]||(e[7]=m=>t.nav=m)},null,8,["state"])],64)}const yl=B(pl,[["render",gl],["__scopeId","data-v-f6a946e1"]]);export{hl as N,yl as P,ct as b};
