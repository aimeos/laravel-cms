var vt=Object.defineProperty;var yt=(e,t,n)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var me=(e,t,n)=>yt(e,typeof t!="symbol"?t+"":t,n);import{g as V}from"./index-CzuiuYVM.js";import{m as xe,C as fe,f as N,o as w,h as g,B as f,F as pe,D as Te,a7 as F,a8 as ce,r as ye,n as W,q as Ce,w as Ze,x as bt,y as He,k as J,c as Y,W as ve,a1 as x,a2 as ae,g as H,_ as ut,a9 as kt,u as Dt,aa as Ct,ab as xt,ac as $t,a6 as $,U as Pe,j as Ue,ad as St,ae as _t,af as Me,ag as Re,a0 as A,ah as _,a4 as K,ai as ze,aj as wt,ak as ne,al as Et,am as et}from"../index.js";import{N as Pt,b as Ot,P as It}from"./PageDetails-BczciiEp.js";var Nt=!1,Tt=!0;/*!
 * helper-js v3.1.6
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */function Fe(e){return Object.prototype.toString.call(e)==="[object Array]"}function tt(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ft(e){return typeof e=="function"}function Lt(e,t){return e<t?e:t}function ct(e,t){let n,a=0;for(;(n=e.indexOf(t))>-1;)e.splice(n,1),a++;return a}function ft(e){return e[e.length-1]}function Bt(e){return Fe(e)?e:[e]}function Vt(e,t){let n=new Set(t);const a={};return n.forEach(l=>{a[l]=e[l]}),a}function At(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){if(t.reverse)if(e.length!=null)for(let n=e.length-1;n>=0;n--){const a={value:e[n],index:n};(!t.exclude||!t.exclude(a))&&(yield a)}else if(tt(e)){const n=Object.keys(e);n.reverse();for(const a of n){const l={value:e[a],key:a};(!t.exclude||!t.exclude(l))&&(yield l)}}else throw"Unsupported type";else if(e.length!=null)for(let n=0;n<e.length;n++){const a={value:e[n],index:n};(!t.exclude||!t.exclude(a))&&(yield a)}else if(tt(e))for(const n of Object.keys(e)){const a={value:e[n],key:n};(!t.exclude||!t.exclude(a))&&(yield a)}else throw"Unsupported type"}()}function Kt(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}function pt(e,t){return Object.keys(t).forEach(n=>{Kt(e,n,t[n])}),e}function Ht(e){const t={};return Object.keys(e).forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t}function Z(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=pt({...n},{childrenKey:"children"});const{childrenKey:a}=n,l=Fe(e)?e:[e];class r{}const i=(s,o,d)=>{n.reverse&&(s=s.slice(),s.reverse());const u=s.length;for(let p=0;p<u;p++){const c=s[p],h=n.reverse?u-p-1:p,v=d?[...d,h]:[];n.childFirst&&c[a]!=null&&i(c[a],c,v);const k=t(c,h,o,v);if(k===!1)throw new r;if(k==="skip children")continue;if(k==="skip siblings")break;n.childFirst||c[a]!=null&&i(c[a],c,v)}};try{i(l,null,Fe(e)?[]:null)}catch(s){if(!(s instanceof r))throw s}}function Ut(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a;return Z(e,function(){if(t(...arguments))return a={node:arguments.length<=0?void 0:arguments[0],index:arguments.length<=1?void 0:arguments[1],parent:arguments.length<=2?void 0:arguments[2],path:arguments.length<=3?void 0:arguments[3]},!1},n),a}function Mt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=Ut(e,t,n);return a==null?void 0:a.node}function gt(e,t){const n={childrenKey:"children"};t&&Object.assign(n,t);const{childrenKey:a,nodeHandler:l}=n,r=new Ge;return r.childrenKey=a,Z(e,(i,s,o,d)=>{let u=Object.assign({},i);u[a]&&(u[a]=[]),l&&(u=l(u,{oldNode:i,index:s,parent:o,path:d})),r.set(d,u)},{childrenKey:a}),r.data}class Ge{constructor(){me(this,"data");me(this,"childrenKey","children");let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.data=t}get rootChildren(){const{childrenKey:t}=this,{data:n}=this;return Fe(n)?n:n[t]}iteratePath(t){var n=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{childrenKey:l,rootChildren:r}=n;if(a.reverse){const i=[...n.iteratePath(t,{...a,reverse:!1})];i.reverse();for(const{path:s,node:o}of i)yield{path:s,node:o}}else{let i=[],s=r;for(const o of t){const d=[...i,o],u=s[o];yield{path:d,node:u},i=d,s=u[l]}}}()}getFamily(t){const n=[];for(const{node:a}of this.iteratePath(t))n.push(a);return n}get(t){return ft(this.getFamily(t))}getParentAndIndex(t){const n=t.slice(),a=n.pop();return{parent:this.get(n),index:a,parentPath:n}}getParent(t){return this.getParentAndIndex(t).parent}set(t,n){if(t==null||t.length===0)this.data=n;else{const{childrenKey:a}=this;let{rootChildren:l}=this;const{parent:r,index:i}=this.getParentAndIndex(t);let s;t.length===1?(l||(this.data?this.data[a]=[]:this.data=[]),s=l):(r[a]||(r[a]=[]),s=r[a]),s[i]=n}}delete(t){const{childrenKey:n,rootChildren:a}=this,{parent:l,index:r}=this.getParentAndIndex(t),i=t.length===1?a:l[n],s=i[r];return i.splice(r,1),s}walk(t,n){const{childrenKey:a,data:l}=this;return Z(l,t,a,n)}clone(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return gt(this.data),Ht({childrenKey:this.childrenKey,nodeHandler:t.nodeHandler||void 0})}}function nt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ft(e)?e(...t):e}function Rt(e,t){return function(){let a,l;try{a=e(...arguments)}catch(r){l=r}finally{}if(l)throw l;return a}}function be(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[];let a;const l={};let r=l;return{action:function(){for(var o=arguments.length,d=new Array(o),u=0;u<o;u++)d[u]=arguments[u];if(d.length===0)return r===l&&(r=e()),r;if(a||(a=new Xt),!a.has(d)&&(a.set(d,e(...d)),t.capacity!=null)){n.push(d);const p=n.splice(0,n.length-t.capacity);for(const c of p)a.delete(c)}return a.get(d)},clearCache:()=>{a=null,n.splice(0,n.length)}}}function zt(){let e,t;return{promise:new Promise((a,l)=>{e=a,t=l}),resolve:e,reject:t}}function jt(e,t){for(;;){if(e.parentNode==null)return!1;if(e.parentNode===t)return!0;e=e.parentNode}}function je(e){let t=e.getBoundingClientRect();if(document.documentElement.clientTop>0){const n=t.top-document.documentElement.clientTop,a=t.bottom,l=t.left-document.documentElement.clientLeft,r=t.right,i=t.width||r-l,s=t.height||a-n,u={top:n,right:r,bottom:a,left:l,width:i,height:s,x:l,y:n};t={...u,toJSON:()=>u}}return t}function at(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n&&n.withSelf?e:e.parentElement;for(;a;){const l=n.until&&a===n.until;if(l&&!n.withUntil)return;const r=t(a);if(r==="break")return;if(r)return a;if(l)return;a=a.parentElement}}function Le(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function rt(e,t){for(const n of t)if(Le(e,n))return!0;return!1}function G(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent(`on${t}`,n,a)}function Q(e,t,n,a){e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent&&e.detachEvent(`on${t}`,n,a)}function Wt(e){let t=[];const n=()=>{if(!l.listening){for(const r of e){G.apply(this,r);const i=()=>Q.apply(this,r);t.push(i)}l.listening=!0}},l={listening:!1,stop:()=>{if(l.listening){for(const r of t)r();t=[],l.listening=!1}},resume:n,start:n};return l.start(),l}function Be(e,t){return getComputedStyle(e)[t]}function Qe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n={start:0,end:e.length-1,maxTimes:1e3,...n};let{start:a,end:l}=n;const{returnNearestIfNoHit:r,maxTimes:i}=n;let s,o;a==null&&(a=0,l=e.length-1);let d=0,u;for(;a>=0&&a<=l;){if(d>=i)throw Error(`binarySearch: loop times is over ${i}, you can increase the limit.`);s=Math.floor((l-a)/2+a),o=e[s];const p=d+1;if(u=t(o,s,p),u>0)l=s-1;else if(u<0)a=s+1;else return{index:s,value:o,count:p,hit:!0};d++}return r?{index:s,value:o,count:d+1,hit:!1,greater:u>0}:null}class Xt{constructor(){me(this,"_map",new Map);me(this,"_values",{});me(this,"_objCount",0)}_keysToString(t){const{_map:n}=this;let a=[];for(const l of t){if(!n.has(l))return null;a.push(n.get(l)[0])}return a.toString()}has(t){return this._keysToString(t)!=null}get(t){const{_values:n}=this,a=this._keysToString(t);if(a==null)throw"Value not found by specified keys";return n[a][1]}set(t,n){const{_map:a,_values:l}=this;let r=[];for(const i of t){let s,o=1;a.has(i)?([s,o]=a.get(i),o++):(this._objCount++,s=this._objCount.toString()),a.set(i,[s,o]),r.push(s)}l[r.toString()]=[t.slice(),n]}delete(t){const{_values:n,_map:a}=this,l=this._keysToString(t);if(l==null)throw"Value not found by specified keys";delete n[l];for(const r of t){let[i,s]=a.get(r);s--,s===0?a.delete(r):a.set(r,[i,s])}}clear(){this._map.clear(),this._values={}}*entries(){const{_values:t}=this;for(const n in t){const[a,l]=t[n];yield[a,l]}}count(){return[...this.entries()].length}}/*!
 * @virtual-list/vue
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://virtual-list.phphe.com
 * Released under the MIT License.
 */const Yt=xe({props:{table:Boolean}}),ht=(e,t)=>{const n=e.__vccOpts||e;for(const[a,l]of t)n[a]=l;return n},qt={key:0},Jt={key:1};function Zt(e,t,n,a,l,r){return e.table?(w(),N("table",qt,[F(e.$slots,"prepend"),J("tbody",null,[F(e.$slots,"default")]),F(e.$slots,"append")])):(w(),N("div",Jt,[F(e.$slots,"prepend"),F(e.$slots,"default"),F(e.$slots,"append")]))}const Gt=ht(Yt,[["render",Zt]]),Qt=xe({components:{VirtualListTable:Gt},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const t=ye(0),n=ye(e.firstRender-1),a=W(()=>{var C;return Lt(n.value,(((C=e.items)==null?void 0:C.length)||1)-1)}),l=ye(0),r=W(()=>c.value[t.value]?he(t.value):0),i=W(()=>c.value.length>0?he(c.value.length-1)+ft(p.value):0),s=W(()=>c.value[a.value]?i.value-he(a.value)-p.value[a.value]:0),o=W(()=>e.disabled?{}:{overflow:"auto"}),d=W(()=>{const C={display:"flex"};return e.disabled||(e.horizontal?Object.assign(C,{"margin-left":r.value+"px","margin-right":s.value+"px",width:i.value-s.value-r.value+"px"}):Object.assign(C,{"margin-top":r.value+"px","margin-bottom":s.value+"px"})),C["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete C.display,delete C["flex-direction"]),C}),u=W(()=>Ce((e.items||[]).map(()=>null))),p=W(()=>(e.items||[]).map((C,b)=>{var y;if(u[b]!=null)return u[b];let T=(y=e.itemSize)==null?void 0:y.call(e,C,b);return T==null&&(T=l.value),T})),c=W(()=>{const C=[];return p.value.reduce((b,y)=>(C.push(b),b+y),0),C});Ze(()=>e.items,O);const h=W(()=>{if(!e.items||e.disabled)return;const C=[];for(let b=t.value;b<=a.value;b++){const y=e.items[b];if(!y)break;C.push({item:y,index:b})}return C}),v=ye(),k=ye();bt(async()=>{O();try{Ke()}catch{await He(),O()}});let S;function I(){const C=v.value;if(!C)return;const b=le(C);S!=null&&e.buffer-Math.abs(b-S)>=10||(S=b,O())}let L=!1,ee=!1;async function O(){var C;if(L){ee=!0;return}if(!e.items||e.disabled)return;L=!0;const b=v.value,y=(C=k.value)==null?void 0:C.$el;if(!b||!y)return;l.value||(l.value=we()),t.value=Se(),n.value=_e(),await He();let T,X=0;const M={},ie=e.table?y.querySelector("tbody").children:y.children;for(let E=0;E<ie.length;E++){const P=ie[E],B=Be(P,"position");if(B&&["absolute","fixed"].includes(B))continue;const te=Be(P,"display")!=="none"?ge(P):0,se=P.getAttribute("vt-index"),Ee=se?parseInt(se):t.value+X;M[Ee]=(M[Ee]||0)+te,X++}for(const E of Object.keys(M)){const P=parseInt(E);u.value[P]!==M[P]&&(u.value[P]=M[P],T=!0)}T&&await He(),L=!1,ee&&(ee=!1,O());function Se(){const E=le(b)-U(b)-e.buffer;return Qe(c.value,P=>P-E,{returnNearestIfNoHit:!0}).index}function _e(){const E=le(b)-U(b)+q(b)+e.buffer;return Qe(c.value,P=>P-E,{returnNearestIfNoHit:!0}).index}function we(){const E=[],P=e.table?y.querySelector("tbody").children:y.children;for(let B=0;B<P.length;B++){const te=P[B],se=getComputedStyle(te);if(["absolute","fixed"].includes(se.position))continue;const Ee=ge(te);if(E.push(Ee),E.length>=10)break}return E.length===0?0:E.reduce((B,te)=>B+te,0)/E.length}}function q(C){const b=getComputedStyle(C);let y=parseFloat(e.horizontal?b.width:b.height);return b.boxSizing==="border-box"&&(e.horizontal?y=y-parseFloat(b.borderLeftWidth)-parseFloat(b.borderRightWidth):y=y-parseFloat(b.borderTopWidth)-parseFloat(b.borderBottomWidth)),y}function ge(C){let b=q(C);const y=getComputedStyle(C);return e.horizontal?b+=parseFloat(y.borderLeftWidth)+parseFloat(y.borderRightWidth)+parseFloat(y.marginLeft)+parseFloat(y.marginRight):b+=parseFloat(y.borderTopWidth)+parseFloat(y.borderBottomWidth)+parseFloat(y.marginTop)+parseFloat(y.marginBottom),b=Number.isNaN(b)?0:b,b}function le(C){return e.horizontal?C.scrollLeft:C.scrollTop}function U(C){const b=getComputedStyle(C);return e.horizontal?parseFloat(b.paddingLeft):parseFloat(b.paddingTop)}function he(C){return c.value[C]}function Ke(){const C=v.value;new ResizeObserver(b=>{for(let y of b)if(Le(y.target,"vtlist")){O();break}}).observe(C)}function $e(C,b){if(e.itemKey){if(typeof e.itemKey=="string"&&e.itemKey==="index")return b;if(typeof e.itemKey=="function")return e.itemKey(C,b)}}return{listElRef:v,listInnerRef:k,onscroll:I,listStyle:o,listInnerStyle:d,visibleItemsInfo:h,getItemKey:$e,update:O,sizes:p,positions:c,runtimeSizes:u}}});function en(e,t,n,a,l,r){const i=fe("VirtualListTable");return w(),N("div",{class:"vtlist",ref:"listElRef",style:ce(e.listStyle),onScrollPassive:t[0]||(t[0]=(...s)=>e.onscroll&&e.onscroll(...s))},[g(i,{class:"vtlist-inner",ref:"listInnerRef",style:ce(e.listInnerStyle),table:e.table},{prepend:f(()=>[F(e.$slots,"prepend")]),append:f(()=>[F(e.$slots,"append")]),default:f(()=>[e.disabled?(w(!0),N(pe,{key:0},Te(e.items,(s,o)=>F(e.$slots,"default",{key:e.getItemKey(s,o),item:s,index:o})),128)):(w(!0),N(pe,{key:1},Te(e.visibleItemsInfo,({item:s,index:o})=>F(e.$slots,"default",{key:e.getItemKey(s,o),item:s,index:o})),128))]),_:3},8,["style","table"])],36)}const tn=ht(Qt,[["render",en]]);/*!
 * @he-tree/tree-utils v0.1.0-alpha.5
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const ue="children";function nn(e){const n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a={...an,...n,data:e,stats:null,statsFlat:null,_statsMap:null,initialized:!1,init(){const{data:r,childrenKey:i}=this,s=new Ge([]);this._statsMap=new Map,Z(r,(d,u,p,c)=>{const h=this.statHandler({...lt(),data:d,open:!!this.defaultOpen,parent:s.getParent(c),children:[],level:c.length});this._statsMap.set(d,h),s.set(c,h)},{childrenKey:i});const o=[];s.walk(d=>{o.push(d)}),this.stats=this.statsHandler(s.rootChildren),this.statsFlat=this.statsFlatHandler(o),this.initialized=!0},getStat(r){let i=this._statsMap.get(r);if(!i)throw new it("Stat not found");return i},has(r){if(r.isStat)return this.statsFlat.indexOf(r)>-1;try{return!!this.getStat(r)}catch(i){if(i instanceof it)return!1;throw i}},_getPathByStat(r){if(r==null)return[];const s=this.getSiblings(r).indexOf(r);return[...r.parent?this._getPathByStat(r.parent):[],s]},afterOneCheckChanged(r){const{checked:i}=r;if(r._ignoreCheckedOnce)return delete r._ignoreCheckedOnce,!1;const s=o=>{const{parent:d}=o;if(d){let u,p,c;for(const v of d.children)v.checked?u=!0:v.checked===0?c=!0:p=!0;const h=c?0:p?u?0:!1:!0;d.checked!==h&&(this._ignoreCheckedOnce(d),d.checked=h),s(d)}};return s(r),Z(r.children,o=>{o.checked!==i&&(this._ignoreCheckedOnce(o),o.checked=i)},{childrenKey:ue}),!0},_ignoreCheckedOnce(r){r._ignoreCheckedOnce=!0,setTimeout(()=>{r._ignoreCheckedOnce&&(r._ignoreCheckedOnce=!1)},100)},isVisible(r){const i=r.isStat?r:this.getStat(r),s=o=>!o||!o.hidden&&o.open&&s(o.parent);return!!(!i.hidden&&s(i.parent))},updateCheck(){Z(this.stats,r=>{if(r.children&&r.children.length>0){const i=r.children.every(s=>s.checked);r.checked!==i&&(this._ignoreCheckedOnce(r),r.checked=i)}},{childFirst:!0,childrenKey:ue})},getChecked(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.statsFlat.filter(i=>i.checked||r&&i.checked===0)},getUnchecked(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.statsFlat.filter(i=>r?!i.checked:i.checked===!1)},openAll(){for(const r of this.statsFlat)r.open=!0},closeAll(){for(const r of this.statsFlat)r.open=!1},openNodeAndParents(r){const i=r.isStat?r:this.getStat(r);for(const s of this.iterateParent(i,{withSelf:!0}))s.open=!0},_calcFlatIndex(r,i){let s=r?this.statsFlat.indexOf(r)+1:0;const o=r?r.children:this.stats;for(let d=0;d<i;d++)s+=this._count(o[d]);return s},add(r,i,s){if(this.has(r))throw"Can't add because data exists in tree";const o=i?i.children:this.stats;s==null&&(s=o.length);const d=this.statHandler({...lt(),open:!!this.defaultOpen,data:r,parent:i||null,children:[],level:i?i.level+1:1});this._setPosition(d,i||null,s);const u=r[this.childrenKey];if(u){const p=u.slice();for(const c of p)this.add(c,d)}},remove(r){const i=this.getSiblings(r);if(i.includes(r)){ct(i,r);const s=this._flat(r);this.statsFlat.splice(this.statsFlat.indexOf(r),s.length);for(const o of s)this._statsMap.delete(o.data);return this.afterRemoveStat(r),!0}return!1},getSiblings(r){const{parent:i}=r;return i?i.children:this.stats},_setPosition(r,i,s){(i?i.children:this.stats).splice(s,0,r),r.parent=i,r.level=i?i.level+1:1;const d=this._calcFlatIndex(i,s),u=this._flat(r);this.statsFlat.splice(d,0,...u);for(const p of u)this._statsMap.has(p.data)||this._statsMap.set(p.data,p);Z(r,(p,c,h)=>{h&&(p.level=h.level+1)},{childrenKey:ue}),this.afterSetStat(r,i,s)},*iterateParent(r,i){let s=i!=null&&i.withSelf?r:r.parent;for(;s;)yield s,s=s.parent},move(r,i,s){if(this.has(r)){if(r.parent===i&&this.getSiblings(r).indexOf(r)===s)return!1;if(r===i)throw new Error("Can't move node to it self");if(i&&r.level<i.level){let o;for(const d of this.iterateParent(i))if(d.level===r.level){o=d;break}if(r===o)throw new Error("Can't move node to its descendant")}this.remove(r)}return this._setPosition(r,i,s),!0},_flat(r){const i=[];return Z(r,s=>{i.push(s)},{childrenKey:ue}),i},_count(r){return this._flat(r).length},getData(r,i){const{childrenKey:s}=this,o=new Ge([]);return o.childrenKey=s,Z(i||this.stats,(d,u,p,c)=>{let h={...d.data,[s]:[]};r&&(h=r(h)),o.set(c,h)},{childrenKey:ue}),o.data}},l=a;return a.noInitialization||l.init(),l}const an={childrenKey:"children",defaultOpen:!1,statsHandler(e){return e},statsFlatHandler(e){return e},afterSetStat(e,t,n){},afterRemoveStat(e){},statHandler(e){return e}};function lt(){return{isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null}}class it extends Error{constructor(t){super(t),this.name="StatNotFoundError"}}/*!
 * drag-event-service v2.0.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const Oe={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},We={isTouch(e){return e.type&&e.type.startsWith("touch")},_getStore(e){return e._wrapperStore||(e._wrapperStore=[]),e._wrapperStore},on(e,t,n,a){const{args:l,mouseArgs:r,touchArgs:i}=st(a),s=this._getStore(e),o=this,d=function(u){let p;if(o.isTouch(u))p={x:u.changedTouches[0].pageX,y:u.changedTouches[0].pageY,pageX:u.changedTouches[0].pageX,pageY:u.changedTouches[0].pageY,clientX:u.changedTouches[0].clientX,clientY:u.changedTouches[0].clientY,screenX:u.changedTouches[0].screenX,screenY:u.changedTouches[0].screenY};else if(p={x:u.pageX,y:u.pageY,pageX:u.pageX,pageY:u.pageY,clientX:u.clientX,clientY:u.clientY,screenX:u.screenX,screenY:u.screenY},t==="start"&&u.which!==1)return;return n.call(this,u,p)};s.push({handler:n,wrapper:d}),G.call(null,e,Oe[t][0],d,...l,...r),G.call(null,e,Oe[t][1],d,...l,...i)},off(e,t,n,a){const{args:l,mouseArgs:r}=st(a),i=this._getStore(e);for(let s=i.length-1;s>=0;s--){const{handler:o,wrapper:d}=i[s];n===o&&(Q.call(null,e,Oe[t][0],d,...l,...r),Q.call(null,e,Oe[t][1],d,...l,...r),i.splice(s,1))}}};function st(e){e||(e={});const t=e.args||[],n=e.mouseArgs||[],a=e.touchArgs||[];return{args:t,mouseArgs:n,touchArgs:a}}/*!
 * @he-tree/dnd-utils v0.1.0-alpha.4
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const Xe=new Map,re={triggerElement:null,dragElement:null,internal:!1,dropEffect:"none",preventDefault:!1},j=re;function ke(e){e.dataTransfer&&(e.dataTransfer.dropEffect=j.dropEffect)}function rn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Xe.has(e))throw"Already registered on specified element";const n={...t},a=n;pt(n,ln),We.on(e,"start",l,{touchArgs:[{passive:!0}]}),We.on(e,"end",r);function l(p){var c;const h=p.target;h.nodeType===Node.ELEMENT_NODE&&(j.triggerElement=h);const v=h;if(n.ingoreHTMLTags&&v.tagName&&n.ingoreHTMLTags.find(S=>S.toUpperCase()===v.tagName))return;const k=(c=n.beforeDragStart)===null||c===void 0?void 0:c.call(n,p);k&&(k.setAttribute("draggable","true"),j.dragElement=k)}function r(p){j.dragElement&&j.dragElement.removeAttribute("draggable")}function i(p){var c;j.internal=!0,(c=n.onDragStart)===null||c===void 0||c.call(n,p),ke(p)}function s(p){var c;(c=n.onDrag)===null||c===void 0||c.call(n,p),ke(p)}function o(p){var c;(c=n.onDragEnd)===null||c===void 0||c.call(n,p),j.internal=!1,j.dragElement&&j.dragElement.removeAttribute("draggable"),j.triggerElement=null,j.dragElement=null,j.dropEffect="none"}const d=on(e,{onDragLeave(p){var c;(c=n.onDragLeave)===null||c===void 0||c.call(n,p),ke(p)},onDragEnter(p){var c;a.ifPreventDefault(p)&&p.preventDefault(),(c=n.onDragEnter)===null||c===void 0||c.call(n,p),ke(p)},onDragOver(p){var c;a.ifPreventDefault(p)&&p.preventDefault(),(c=n.onDragOver)===null||c===void 0||c.call(n,p),ke(p)},onDrop(p){var c;a.ifPreventDefault(p)&&p.preventDefault(),(c=n.onDrop)===null||c===void 0||c.call(n,p)},onEnter(p){var c;(c=n.onEnter)===null||c===void 0||c.call(n,p)},onLeave(p){var c;(c=n.onLeave)===null||c===void 0||c.call(n,p)}});return G(e,"dragstart",i),G(e,"drag",s),G(e,"dragend",o),Object.assign(n,{root:e,destroy:()=>{We.off(e,"start",l,{touchArgs:[{passive:!0}]}),Q(e,"dragstart",i),Q(e,"drag",s),Q(e,"dragend",o),d(),Xe.delete(e)}}),Xe.set(e,a),a}const ln={ingoreHTMLTags:["INPUT","TEXTAREA","SELECT","OPTGROUP","OPTION"],ifPreventDefault(e){return re.dragElement?!0:j.preventDefault},beforeDragStart(e){},onDragStart(e){},onDrag(e){},onDragEnter(e){},onDragLeave(e){},onDragOver(e){},onDragEnd(e){},onDrop(e){}};let Ve=null;const sn=e=>{Ve=e,setTimeout(()=>{Ve=null},20)};function on(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e;let a=!1;const l=h=>{var v;a=!0,(v=t.onEnter)===null||v===void 0||v.call(t,h),u.resume()},r=h=>{var v;sn(h.target),(v=t.onDragEnter)===null||v===void 0||v.call(t,h),a||l(h)},i=h=>{var v;a||l(h),(v=t.onDragOver)===null||v===void 0||v.call(t,h)},s=h=>{var v;(v=t.onDragLeave)===null||v===void 0||v.call(t,h);const k=function(){var I;let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h;a=!1,(I=t.onLeave)===null||I===void 0||I.call(t,L),u.stop()},S=Ve;Ve=null,S&&jt(S,n)||k()},o=h=>{var v;(v=t.onDrop)===null||v===void 0||v.call(t,h)},d=h=>{var v;h instanceof KeyboardEvent&&h.key!=="Escape"||(a=!1,u.stop(),(v=t.onEndBeforeLeave)===null||v===void 0||v.call(t,h))},u=Wt([[e,"drop",d],[window,"mouseup",d],[window,"touchend",d],[window,"keydown",d]]);u.stop();const p=()=>{G(e,"dragenter",r),G(e,"dragover",i),G(e,"dragleave",s),G(e,"drop",o)},c=()=>{Q(e,"dragenter",r),Q(e,"dragover",i),Q(e,"dragleave",s),Q(e,"drop",o),u.stop()};return p(),c}/*!
 * @he-tree/vue v2.9.3
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://hetree.phphe.com/
 * Released under the MIT License.
 */let Ae=!1;const dn=()=>{Ae=!0,setTimeout(()=>{Ae=!1},100)},un=xe({props:["stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor"],emits:["open","close","check"],setup(e,{emit:t}){const n=W(()=>({[e.rtl?"paddingRight":"paddingLeft"]:e.indent*(e.stat.level-1)+"px"}));Ze(()=>e.stat.checked,r=>{Ae||e.processor.afterOneCheckChanged(e.stat)&&t("check",e.stat)}),Ze(()=>e.stat.open,r=>{Ae||(t(r?"open":"close",e.stat),dn())});const a=W(()=>{const r=[],i=u=>{var p;if(u.parent){let c=(p=u.parent)==null?void 0:p.children.indexOf(u);do{c++;let h=u.parent.children[c];if(h){if(!h.hidden)return!0}else break}while(!0)}return!1},s=e.rtl?"right":"left",o=e.btt?"top":"bottom";let d=e.stat;for(;d;){let u=(d.level-2)*e.indent+e.treeLineOffset;const p=i(d),c=()=>{r.push({style:{[s]:u+"px",[o]:p?0:"50%"}})};d===e.stat?d.level>1&&c():p&&c(),d=d.parent}return r}),l=W(()=>{let r=(e.stat.level-2)*e.indent+e.treeLineOffset;return{[e.rtl?"right":"left"]:r+"px"}});return{indentStyle:n,vLines:a,hLineStyle:l}}}),mt=(e,t)=>{const n=e.__vccOpts||e;for(const[a,l]of t)n[a]=l;return n},cn={class:"tree-node-inner"},fn={key:1,class:"tree-node",ref:"el"};function pn(e,t,n,a,l,r){return e.table?(w(),N("tr",fn,[F(e.$slots,"default",{indentStyle:e.indentStyle})],512)):(w(),N("div",{key:0,class:ve(["tree-node",{"tree-node--with-tree-line":e.treeLine}]),style:ce(e.indentStyle),ref:"el"},[e.treeLine?(w(),N(pe,{key:0},[(w(!0),N(pe,null,Te(e.vLines,i=>(w(),N("div",{class:"tree-line tree-vline",style:ce(i.style)},null,4))),256)),e.stat.level>1?(w(),N("div",{key:0,class:"tree-line tree-hline",style:ce(e.hLineStyle)},null,4)):H("",!0)],64)):H("",!0),J("div",cn,[F(e.$slots,"default",{indentStyle:e.indentStyle})])],6))}const gn=mt(un,[["render",pn]]);function hn(e,t={}){const n={...t,statHandler(a){return this._statHandler2&&(a=this._statHandler2(a)),Ye(t.statHandler,Ce(a))},statsHandler(a){return Ye(t.statsHandler,Ce(a))},statsFlatHandler(a){return Ye(t.statsFlatHandler,Ce(a))}};return nn(e,n)}function Ye(e,t){return e?e(t):t}const mn=xe({components:{VirtualList:tn,TreeNode:gn},props:{value:{required:Nt,type:Array},modelValue:{required:Tt,type:Array},updateBehavior:{type:String,default:"modify"},processor:{type:Object,default:()=>hn([],{noInitialization:!0})},childrenKey:{type:String,default:"children"},textKey:{type:String,default:"text"},indent:{type:Number,default:20},virtualization:{type:Boolean,default:!1},virtualizationPrerenderCount:{type:Number,default:20},defaultOpen:{type:Boolean,default:!0},statHandler:{type:Function},rtl:{type:Boolean,default:!1},btt:{type:Boolean,default:!1},table:{type:Boolean,default:!1},watermark:{type:Boolean,default:!1},nodeKey:{type:[String,Function],default:"index"},treeLine:{type:Boolean,default:!1},treeLineOffset:{type:Number,default:8}},emits:["update:modelValue","click:node","open:node","close:node","check:node","beforeDragStart","before-drag-start","after-drop","change","enter","leave"],data(){return{stats:[],statsFlat:[],dragNode:null,dragOvering:!1,placeholderData:{},placeholderColspan:1,batchUpdateWaiting:!1,self:this,_ignoreValueChangeOnce:!1}},computed:{valueComputed(){return this.modelValue||[]},visibleStats(){const{statsFlat:e,isVisible:t}=this;let n=e;return this.btt&&(n=n.slice(),n.reverse()),n.filter(a=>t(a))},rootChildren(){return this.stats}},methods:{_emitValue(e){this.$emit("update:modelValue",e)},_updateValue(e){return this.updateBehavior==="disabled"?!1:(e!==this.valueComputed&&(this._ignoreValueChangeOnce=!0),this._emitValue(e),!0)},getStat:qe(R("getStat")),has:qe(R("has")),updateCheck:R("updateCheck"),getChecked:R("getChecked"),getUnchecked:R("getUnchecked"),openAll:R("openAll"),closeAll:R("closeAll"),openNodeAndParents:R("openNodeAndParents"),isVisible:R("isVisible"),move:ot("move"),add:qe(ot("add")),addMulti(e,t,n){this.batchUpdate(()=>{let a=n;for(const l of e)this.add(l,t,a),a!=null&&a++})},remove:R("remove"),removeMulti(e){let t=[...e];this.batchUpdate(()=>{for(const n of t)this.remove(n)})},iterateParent:R("iterateParent"),getSiblings:R("getSiblings"),getData:R("getData"),getRootEl(){return this.$refs.vtlist.listElRef},batchUpdate(e){const t=this.ignoreUpdate(e);return this.batchUpdateWaiting||this._updateValue(this.updateBehavior==="new"?this.getData():this.valueComputed),t},ignoreUpdate(e){const t=this.batchUpdateWaiting;this.batchUpdateWaiting=!0;const n=e();return this.batchUpdateWaiting=t,n}},watch:{processor:{immediate:!0,handler(e){if(e){const t=n=>{if(n){const{childrenKey:a}=this;return n[a]||(n[a]=[]),n[a]}else return this.valueComputed};e._statHandler2=this.statHandler?n=>n.data===this.placeholderData?n:this.statHandler(n):null,e.afterSetStat=(n,a,l)=>{const{childrenKey:r,updateBehavior:i}=this;let s=this.valueComputed;if(i==="new"){if(this.batchUpdateWaiting)return;s=this.getData()}else if(i==="modify"){const o=t(a==null?void 0:a.data);o.includes(n.data)||o.splice(l,0,n.data)}this.batchUpdateWaiting||this._updateValue(s)},e.afterRemoveStat=n=>{var a;const{childrenKey:l,updateBehavior:r}=this;let i=this.valueComputed;if(r==="new"){if(this.batchUpdateWaiting)return;i=this.getData()}else if(r==="modify"){const s=t((a=n.parent)==null?void 0:a.data);ct(s,n.data)}this.batchUpdateWaiting||this._updateValue(i)}}e.initialized||(e.data=this.valueComputed,Object.assign(e,Vt(this,["childrenKey","defaultOpen"])),e.init(),e.updateCheck()),this.stats=e.stats,this.statsFlat=e.statsFlat,e.data!==this.valueComputed&&this._updateValue(e.data)}},valueComputed:{handler(e){if(this.dragOvering||this.dragNode||this._ignoreValueChangeOnce)this._ignoreValueChangeOnce=!1;else{const{processor:t}=this;t.data=e,t.init(),this.stats=t.stats,this.statsFlat=t.statsFlat}}}},created(){},mounted(){typeof window<"u"&&(this.watermark===!1&&(window._heTreeWatermarkDisabled=!0),this.watermark&&!window._heTreeWatermarkDisabled&&(window._heTreeWatermark||(window._heTreeWatermark=!0,console.log("%c[he-tree] Vue tree component:  https://hetree.phphe.com","color:#0075ff; font-size:14px;"))))}});function R(e){return function(...t){return this.processor[e](...t)}}function ot(e){return function(...t){return this.batchUpdate(()=>this.processor[e](...t))}}function qe(e){return function(t,...n){return t&&(t=Ce(t)),e.call(this,t,...n)}}const vn={key:0,class:"drag-placeholder he-tree-drag-placeholder"},yn=["colspan"],bn={class:"drag-placeholder he-tree-drag-placeholder"};function kn(e,t,n,a,l,r){const i=fe("TreeNode"),s=fe("VirtualList");return w(),Y(s,{class:ve(["he-tree",{"he-tree--rtl rtl":e.rtl,"he-tree--drag-overing drag-overing":e.dragOvering}]),ref:"vtlist",items:e.visibleStats,disabled:!e.virtualization,table:e.table,itemKey:e.nodeKey},{prepend:f(()=>[F(e.$slots,"prepend",{tree:e.self})]),default:f(({item:o,index:d})=>[g(i,{"vt-index":d,class:ve([o.class,{"drag-placeholder-wrapper":o.data===e.placeholderData,"dragging-node":o===e.dragNode}]),style:ce(o.style),stat:o,rtl:e.rtl,btt:e.btt,indent:e.indent,table:e.table,treeLine:e.treeLine,treeLineOffset:e.treeLineOffset,processor:e.processor,onClick:u=>e.$emit("click:node",o),onOpen:t[0]||(t[0]=u=>e.$emit("open:node",u)),onClose:t[1]||(t[1]=u=>e.$emit("close:node",u)),onCheck:t[2]||(t[2]=u=>e.$emit("check:node",u))},{default:f(({indentStyle:u})=>[o.data===e.placeholderData?(w(),N(pe,{key:0},[e.table?(w(),N("td",{key:1,style:ce(u),colspan:e.placeholderColspan},[J("div",bn,[F(e.$slots,"placeholder",{tree:e.self})])],12,yn)):(w(),N("div",vn,[F(e.$slots,"placeholder",{tree:e.self})]))],64)):F(e.$slots,"default",{key:1,node:o.data,stat:o,indentStyle:u,tree:e.self},()=>[x(ae(o.data[e.textKey]),1)])]),_:2},1032,["vt-index","class","style","stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor","onClick"])]),append:f(()=>[F(e.$slots,"append",{tree:e.self})]),_:3},8,["class","items","disabled","table","itemKey"])}const Dn=mt(mn,[["render",kn]]);let D=null,m=null,Ne,De,oe,Ie,Je,z,dt;const de={get startInfo(){return Ne},get targetInfo(){return De}},Cn=xe({extends:Dn,props:{triggerClass:{type:[String,Array]},disableDrag:Boolean,disableDrop:Boolean,eachDraggable:{type:Function},eachDroppable:{type:Function},rootDroppable:{type:[Boolean,Function],default:!0},dragOpen:{type:Boolean,default:!0},dragOpenDelay:{type:Number,default:0},beforeDragOpen:{type:Function},resolveStartMovePoint:{type:[String,Function]},keepPlaceholder:{type:Boolean},maxLevel:{type:Number},dragCopy:{type:Boolean},dragCopyDataHandler:{type:Function},onExternalDragOver:{type:Function},externalDataHandler:{type:Function},ondragstart:{type:Function}},data(){return{treeDraggableInstance:null}},computed:{},methods:{getNodeByElement(e){const t=e.getAttribute("vt-index");return t==null?null:this.visibleStats[t]},isDraggable(e){if(this.disableDrag)return!1;if(e.draggable!=null)return e.draggable;if(this.eachDraggable){const n=this.eachDraggable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDraggable(t):!0},isDroppable(e){if(this.disableDrop)return!1;if(!e)return nt(this.rootDroppable,[this,D]);if(e.droppable!=null)return e.droppable;if(this.eachDroppable){const n=this.eachDroppable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDroppable(t):!0},_eachDroppable(){var e;return nt((e=this._isDragCopy)==null?void 0:e.call(this),[this])}},mounted(){const e=(d,u)=>{let p=!0;return D&&D!==this&&(p=p&&this._isMoved),this.table&&!this._isDragCopy&&(p=p&&this._isDragCopy),p&&(d.x!==u.x||d.y!==u.y)},t=(d,u)=>{m.ignoreUpdate(()=>{if(!m.has(m.placeholderData)){if(m.table){let c=0;const h=m.getRootEl().querySelector("tr");if(h)for(const{value:v}of At(h.children))Be(v,"display")!=="none"&&(c+=v.colSpan||1);c<1&&(c=1),m.placeholderColspan=c}m.add(m.placeholderData)}const p=m.getStat(m.placeholderData);m.move(p,d,u)})},n=()=>{const d=this;if(d.has(d.placeholderData))return d.remove(d.getStat(d.placeholderData)),!0},a=d=>{d?re.dropEffect=D!=null&&D.dragCopy?"copy":"move":re.dropEffect="none"},l=d=>{const u=this;d?a(!0):u.keepPlaceholder?u.has(u.placeholderData)||a(!1):(n(),a(!1))};let r={x:0,y:0};const i=this.getRootEl();let s=null;const o=()=>{m!=null&&m.has(m.placeholderData)&&m.ignoreUpdate(()=>{m.remove(m.getStat(m.placeholderData)),D&&(D.dragNode.hidden=!1,D.dragOvering=!1)})};this.treeDraggableInstance=rn(i,{beforeDragStart:d=>{if(!re.triggerElement)return;let u=this.triggerClass;(!u||u.length===0)&&(u="tree-node");let p=Bt(u),c=at(re.triggerElement,h=>{if(rt(h,p))return!0;if(Le(h,"tree-node"))return"break"},{withSelf:!0,until:i});if(s=at(c,h=>{if(Le(h,"tree-node"))return!0},{withSelf:!0,until:i}),!!s){if(z=this.getNodeByElement(s),!z)throw"Can't find drag node";if(this.isDraggable(z))return this.$emit("before-drag-start",z),this.$emit("beforeDragStart",z),i}},onDragStart:d=>{var u,p,c;if(!s||!z)return;{const{x:k,y:S}=s.getBoundingClientRect(),{clientX:I,clientY:L}=d;(u=d.dataTransfer)==null||u.setDragImage(s,I-k,L-S)}Je={x:d.clientX,y:d.clientY},D=this,D.dragNode=z,Ie=(()=>{if(this.resolveStartMovePoint==="mouse")return{x:d.clientX,y:d.clientY};if(typeof this.resolveStartMovePoint=="function")return this.resolveStartMovePoint(s);{let k,S=0;if(this.table){let I=s.getBoundingClientRect();k={x:I.x,y:I.y},this.rtl&&(k.x=I.right),S=I.height}else if(!this.rtl)k=s.children[0].getBoundingClientRect().toJSON(),S=k.height;else{const I=s.children[0].getBoundingClientRect();k={x:I.right,y:I.y},S=I.height}return this.btt&&(k.y+=S),k}})(),this.dragOvering=!0;const h=D.getSiblings(D.dragNode),v=h.indexOf(z);Ne={tree:D,dragNode:z,parent:z.parent,siblings:h,indexBeforeDrop:v},m=this,(p=d.dataTransfer)==null||p.setData("text",`he-tree drag start at ${new Date().toISOString()}`),D._eachDroppable()||setTimeout(()=>{z.hidden=!0,t(z.parent,v+1)},0),(c=this.ondragstart)==null||c.call(this,d)},onEnter:d=>{this.$emit("enter",d)},onLeave:d=>{oe=null,this.dragOvering=!1,re.preventDefault=!1,n(),this.$emit("leave",d)},onDragOver:Rt(d=>{if(!D){if(!this.onExternalDragOver||this.onExternalDragOver(d)===!1)return;re.preventDefault=!0}const u={x:d.clientX,y:d.clientY},p=e(u,r);if(r=u,!p)return;this.dragOvering=!0,m=this;const c=Ie?{x:Ie.x+(u.x-Je.x),y:Ie.y+(u.y-Je.y)}:{...u},{btt:h,rtl:v}=m;if(m.disableDrop){re.dropEffect="none";return}let k,S;const I=m.getRootEl().querySelectorAll(".tree-node"),L=[];I.forEach(y=>{!rt(y,["drag-placeholder-wrapper","dragging-node"])&&Be(y,"display")!=="none"&&L.push(y)});const ee=Qe(L,y=>je(y)[h?"bottom":"top"]-c.y,{returnNearestIfNoHit:!0});let O=null,q,ge;ee.hit||(ee.greater?h||(O=ee.index-1,L[O]||O++):h&&(O=ee.index+1,L[O]||O--)),O==null&&(O=ee.index),q=L[O],ge=h?L[O-1]:L[O+1],k=q&&m.getNodeByElement(q),S=ge&&m.getNodeByElement(ge);const{indent:le}=m,U=be(()=>{if(m.table){let y=je(q).toJSON();const T=le*(k.level-1);return v?(y.width-=T,y.right-=T):y.x+=T,y}else return je(q.firstElementChild)}).action,he=be(()=>h?c.y>U().y+U().height/2:c.y<U().y+U().height/2).action,Ke=be(()=>h?!q||O===L.length-1&&he():!q||O===0&&he()).action,$e=be(()=>v?c.x-(U().x+U().width):U().x-c.x).action,C=be(()=>v?c.x<U().x+U().width-le:c.x>U().x+le).action;let b;if(Ke())b=1,k=null;else if(k)$e()>0?b=k.level-Math.ceil($e()/le):C()?b=k.level+1:b=k.level;else return;S&&b<S.level&&(b=S.level),(async()=>{let y,T,X=!1,M=null;const ie=async E=>{if(E.open)return!0;if(m.dragOpen)if(m.dragOpenDelay)if(M=E,oe===E)X=!0;else{let P=zt();oe=E;const B=E;return setTimeout(async()=>{B!==oe?(X=!0,P.resolve(!0)):(m.beforeDragOpen&&await m.beforeDragOpen(E),B!==oe?(X=!0,P.resolve(!0)):(E.open=!0,M=null,P.resolve(!0)))},m.dragOpenDelay),await P.promise}else return m.beforeDragOpen&&await m.beforeDragOpen(E),E.open=!0,!0;else return!1},Se=async()=>{if(m.isDroppable(k)&&await ie(k)){if(X)return;y=k,T=null}else return!1},_e=(E=b)=>{let P=k,B=[];for(;P&&P.level>=E;)P=P.parent||null,B.unshift(P);let te=0;for(const se of B){if(m.isDroppable(se))return y=se,T=B[te+1]||k,!0;te++}return!1};dt=k||null,k?b>k.level?await Se()===!1&&_e(k.level):_e()===!1&&await Se():m.isDroppable(null)&&(y=null),oe=M;const we=!!(!X&&(y||y===null));return{cancelled:X,success:we,parent:y,index:we?T?(y?y.children:m.stats).filter(E=>E.data!==m.placeholderData).indexOf(T)+1:0:-1}})().then(y=>{if(!y.cancelled){if(!y.success){l(!1);return}if(m.maxLevel!=null&&m.maxLevel>0){let T=1;if(D){const X=D.dragNode;let M=0;Z(X,ie=>{ie.level>M&&(M=ie.level)},{childrenKey:ue}),T=M-X.level+1}if(T+(y.parent?y.parent.level:0)>m.maxLevel){l(!1);return}}l(!0),t(y.parent,y.index)}})}),onDrop:d=>{m=this;const u=!D;if(!m)return;const p=D==null?void 0:D.dragNode;let c,h=(()=>{var v;let k=!0;if(!m.has(m.placeholderData))k=!1;else if(u)c=(v=this.externalDataHandler)==null?void 0:v.call(this,d),k=c!=null;else if(!D.dragCopy){const S=m.getStat(m.placeholderData);D===m&&S.parent===p.parent&&Mt(p,I=>I===S)}return k})();if(h){const v=m.getStat(m.placeholderData),k=m.getSiblings(v);De={tree:m,dragNode:p,parent:v.parent,siblings:k,indexBeforeDrop:k.indexOf(v)}}(()=>{if(o(),h){let v=De.indexBeforeDrop;D&&!D.dragCopy&&D===m&&Ne.parent==De.parent&&Ne.indexBeforeDrop<v&&v--,D&&D!==m&&!D._eachDroppable()&&D.batchUpdate(()=>{D.remove(p),D.updateCheck()}),m.batchUpdate(()=>{let k=D==null?void 0:D.dragNode,S;c?S=c:D._eachDroppable()&&(S=gt(D.dragNode.data,{childrenKey:D.childrenKey}),D.dragCopyDataHandler&&(S=D.dragCopyDataHandler(S))),S&&(m.add(S),k=m.getStat(S)),m.move(k,De.parent,v),m.updateCheck()})}m.$emit("after-drop"),h&&(D&&(D.dragCopy||D.$emit("change")),m!==D&&m.$emit("change"))})()},onDragEnd:d=>{o(),D&&(D.dragNode&&(D.dragNode.hidden=!1),D.dragNode=null,D.dragOvering=!1,D=null),m=null,oe=null,z=null,dt=null}})},unmounted(){var e;(e=this.treeDraggableInstance)==null||e.destroy()}}),xn={setup(){const e=kt();return{app:Dt(),languages:e}},apollo:{pages:{query:V`query($parent: ID, $lang: String!, $limit: Int!, $page: Int!) {
          pages(parent_id: $parent, lang: $lang, first: $limit, page: $page) {
            data {
              id
              parent_id
              domain
              slug
              lang
              name
              title
              to
              tag
              status
              cache
              start
              end
              editor
              created_at
              updated_at
              deleted_at
              has
              latest {
                published
              }
            }
            paginatorInfo {
              currentPage
              lastPage
            }
          }
        }`,variables(){return{lang:this.languages.current,parent:null,limit:50,page:1}},update(e){return JSON.parse(JSON.stringify(e.pages.data||[]))}}},components:{Draggable:Cn,Navigation:Pt},props:["nav","item"],emits:["update:nav","update:item"],data(){return{clip:null,menu:{},pages:[],trash:!1,bgUrl:Ot}},methods:{add(){const e=this.create();this.$apollo.mutate({mutation:V`mutation ($input: PageInput!) {
            addPage(input: $input) {
              id
            }
          }`,variables:{input:e}}).then(t=>{!t.errors&&t.data&&t.data.addPage.id?(e.id=t.data.addPage.id,this.$refs.tree.add(e)):console.error("addPage(add root)",t)}).catch(t=>{console.error("addPage(add root)",t)})},change(){const e=de.targetInfo.parent,n=de.targetInfo.siblings[de.targetInfo.indexBeforeDrop+1]||null;this.$apollo.mutate({mutation:V`mutation ($id: ID!, $parent: ID, $ref: ID) {
            movePage(id: $id, parent: $parent, ref: $ref) {
              id
            }
          }`,variables:{id:de.startInfo.dragNode.data.id,parent:e?e.data.id:null,ref:n?n.data.id:null}}).then(a=>{if(!a.errors&&a.data&&a.data.movePage.id){const l=de.startInfo.parent;l!=null&&l.children.length||(l.data.has=!1),e&&(e.data.has=!0)}else console.error(`movePage(id: ${de.startInfo.dragNode.data.id})`,a)}).catch(a=>{console.error(`movePage(id: ${de.startInfo.dragNode.data.id})`,a)})},copy(e,t){this.clip={type:"copy",node:t,stat:e}},create(e={}){return Object.assign({slug:"_"+Math.floor(Math.random()*1e4),lang:this.languages.current,config:"{}",status:0,cache:5},e)},cut(e,t){this.clip={type:"cut",node:t,stat:e}},drop(e){(e?[e]:this.$refs.tree.statsFlat.filter(n=>n.check&&n.data.id)).forEach(n=>{this.$apollo.mutate({mutation:V`mutation ($id: ID!) {
              dropPage(id: $id) {
                id
              }
            }`,variables:{id:n.data.id}}).then(a=>{var l;!a.errors&&a.data&&a.data.dropPage.id?(this.update(n,r=>{r.data.deleted_at=new Date().toISOString().replace(/T/," ").substring(0,19),r.hidden=!this.trash,r.check=!1}),n.parent&&!((l=n.parent.children)!=null&&l.length)&&(n.parent.data.has=!1)):console.error(`dropPage(id: ${n.data.id})`,a)}).catch(a=>{console.error(`dropPage(id: ${n.data.id})`,a)})})},init(e){return e.data.deleted_at&&!this.trash&&(e.hidden=!0),e},insert(e,t=null){const n=this.$refs.tree.getSiblings(e),a=t!==null?e.parent:e,l=this.create({domain:a==null?void 0:a.data.domain}),r=n.indexOf(e);let i=null;switch(t===null&&!e.open&&this.load(e,e.data),t){case 0:i=e.data.id;break;case null:i=e.children&&e.children[0]?e.children[0].data.id:null;break;case 1:i=n[r+1]?n[r+1].data.id:null;break}this.$apollo.mutate({mutation:V`mutation ($input: PageInput!, $parent: ID, $ref: ID) {
            addPage(input: $input, parent: $parent, ref: $ref) {
              id
            }
          }`,variables:{input:l,parent:a?a.data.id:null,ref:i}}).then(s=>{!s.errors&&s.data&&s.data.addPage.id?(l.id=s.data.addPage.id,(t!==null||e.open)&&this.$refs.tree.add(l,a,t!==null?r+t:0),a.data.has=!0):console.error("addPage(insert node)",s)}).catch(s=>{console.error("addPage(insert node)",s)})},keep(e){const t=e?[e]:this.$refs.tree.statsFlat.filter(a=>a.check&&a.data.id&&a.data.deleted_at);t.filter(a=>t.indexOf(a.parent)===-1).forEach(a=>{this.$apollo.mutate({mutation:V`mutation ($id: ID!) {
              keepPage(id: $id) {
                id
              }
            }`,variables:{id:a.data.id}}).then(l=>{if(l.errors)console.error(`keepPage(id: ${a.data.id})`,l);else{const r=a.data.deleted_at;this.update(a,i=>{r>=i.data.deleted_at&&(i.data.deleted_at=null,i.hidden=!this.trash,i.check=!1)})}}).catch(l=>{console.error(`keepPage(id: ${a.data.id})`,l)})})},load(e,t){!e.open&&!t.children&&(e.loading=!0,this.$apollo.query({query:V`query($parent: ID, $limit: Int!, $page: Int!) {
              pages(parent_id: $parent, first: $limit, page: $page) {
                data {
                  id
                  parent_id
                  domain
                  slug
                  lang
                  name
                  title
                  to
                  tag
                  status
                  cache
                  start
                  end
                  editor
                  created_at
                  updated_at
                  deleted_at
                  has
                  latest {
                    published
                  }
                }
                paginatorInfo {
                  currentPage
                  lastPage
                }
              }
            }`,variables:{parent:t.id,page:e.page?e.page+1:1,limit:50}}).then(n=>{if(!n.errors&&n.data){const a=JSON.parse(JSON.stringify(n.data.pages.data||[]));this.$refs.tree.addMulti(a,e,0),e.page=n.data.pages.paginatorInfo.currentPage||1}else console.error(`pages(id: ${t.id})`,n)}).catch(n=>{console.error(`pages(id: ${t.id})`,n)}).finally(()=>{e.loading=!1})),e.open=!e.open},move(e,t=null){const n=this.$refs.tree.getSiblings(e),a=t!==null?e.parent:e,l=n.indexOf(e);let r=null;switch(t){case 0:r=e.data.id;break;case null:r=e.children&&e.children[0]?e.children[0].data.id:null;break;case 1:r=n[l+1]?n[l+1].data.id:null;break}this.$apollo.mutate({mutation:V`mutation ($id: ID!, $parent: ID, $ref: ID) {
            movePage(id: $id, parent: $parent, ref: $ref) {
              id
            }
          }`,variables:{id:this.clip.node.id,parent:a?a.data.id:null,ref:r}}).then(i=>{var s;if(!i.errors&&i.data&&i.data.movePage.id){const o=t!==null?l<this.$refs.tree.getSiblings(e).indexOf(this.clip.stat)?l+t:l:0;this.$refs.tree.move(this.clip.stat,a,o),(s=this.clip.stat.children)!=null&&s.length||(e.parent.data.has=!1),a.data.has=!0}else console.error(`movePage(id: ${this.clip.node.id})`,i)}).catch(i=>{console.error(`movePage(id: ${this.clip.node.id})`,i)}),this.show()},paste(e,t=null){const n=this.$refs.tree.getSiblings(e),a=t!==null?e.parent:e,l=n.indexOf(e),r={...this.clip.node};let i=null;switch(r.slug=r.slug+"_"+Math.floor(Math.random()*1e4),r.children=null,r.status=0,r.has=!1,r.id=null,t){case 0:i=e.data.id;break;case null:i=e.children&&e.children[0]?e.children[0].data.id:null;break;case 1:i=n[l+1]?n[l+1].data.id:null;break}this.$apollo.mutate({mutation:V`mutation ($id: ID!, $parent: ID, $ref: ID) {
            addPage(id: $id, parent: $parent, ref: $ref) {
              id
            }
          }`,variables:{id:this.clip.node.id,parent:a?a.data.id:null,ref:i}}).then(s=>{if(!s.errors&&s.data&&s.data.addPage.id){const o=t!==null?this.$refs.tree.getSiblings(e).indexOf(e)+t:0;this.$refs.tree.add(r,a,o),a.data.has=!0}else console.error(`addPage(id: ${this.clip.node.id})`,s)}).catch(s=>{console.error(`addPage(id: ${this.clip.node.id})`,s)}),this.show()},publish(){this.$refs.tree.statsFlat.filter(t=>t.check&&t.data.id&&t.data.latest&&!t.data.latest.published).reverse().forEach(t=>{this.$apollo.mutate({mutation:V`mutation ($id: ID!) {
              pubPage(id: $id) {
                id
              }
            }`,variables:{id:t.data.id}}).then(n=>{n.errors?console.error(`pubPage(id: ${t.data.id})`,n):(t.data.latest.published=!0,t.check=!1)}).catch(n=>{console.error(`pubPage(id: ${t.data.id})`,n)})})},purge(e){(e?[e]:this.$refs.tree.statsFlat.filter(n=>n.check&&n.data.id)).reverse().forEach(n=>{this.$apollo.mutate({mutation:V`mutation ($id: ID!) {
              purgePage(id: $id) {
                id
              }
            }`,variables:{id:n.data.id}}).then(a=>{var l;a.errors?console.error(`purgePage(id: ${n.data.id})`,a):(this.$refs.tree.remove(n),n.parent&&!((l=n.parent.children)!=null&&l.length)&&(n.parent.data.has=!1))}).catch(a=>{console.error(`purgePage(id: ${n.data.id})`,a)})})},reload(e){this.loading=!0,this.languages.current=e,this.$apollo.query({query:V`query($parent: ID, $lang: String!, $limit: Int!, $page: Int!) {
            pages(parent_id: $parent, lang: $lang, first: $limit, page: $page) {
              data {
                id
                parent_id
                domain
                slug
                lang
                name
                title
                to
                tag
                status
                cache
                start
                end
                editor
                created_at
                updated_at
                deleted_at
                has
                latest {
                  published
                }
              }
              paginatorInfo {
                currentPage
                lastPage
              }
            }
          }`,variables:{parent:null,lang:e,page:1,limit:50}}).then(t=>{!t.errors&&t.data?this.pages=(t.data.pages.data||[]).map(n=>({...n})):console.error("pages(parent: null)",t)}).catch(t=>{console.error("pages(parent: null)",t)}).finally(()=>{this.loading=!1})},show(e=null){e===null?this.menu={}:this.menu[e]?this.menu[e]=!1:(this.menu={},this.menu[e]=!0)},status(e,t){(e?[e]:this.$refs.tree.statsFlat.filter(a=>a.check&&a.data.id)).forEach(a=>{this.$apollo.mutate({mutation:V`mutation ($id: ID!, $input: PageInput!) {
              savePage(id: $id, input: $input) {
                id
              }
            }`,variables:{id:a.data.id,input:{status:t}}}).then(l=>{l.errors?console.error(`savePage(id: ${a.data.id})`,l):a.data.status=t}).catch(l=>{console.error(`savePage(id: ${a.data.id})`,l)})})},trashed(e){this.trash=e,this.$refs.tree.statsFlat.forEach(t=>{t.hidden=t.data.deleted_at&&!e})},update(e,t){var n;if(typeof t!="function")throw new Error("Second paramter must be a function");t(e),(n=e.children)==null||n.forEach(a=>{t(a,t)})},url(e){return this.app.urlpage.replace(/:domain/,e.domain).replace(/:slug/,e.slug).replace(/xx_XX/,e.lang).replace(/\/+$/g,"")}}},$n={class:"header"},Sn=["onClick"],_n={class:"node-text"},wn={class:"page-name"},En={key:0,class:"page-title"},Pn={class:"node-url"},On={class:"page-domain"},In={class:"page-slug"},Nn={key:0,class:"page-to"},Tn={key:0,class:"loading"};function Fn(e,t,n,a,l,r){const i=fe("Navigation"),s=fe("Draggable");return w(),N(pe,null,[g(Ct,{elevation:2,density:"compact",image:l.bgUrl},{prepend:f(()=>[g($,{onClick:t[0]||(t[0]=Pe(o=>e.$emit("update:nav",!n.nav),["stop"]))},{default:f(()=>[g(Ue,{size:"x-large"},{default:f(()=>[x(ae(`mdi-${n.nav?"close":"menu"}`),1)]),_:1})]),_:1})]),default:f(()=>[g($t,null,{default:f(()=>t[18]||(t[18]=[x("Pages")])),_:1})]),_:1},8,["image"]),g(i,{state:n.nav,"onUpdate:state":t[1]||(t[1]=o=>e.$emit("update:nav",o))},null,8,["state"]),g(xt,null,{default:f(()=>[g(St,null,{default:f(()=>[g(_t,null,{default:f(()=>[J("div",$n,[g(Me,null,{activator:f(({props:o})=>[g($,ze({"append-icon":"mdi-menu-down",variant:"outlined"},o),{default:f(()=>t[19]||(t[19]=[x("Actions")])),_:2},1040)]),default:f(()=>[g(Re,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-publish",variant:"text",onClick:t[2]||(t[2]=o=>r.publish())},{default:f(()=>t[20]||(t[20]=[x("Publish")])),_:1})]),_:1}),g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-eye-off",variant:"text",onClick:t[3]||(t[3]=o=>r.status(null,0))},{default:f(()=>t[21]||(t[21]=[x("Disable")])),_:1})]),_:1}),g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-eye",variant:"text",onClick:t[4]||(t[4]=o=>r.status(null,1))},{default:f(()=>t[22]||(t[22]=[x("Enable")])),_:1})]),_:1}),g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-eye-off-outline",variant:"text",onClick:t[5]||(t[5]=o=>r.status(null,2))},{default:f(()=>t[23]||(t[23]=[x("Hide in menu")])),_:1})]),_:1}),A(g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-delete-circle-outline",variant:"text",onClick:t[6]||(t[6]=o=>r.trashed(!0))},{default:f(()=>t[24]||(t[24]=[x("Show trashed")])),_:1})]),_:1},512),[[K,!l.trash]]),A(g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-delete-off",variant:"text",onClick:t[7]||(t[7]=o=>r.trashed(!1))},{default:f(()=>t[25]||(t[25]=[x("Hide trashed")])),_:1})]),_:1},512),[[K,l.trash]]),g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-delete",variant:"text",onClick:t[8]||(t[8]=o=>r.drop())},{default:f(()=>t[26]||(t[26]=[x("Trash")])),_:1})]),_:1}),g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-delete-restore",variant:"text",onClick:t[9]||(t[9]=o=>r.keep())},{default:f(()=>t[27]||(t[27]=[x("Restore")])),_:1})]),_:1}),g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-delete-forever",variant:"text",onClick:t[10]||(t[10]=o=>r.purge())},{default:f(()=>t[28]||(t[28]=[x("Delete")])),_:1})]),_:1})]),_:1})]),_:1}),Object.keys(a.languages.available).length?(w(),Y(Me,{key:0},{activator:f(({props:o})=>[g($,ze({"append-icon":"mdi-menu-down",variant:"outlined",location:"bottom right"},o),{default:f(()=>[x(ae(a.languages.available[a.languages.current]||"None"),1)]),_:2},1040)]),default:f(()=>[g(Re,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{variant:"text",onClick:t[11]||(t[11]=o=>r.reload(""))},{default:f(()=>t[29]||(t[29]=[x("None")])),_:1})]),_:1}),(w(!0),N(pe,null,Te(a.languages.available,(o,d)=>(w(),Y(_,{key:d},{default:f(()=>[g($,{variant:"text",onClick:u=>r.reload(d)},{default:f(()=>[x(ae(o),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})):H("",!0)]),g(s,{modelValue:l.pages,"onUpdate:modelValue":t[15]||(t[15]=o=>l.pages=o),ref:"tree",defaultOpen:!1,watermark:!1,statHandler:r.init,virtualization:"",onChange:t[16]||(t[16]=o=>r.change())},{default:f(({node:o,stat:d})=>[g(Ue,{class:ve({hidden:!o.has,load:d.loading}),size:"large",onClick:u=>r.load(d,o),icon:d.loading?"mdi-loading":d.open?"mdi-menu-down":"mdi-menu-right"},null,8,["class","onClick","icon"]),g(wt,{modelValue:d.check,"onUpdate:modelValue":u=>d.check=u,class:ve({draft:o.latest&&!o.latest.published})},null,8,["modelValue","onUpdate:modelValue","class"]),o.id?(w(),Y(Me,{key:0},{activator:f(({props:u})=>[g($,ze({icon:"mdi-dots-vertical",variant:"text"},u),null,16)]),default:f(()=>[g(Re,null,{default:f(()=>[o.status!==0?(w(),Y(_,{key:0},{default:f(()=>[g($,{"prepend-icon":"mdi-eye-off",variant:"text",onClick:u=>r.status(d,0)},{default:f(()=>t[30]||(t[30]=[x("Disable")])),_:2},1032,["onClick"])]),_:2},1024)):H("",!0),o.status!==1?(w(),Y(_,{key:1},{default:f(()=>[g($,{"prepend-icon":"mdi-eye",variant:"text",onClick:u=>r.status(d,1)},{default:f(()=>t[31]||(t[31]=[x("Enable")])),_:2},1032,["onClick"])]),_:2},1024)):H("",!0),o.status!==2?(w(),Y(_,{key:2},{default:f(()=>[g($,{"prepend-icon":"mdi-eye-off-outline",variant:"text",onClick:u=>r.status(d,2)},{default:f(()=>t[32]||(t[32]=[x("Hide in menu")])),_:2},1032,["onClick"])]),_:2},1024)):H("",!0),g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-copy",variant:"text",onClick:u=>r.copy(d,o)},{default:f(()=>t[33]||(t[33]=[x("Copy")])),_:2},1032,["onClick"])]),_:2},1024),g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-cut",variant:"text",onClick:u=>r.cut(d,o)},{default:f(()=>t[34]||(t[34]=[x("Cut")])),_:2},1032,["onClick"])]),_:2},1024),g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:t[12]||(t[12]=Pe(u=>r.show("insert"),["stop"]))},{default:f(()=>t[35]||(t[35]=[x("Insert")])),_:1})]),_:1}),A(g(ne,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:u=>r.insert(d,0)},{default:f(()=>t[36]||(t[36]=[x(" Before")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1536),[[K,l.menu.insert]]),A(g(ne,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:u=>r.insert(d)},{default:f(()=>t[37]||(t[37]=[x(" Into")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1536),[[K,l.menu.insert]]),A(g(ne,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:u=>r.insert(d,1)},{default:f(()=>t[38]||(t[38]=[x(" After")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1536),[[K,l.menu.insert]]),A(g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:t[13]||(t[13]=Pe(u=>r.show("paste"),["stop"]))},{default:f(()=>t[39]||(t[39]=[x("Paste")])),_:1})]),_:1},512),[[K,l.clip&&l.clip.type=="copy"]]),A(g(ne,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:u=>r.paste(d,0)},{default:f(()=>t[40]||(t[40]=[x(" Before")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1536),[[K,l.clip&&l.clip.type=="copy"&&l.menu.paste]]),A(g(ne,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:u=>r.paste(d)},{default:f(()=>t[41]||(t[41]=[x(" Into")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1536),[[K,l.clip&&l.clip.type=="copy"&&l.menu.paste]]),A(g(ne,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:u=>r.paste(d,1)},{default:f(()=>t[42]||(t[42]=[x(" After")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1536),[[K,l.clip&&l.clip.type=="copy"&&l.menu.paste]]),A(g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:t[14]||(t[14]=Pe(u=>r.show("move"),["stop"]))},{default:f(()=>t[43]||(t[43]=[x("Paste")])),_:1})]),_:1},512),[[K,l.clip&&l.clip.type=="cut"]]),A(g(ne,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:u=>r.move(d,0)},{default:f(()=>t[44]||(t[44]=[x(" Before")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1536),[[K,l.clip&&l.clip.type=="cut"&&l.menu.move]]),A(g(ne,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:u=>r.move(d)},{default:f(()=>t[45]||(t[45]=[x(" Into")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1536),[[K,l.clip&&l.clip.type=="cut"&&l.menu.move]]),A(g(ne,null,{default:f(()=>[g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:u=>r.move(d,1)},{default:f(()=>t[46]||(t[46]=[x(" After")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1536),[[K,l.clip&&l.clip.type=="cut"&&l.menu.move]]),o.deleted_at?H("",!0):(w(),Y(_,{key:3},{default:f(()=>[g($,{"prepend-icon":"mdi-delete",variant:"text",onClick:u=>r.drop(d)},{default:f(()=>t[47]||(t[47]=[x("Trash")])),_:2},1032,["onClick"])]),_:2},1024)),o.deleted_at?(w(),Y(_,{key:4},{default:f(()=>[g($,{"prepend-icon":"mdi-delete-restore",variant:"text",onClick:u=>r.keep(d)},{default:f(()=>t[48]||(t[48]=[x("Restore")])),_:2},1032,["onClick"])]),_:2},1024)):H("",!0),g(_,null,{default:f(()=>[g($,{"prepend-icon":"mdi-delete-forever",variant:"text",onClick:u=>r.purge(d)},{default:f(()=>t[49]||(t[49]=[x("Delete")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):H("",!0),J("div",{class:ve(["node-content",{"status-hidden":o.status==2,"status-enabled":o.status==1,"status-disabled":!o.status,trashed:o.deleted_at}]),onClick:u=>e.$emit("update:item",o)},[J("div",_n,[J("div",wn,[o.start||o.end?(w(),Y(Ue,{key:0,class:"page-time",size:"x-small"},{default:f(()=>t[50]||(t[50]=[x("mdi-clock-outline")])),_:1})):H("",!0),x(" "+ae(o.name||"New"),1)]),o.title?(w(),N("div",En,ae(o.title),1)):H("",!0)]),J("div",Pn,[J("div",On,ae(o.domain),1),J("span",In,ae(r.url(o)),1),o.to?(w(),N("span",Nn,"  "+ae(o.to),1)):H("",!0)])],10,Sn),g($,{icon:"mdi-arrow-right",variant:"text",onClick:u=>e.$emit("update:item",o)},null,8,["onClick"])]),_:1},8,["modelValue","statHandler"]),e.$apollo.loading?(w(),N("p",Tn,"Loading ...")):H("",!0),!e.$apollo.loading&&!l.pages.length?(w(),Y($,{key:1,color:"primary",icon:"mdi-folder-plus",onClick:t[17]||(t[17]=o=>r.add())})):H("",!0)]),_:1})]),_:1})]),_:1})],64)}const Ln=ut(xn,[["render",Fn]]),Bn={components:{PageTree:Ln,PageDetails:It},data:()=>({details:!1,nav:null,item:{}}),methods:{save(e){const t={};["lang","slug","domain","name","title","to","tag","data","config","status","cache","start","end"].forEach(a=>{typeof e[a]<"u"&&(t[a]=e[a])});for(const a of["start","end"])t[a]=t[a]?t[a].replace(/T/," ")+":00":null;this.$apollo.mutate({mutation:V`mutation ($id: ID!, $input: PageInput!) {
            savePage(id: $id, input: $input) {
              id
              parent_id
              domain
              slug
              lang
              name
              title
              to
              tag
              status
              cache
              start
              end
              editor
              created_at
              updated_at
              deleted_at
              has
            }
          }`,variables:{id:e.id,input:t}}).then(a=>{a.errors?console.error(`savePage(id: ${e.id})`,a):this.item=Object.assign(this.item,a.data.savePage)}).catch(a=>{console.error(`savePage(id: ${e.id})`,a)}),this.details=!1}}};function Vn(e,t,n,a,l,r){const i=fe("PageTree"),s=fe("PageDetails");return w(),Y(Et,{name:"slide"},{default:f(()=>[g(et,{class:"page-tree",key:"tree"},{default:f(()=>[g(i,{nav:e.nav,"onUpdate:nav":t[0]||(t[0]=o=>e.nav=o),item:e.item,"onUpdate:item":[t[1]||(t[1]=o=>e.item=o),t[2]||(t[2]=o=>e.details=!0)]},null,8,["nav","item"])]),_:1}),A(g(et,{class:"page-details",key:"details"},{default:f(()=>[g(s,{item:e.item,"onUpdate:item":t[3]||(t[3]=o=>r.save(o))},null,8,["item"])]),_:1},512),[[K,e.details]])]),_:1})}const Mn=ut(Bn,[["render",Vn]]);export{Mn as default};
