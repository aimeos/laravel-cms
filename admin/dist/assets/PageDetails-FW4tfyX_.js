import{_ as H,d as c,h as a,Z as De,z as w,o as v,b as l,S,T as P,p,$ as re,a0 as Te,a1 as Q,c as C,F as b,A as T,k as K,a2 as G,a3 as W,t as $,a4 as X,v as Ee,P as N,a5 as O,a6 as L,a as U,a7 as Re,L as Ze,u as _e,a8 as oe,e as D,x as y,i as ue,j as de,a9 as Fe,K as ee,aa as we,ab as ke,n as te,ac as Se,s as $e,l as me,ad as ne,ae as le,Q as Ie,af as Me,ag as z,ah as Ne,ai as A,U as Oe,w as he,R as ze,m as Ae,aj as Qe,C as Ge,M as We,N as Xe,O as Ye}from"../index.js";import{g as je}from"./index-yGj2BKpa.js";const xe={props:["state"],emits:["update:state"],data:()=>({width:window.innerWidth})};function Ke(t,e,n,o,d,i){const s=w("router-link");return v(),c(De,{width:"220",modelValue:n.state,"onUpdate:modelValue":e[0]||(e[0]=r=>t.$emit("update:state",r)),rail:!(t.width>1200),"expand-on-hover":""},{default:a(()=>[l(S,null,{default:a(()=>[l(P,{"prepend-icon":"mdi-file-tree",value:"pages"},{default:a(()=>[l(s,{to:"/pages"},{default:a(()=>e[1]||(e[1]=[p("Pages")])),_:1})]),_:1})]),_:1}),l(re),l(S,null,{default:a(()=>[l(P,{"prepend-icon":"mdi-folder-multiple-image",value:"files"},{default:a(()=>[l(s,{to:"/files"},{default:a(()=>e[2]||(e[2]=[p("Files")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","rail"])}const xt=H(xe,[["render",Ke],["__scopeId","data-v-ab757f2b"]]),et={setup(){return{aside:Te()}},props:["state"],emits:["update:state"],data:()=>({active:{},panel:[0,1,2,3,4,5,6,7,8,9],width:window.innerWidth}),methods:{isActive(t,e){return typeof this.active[t]>"u"&&(this.active[t]={}),typeof this.active[t][e]>"u"&&(this.active[t][e]=!0),this.active[t][e]},toggle(t,e){this.aside.toggle(t,e),this.active[t][e]=!this.active[t][e]}}};function tt(t,e,n,o,d,i){return v(),c(De,{location:"end",width:"220",modelValue:n.state,"onUpdate:modelValue":e[1]||(e[1]=s=>t.$emit("update:state",s)),rail:!(t.width>1200),"expand-on-hover":""},{default:a(()=>[l(Q,{variant:"accordion",modelValue:t.panel,"onUpdate:modelValue":e[0]||(e[0]=s=>t.panel=s)},{default:a(()=>[(v(!0),C(b,null,T(o.aside.store,(s,r)=>K((v(),c(G,{key:r,elevation:"0"},{default:a(()=>[l(W,null,{default:a(()=>[p($(r),1)]),_:2},1024),l(X,null,{default:a(()=>[l(S,{density:"compact"},{default:a(()=>[(v(!0),C(b,null,T(s,(f,m)=>(v(),c(P,{key:m,active:i.isActive(r,m),onClick:u=>i.toggle(r,m)},{default:a(()=>[p($(m)+" ("+$(f)+") ",1)]),_:2},1032,["active","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Ee,o.aside.show[r]]])),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","rail"])}const nt=H(et,[["render",tt]]),lt={props:["item"],emits:["update:item"],data:()=>({panel:[0],elements:{"cms::test":{type:"cms::test",fields:{"test/key":{type:"cms::string",label:"Test string config"},"test/color":{type:"cms::color",label:"Test color selector"}}},"cms::test2":{type:"cms::test2",fields:{"test2/key":{type:"cms::string",label:"Second string value"}}}}}),methods:{name(t){const e=t.split("::").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join("");return console.log(e),e}}},at=["is","config","onUpdate:modelValue"];function it(t,e,n,o,d,i){return v(),c(N,null,{default:a(()=>[l(Q,{modelValue:t.panel,"onUpdate:modelValue":e[0]||(e[0]=s=>t.panel=s)},{default:a(()=>[(v(!0),C(b,null,T(t.elements,(s,r)=>(v(),c(G,{key:r,elevation:"1"},{default:a(()=>[l(W,null,{default:a(()=>[p($(r),1)]),_:2},1024),l(X,null,{default:a(()=>[l(N,null,{default:a(()=>[l(O,null,{default:a(()=>[(v(!0),C(b,null,T(s.fields,(f,m)=>(v(),c(L,{cols:"12",md:"6"},{default:a(()=>[K(U("input",{is:i.name(f.type),config:f,"onUpdate:modelValue":u=>n.item.config[m]=u},null,8,at),[[Re,n.item.config[m]]])]),_:2},1024))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})}const st=H(lt,[["render",it],["__scopeId","data-v-77518aee"]]),ot={setup(){const t=Ze();return{app:_e(),languages:t}},props:["item"],emits:["update:item"],data:()=>({}),computed:{langs(){const t=[{code:"",name:"None"}];return Object.entries(this.languages.available).forEach(e=>{t.push({code:e[0],name:e[1]})}),t}},watch:{item:{deep:!0,handler(){this.$emit("update:item",this.item)}}}};function ut(t,e,n,o,d,i){return v(),c(N,null,{default:a(()=>[l(O,null,{default:a(()=>[l(L,{cols:"12",md:"6"},{default:a(()=>[l(oe,{modelValue:n.item.status,"onUpdate:modelValue":e[0]||(e[0]=s=>n.item.status=s),label:"Status",items:[{key:0,val:"Disabled"},{key:1,val:"Enabled"},{key:2,val:"Hidden in navigation"}],"item-title":"val","item-value":"key",variant:"underlined",required:""},null,8,["modelValue"])]),_:1}),l(L,{cols:"12",md:"6"},{default:a(()=>[l(oe,{modelValue:n.item.lang,"onUpdate:modelValue":e[1]||(e[1]=s=>n.item.lang=s),label:"Language",items:i.langs,"item-title":"name","item-value":"code",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1}),l(O,null,{default:a(()=>[l(L,{cols:"12",md:"6"},{default:a(()=>[l(D,{modelValue:n.item.name,"onUpdate:modelValue":e[2]||(e[2]=s=>n.item.name=s),label:"Page name",variant:"underlined",counter:"30",required:""},null,8,["modelValue"]),l(D,{modelValue:n.item.title,"onUpdate:modelValue":e[3]||(e[3]=s=>n.item.title=s),label:"Page title",variant:"underlined",counter:"70"},null,8,["modelValue"])]),_:1}),l(L,{cols:"12",md:"6"},{default:a(()=>[l(D,{modelValue:n.item.slug,"onUpdate:modelValue":e[4]||(e[4]=s=>n.item.slug=s),label:"URL segment",variant:"underlined",counter:"255",required:""},null,8,["modelValue"]),l(D,{modelValue:n.item.domain,"onUpdate:modelValue":e[5]||(e[5]=s=>n.item.domain=s),label:"Domain",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(O,null,{default:a(()=>[l(L,{cols:"12",md:"6"},{default:a(()=>[l(D,{modelValue:n.item.tag,"onUpdate:modelValue":e[6]||(e[6]=s=>n.item.tag=s),label:"Page tag",variant:"underlined"},null,8,["modelValue"])]),_:1}),l(L,{cols:"12",md:"6"},{default:a(()=>[l(oe,{modelValue:n.item.cache,"onUpdate:modelValue":e[7]||(e[7]=s=>n.item.cache=s),label:"Cache time",items:[{key:0,val:"No cache"},{key:1,val:"1 minute"},{key:5,val:"5 minutes"},{key:15,val:"15 minutes"},{key:30,val:"30 minutes"},{key:60,val:"1 hour"},{key:180,val:"3 hours"},{key:360,val:"6 hours"},{key:720,val:"12 hours"},{key:1440,val:"24 hours"}],"item-title":"val","item-value":"key",variant:"underlined"},null,8,["modelValue"])]),_:1}),l(L,{cols:"12"},{default:a(()=>[l(D,{modelValue:n.item.to,"onUpdate:modelValue":e[8]||(e[8]=s=>n.item.to=s),label:"Target URL",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(O,null,{default:a(()=>[l(L,{cols:"12",md:"6"},{default:a(()=>[l(D,{type:"datetime-local",modelValue:n.item.start,"onUpdate:modelValue":e[9]||(e[9]=s=>n.item.start=s),label:"Start date",variant:"underlined"},null,8,["modelValue"])]),_:1}),l(L,{cols:"12",md:"6"},{default:a(()=>[l(D,{type:"datetime-local",modelValue:n.item.end,"onUpdate:modelValue":e[10]||(e[10]=s=>n.item.end=s),label:"End date",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})}const dt=H(ot,[["render",ut]]),rt={props:["ce","index"],emits:["add"],data:()=>({panel:[0]})},mt=["innerHTML"];function ft(t,e,n,o,d,i){return v(),c(N,null,{default:a(()=>[l(Q,{modelValue:t.panel,"onUpdate:modelValue":e[0]||(e[0]=s=>t.panel=s)},{default:a(()=>[l(G,{elevation:"1"},{default:a(()=>[l(W,null,{default:a(()=>e[1]||(e[1]=[p(" Available elements ")])),_:1}),l(X,null,{default:a(()=>[(v(!0),C(b,null,T(n.ce,(s,r)=>(v(),c(y,{key:r,variant:"text",stacked:"",onClick:f=>t.$emit("add",{type:r,index:n.index})},{prepend:a(()=>[U("span",{class:"icon",innerHTML:s.icon},null,8,mt)]),default:a(()=>[p(" "+$(r),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Be=H(rt,[["render",ft],["__scopeId","data-v-64544cac"]]),vt={props:["data"],emits:["update:data"],data:()=>({})};function pt(t,e,n,o,d,i){return v(),c(N,null,{default:a(()=>[l(O,null,{default:a(()=>[l(L,{cols:"12",md:"6"},{default:a(()=>[l(D,{label:"Text",variant:"underlined"})]),_:1})]),_:1})]),_:1})}const qe=H(vt,[["render",pt]]);function E(){}E.prototype={diff:function(e,n){var o,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=d.callback;typeof d=="function"&&(i=d,d={});var s=this;function r(h){return h=s.postProcess(h,d),i?(setTimeout(function(){i(h)},0),!0):h}e=this.castInput(e,d),n=this.castInput(n,d),e=this.removeEmpty(this.tokenize(e,d)),n=this.removeEmpty(this.tokenize(n,d));var f=n.length,m=e.length,u=1,g=f+m;d.maxEditLength!=null&&(g=Math.min(g,d.maxEditLength));var V=(o=d.timeout)!==null&&o!==void 0?o:1/0,I=Date.now()+V,k=[{oldPos:-1,lastComponent:void 0}],_=this.extractCommon(k[0],n,e,0,d);if(k[0].oldPos+1>=m&&_+1>=f)return r(be(s,k[0].lastComponent,n,e,s.useLongestToken));var q=-1/0,J=1/0;function Y(){for(var h=Math.max(q,-u);h<=Math.min(J,u);h+=2){var M=void 0,R=k[h-1],Z=k[h+1];R&&(k[h-1]=void 0);var se=!1;if(Z){var Ve=Z.oldPos-h;se=Z&&0<=Ve&&Ve<f}var Ce=R&&R.oldPos+1<m;if(!se&&!Ce){k[h]=void 0;continue}if(!Ce||se&&R.oldPos<Z.oldPos?M=s.addToPath(Z,!0,!1,0,d):M=s.addToPath(R,!1,!0,1,d),_=s.extractCommon(M,n,e,h,d),M.oldPos+1>=m&&_+1>=f)return r(be(s,M.lastComponent,n,e,s.useLongestToken));k[h]=M,M.oldPos+1>=m&&(J=Math.min(J,h-1)),_+1>=f&&(q=Math.max(q,h+1))}u++}if(i)(function h(){setTimeout(function(){if(u>g||Date.now()>I)return i();Y()||h()},0)})();else for(;u<=g&&Date.now()<=I;){var j=Y();if(j)return j}},addToPath:function(e,n,o,d,i){var s=e.lastComponent;return s&&!i.oneChangePerToken&&s.added===n&&s.removed===o?{oldPos:e.oldPos+d,lastComponent:{count:s.count+1,added:n,removed:o,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+d,lastComponent:{count:1,added:n,removed:o,previousComponent:s}}},extractCommon:function(e,n,o,d,i){for(var s=n.length,r=o.length,f=e.oldPos,m=f-d,u=0;m+1<s&&f+1<r&&this.equals(o[f+1],n[m+1],i);)m++,f++,u++,i.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return u&&!i.oneChangePerToken&&(e.lastComponent={count:u,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=f,m},equals:function(e,n,o){return o.comparator?o.comparator(e,n):e===n||o.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],o=0;o<e.length;o++)e[o]&&n.push(e[o]);return n},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function be(t,e,n,o,d){for(var i=[],s;e;)i.push(e),s=e.previousComponent,delete e.previousComponent,e=s;i.reverse();for(var r=0,f=i.length,m=0,u=0;r<f;r++){var g=i[r];if(g.removed)g.value=t.join(o.slice(u,u+g.count)),u+=g.count;else{if(!g.added&&d){var V=n.slice(m,m+g.count);V=V.map(function(I,k){var _=o[u+k];return _.length>I.length?_:I}),g.value=t.join(V)}else g.value=t.join(n.slice(m,m+g.count));m+=g.count,g.added||(u+=g.count)}}return i}function He(t,e){var n;for(n=0;n<t.length&&n<e.length;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,n)}function Le(t,e){var n;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(n=0;n<t.length&&n<e.length;n++)if(t[t.length-(n+1)]!=e[e.length-(n+1)])return t.slice(-n);return t.slice(-n)}function fe(t,e,n){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return n+t.slice(e.length)}function ve(t,e,n){if(!e)return t+n;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+n}function F(t,e){return fe(t,e,"")}function x(t,e){return ve(t,e,"")}function Pe(t,e){return e.slice(0,gt(t,e))}function gt(t,e){var n=0;t.length>e.length&&(n=t.length-e.length);var o=e.length;t.length<e.length&&(o=t.length);var d=Array(o),i=0;d[0]=0;for(var s=1;s<o;s++){for(e[s]==e[i]?d[s]=d[i]:d[s]=i;i>0&&e[s]!=e[i];)i=d[i];e[s]==e[i]&&i++}i=0;for(var r=n;r<t.length;r++){for(;i>0&&t[r]!=e[i];)i=d[i];t[r]==e[i]&&i++}return i}var ae="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",ct=new RegExp("[".concat(ae,"]+|\\s+|[^").concat(ae,"]"),"ug"),ie=new E;ie.equals=function(t,e,n){return n.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};ie.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(e.intlSegmenter.segment(t),function(i){return i.segment})}else n=t.match(ct)||[];var o=[],d=null;return n.forEach(function(i){/\s/.test(i)?d==null?o.push(i):o.push(o.pop()+i):/\s/.test(d)?o[o.length-1]==d?o.push(o.pop()+i):o.push(d+i):o.push(i),d=i}),o};ie.join=function(t){return t.map(function(e,n){return n==0?e:e.replace(/^\s+/,"")}).join("")};ie.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var n=null,o=null,d=null;return t.forEach(function(i){i.added?o=i:i.removed?d=i:((o||d)&&Ue(n,d,o,i),n=i,o=null,d=null)}),(o||d)&&Ue(n,d,o,null),t};function Ue(t,e,n,o){if(e&&n){var d=e.value.match(/^\s*/)[0],i=e.value.match(/\s*$/)[0],s=n.value.match(/^\s*/)[0],r=n.value.match(/\s*$/)[0];if(t){var f=He(d,s);t.value=ve(t.value,s,f),e.value=F(e.value,f),n.value=F(n.value,f)}if(o){var m=Le(i,r);o.value=fe(o.value,r,m),e.value=x(e.value,m),n.value=x(n.value,m)}}else if(n)t&&(n.value=n.value.replace(/^\s*/,"")),o&&(o.value=o.value.replace(/^\s*/,""));else if(t&&o){var u=o.value.match(/^\s*/)[0],g=e.value.match(/^\s*/)[0],V=e.value.match(/\s*$/)[0],I=He(u,g);e.value=F(e.value,I);var k=Le(F(u,I),V);e.value=x(e.value,k),o.value=fe(o.value,u,k),t.value=ve(t.value,u,u.slice(0,u.length-k.length))}else if(o){var _=o.value.match(/^\s*/)[0],q=e.value.match(/\s*$/)[0],J=Pe(q,_);e.value=x(e.value,J)}else if(t){var Y=t.value.match(/\s*$/)[0],j=e.value.match(/^\s*/)[0],h=Pe(Y,j);e.value=F(e.value,h)}}var ht=new E;ht.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(ae,"]+|[^\\S\\n\\r]+|[^").concat(ae,"]"),"ug");return t.match(e)||[]};var ye=new E;ye.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var n=[],o=t.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var d=0;d<o.length;d++){var i=o[d];d%2&&!e.newlineIsToken?n[n.length-1]+=i:n.push(i)}return n};ye.equals=function(t,e,n){return n.ignoreWhitespace?((!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),E.prototype.equals.call(this,t,e,n)};var yt=new E;yt.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Vt=new E;Vt.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function pe(t){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(t)}var B=new E;B.useLongestToken=!0;B.tokenize=ye.tokenize;B.castInput=function(t,e){var n=e.undefinedReplacement,o=e.stringifyReplacer,d=o===void 0?function(i,s){return typeof s>"u"?n:s}:o;return typeof t=="string"?t:JSON.stringify(ge(t,null,null,d),d,"  ")};B.equals=function(t,e,n){return E.prototype.equals.call(B,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),n)};function Ct(t,e,n){return B.diff(t,e,n)}function ge(t,e,n,o,d){e=e||[],n=n||[],o&&(t=o(d,t));var i;for(i=0;i<e.length;i+=1)if(e[i]===t)return n[i];var s;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),i=0;i<t.length;i+=1)s[i]=ge(t[i],e,n,o,d);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),pe(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var r=[],f;for(f in t)Object.prototype.hasOwnProperty.call(t,f)&&r.push(f);for(r.sort(),i=0;i<r.length;i+=1)f=r[i],s[f]=ge(t[f],e,n,o,f);e.pop(),n.pop()}else s=t;return s}var ce=new E;ce.tokenize=function(t){return t.slice()};ce.join=ce.removeEmpty=function(t){return t};const wt={props:["name","data","versions"],emit:["hide","use"],data:()=>({list:[]}),mounted(){this.versions.forEach(t=>{const e={...t};e[this.name]=JSON.parse(t[this.name]),this.list.push(e)})},methods:{diff(t,e){return t&&e?Ct(t,e):e?[e]:[]}}};function kt(t,e,n,o,d,i){return v(),c(ue,{"prepend-icon":"mdi-history"},{append:a(()=>[l(me,{onClick:e[0]||(e[0]=s=>t.$emit("hide"))},{default:a(()=>e[2]||(e[2]=[p("mdi-close")])),_:1})]),title:a(()=>e[3]||(e[3]=[p(" History ")])),default:a(()=>[l(re),l(de,null,{default:a(()=>[l(Fe,{side:"end",align:"start"},{default:a(()=>[n.versions[0]&&n.versions[0][n.name]!=JSON.stringify(n.data)?(v(),c(we,{key:0,size:"small","dot-color":"blue"},{default:a(()=>[l(ue,{class:"elevation-2"},{default:a(()=>[l(ke,null,{default:a(()=>e[4]||(e[4]=[p("Current")])),_:1}),l(de,null,{default:a(()=>[(v(!0),C(b,null,T(i.diff(t.list[0]?t.list[0][n.name]:{},n.data),s=>(v(),C("span",{class:te({added:s.added,removed:s.removed})},$(s.value||s),3))),256))]),_:1})]),_:1})]),_:1})):ee("",!0),(v(!0),C(b,null,T(t.list,(s,r)=>(v(),c(we,{key:r,size:"small","dot-color":s.published?"success":"grey-lighten-1"},{default:a(()=>[l(ue,{class:"elevation-2"},{default:a(()=>[l(ke,null,{default:a(()=>[p($(s.created_at),1)]),_:2},1024),l(Se,null,{default:a(()=>[p($(s.editor),1)]),_:2},1024),l(de,null,{default:a(()=>[(v(!0),C(b,null,T(i.diff(s[r+1]?s[r+1][n.name]:s[n.name],s[n.name]),f=>(v(),C("span",{class:te({added:f.added,removed:f.removed})},$(f.value||f),3))),256))]),_:2},1024),l($e,null,{default:a(()=>[l(y,{variant:"outlined",onClick:f=>t.$emit("use",s[n.name])},{default:a(()=>e[5]||(e[5]=[p(" Use ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["dot-color"]))),128))]),_:1})]),_:1}),l(re),l($e,null,{default:a(()=>[l(y,{block:"",onClick:e[1]||(e[1]=s=>t.$emit("hide"))},{default:a(()=>e[6]||(e[6]=[p(" Close ")])),_:1})]),_:1})]),_:1})}const Je=H(wt,[["render",kt],["__scopeId","data-v-a249e51e"]]),$t={components:{Elements:Be,Element:qe,History:Je},props:["item"],emits:["update:item"],data:()=>({ce:{"cms::meta":{type:"cms::meta",description:{type:"cms::string"},keywords:{type:"cms::string"},icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z" /></svg>'},"cms::social":{type:"cms::social","og:url":{type:"cms::string"},"og:title":{type:"cms::string"},icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.34 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z" /></svg>'},"cms::canonical":{type:"cms::canonical",url:{type:"cms::string"},icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5,6.41L6.41,5L17,15.59V9H19V19H9V17H15.59L5,6.41Z" /></svg>'}},meta:{},velements:!1,vhistory:!1,panel:[0]}),mounted(){var t;this.meta=JSON.parse(((t=this.item.versions[0])==null?void 0:t.meta)||this.item.meta||"{}")},computed:{available(){return Object.keys(this.elements).length},elements(){const t={...this.ce};for(const e in this.meta)delete t[e];return t},history(){return!!this.vhistory}},methods:{add(t){this.meta[t]={type:t},this.velements=!1},remove(t){delete this.meta[t]},use(t){this.meta=t,this.vhistory=null}},watch:{meta:{deep:!0,handler(){const t={...this.item};t.meta=this.meta,this.$emit("update:item",t)}}}},bt={class:"header"},Ht={class:"panel-heading"},Lt={class:"subtext"},Pt={key:0,class:"btn-group"};function Ut(t,e,n,o,d,i){const s=w("Element"),r=w("Elements"),f=w("History");return v(),C(b,null,[U("div",bt,[l(y,{class:te({hidden:!n.item.versions.length}),variant:"outlined",onClick:e[0]||(e[0]=m=>t.vhistory=!0)},{default:a(()=>e[7]||(e[7]=[p(" History ")])),_:1},8,["class"])]),l(Q,null,{default:a(()=>[(v(!0),C(b,null,T(t.meta||{},(m,u)=>(v(),c(G,{key:u,elevation:"1"},{default:a(()=>[l(W,{"collapse-icon":"mdi-pencil"},{default:a(()=>[l(y,{icon:"mdi-delete",variant:"text",onClick:g=>i.remove(u)},null,8,["onClick"]),U("div",Ht,[p($(u)+" ",1),U("span",Lt,$(m.title||m.text||""),1)])]),_:2},1024),l(X,null,{default:a(()=>[l(s,{item:m,"onUpdate:item":g=>t.meta[u]=g},null,8,["item","onUpdate:item"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),i.available?(v(),C("div",Pt,[l(y,{icon:"mdi-view-grid-plus",color:"primary",onClick:e[1]||(e[1]=m=>t.velements=!0)})])):ee("",!0),(v(),c(le,{to:"body"},[l(ne,{modelValue:t.velements,"onUpdate:modelValue":e[3]||(e[3]=m=>t.velements=m),scrollable:"",width:"auto"},{default:a(()=>[l(r,{ce:i.elements,onAdd:e[2]||(e[2]=m=>i.add(m.type))},null,8,["ce"])]),_:1},8,["modelValue"])])),(v(),c(le,{to:"body"},[l(ne,{modelValue:t.vhistory,"onUpdate:modelValue":e[6]||(e[6]=m=>t.vhistory=m),scrollable:"",width:"auto"},{default:a(()=>[l(f,{name:"meta",data:t.meta,versions:n.item.versions||[],onUse:e[4]||(e[4]=m=>i.use(m)),onHide:e[5]||(e[5]=m=>t.vhistory=!1)},null,8,["data","versions"])]),_:1},8,["modelValue"])]))],64)}const Dt=H($t,[["render",Ut],["__scopeId","data-v-6c31a3e1"]]),Tt={components:{PageDetailsPageConfig:st,PageDetailsPageProps:dt,PageDetailsPageMeta:Dt},props:["item"],emits:["update:item"],data:()=>({tab:"details"})};function Et(t,e,n,o,d,i){const s=w("PageDetailsPageProps"),r=w("PageDetailsPageMeta"),f=w("PageDetailsPageConfig");return v(),c(N,null,{default:a(()=>[l(Ie,null,{default:a(()=>[l(Me,{class:"subtabs",modelValue:t.tab,"onUpdate:modelValue":e[0]||(e[0]=m=>t.tab=m),"align-tabs":"center",density:"compact"},{default:a(()=>[l(z,{value:"details"},{default:a(()=>e[5]||(e[5]=[p("Details")])),_:1}),l(z,{value:"meta"},{default:a(()=>e[6]||(e[6]=[p("Meta")])),_:1}),l(z,{value:"config"},{default:a(()=>e[7]||(e[7]=[p("Config")])),_:1})]),_:1},8,["modelValue"]),l(Ne,{modelValue:t.tab,"onUpdate:modelValue":e[4]||(e[4]=m=>t.tab=m)},{default:a(()=>[l(A,{value:"details"},{default:a(()=>[l(s,{item:n.item,"onUpdate:item":e[1]||(e[1]=m=>t.$emit("update:item",m))},null,8,["item"])]),_:1}),l(A,{value:"meta"},{default:a(()=>[l(r,{item:n.item,"onUpdate:item":e[2]||(e[2]=m=>t.$emit("update:item",m))},null,8,["item"])]),_:1}),l(A,{value:"config"},{default:a(()=>[l(f,{item:n.item,"onUpdate:item":e[3]||(e[3]=m=>t.$emit("update:item",m))},null,8,["item"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const _t=H(Tt,[["render",Et],["__scopeId","data-v-85522f67"]]),It={components:{Element:qe},props:["clip","checked","content"],emits:["copy","cut","insert","paste","remove","update:checked","update:content"],data:()=>({data:{}}),methods:{use(t){this.data=t}},watch:{content:{immediate:!0,handler(t,e){t!=e&&(this.data={...t})}},data:{deep:!0,handler(t,e){t!=e&&this.$emit("update:content",t)}}}},Mt={class:"panel-heading"},Nt={class:"subtext"};function Ot(t,e,n,o,d,i){const s=w("Element");return v(),c(G,{elevation:"1"},{default:a(()=>[l(W,{"collapse-icon":"mdi-pencil"},{default:a(()=>[l(Oe,{"model-value":n.checked,onClick:e[0]||(e[0]=he(r=>t.$emit("update:checked",!n.checked),["stop"]))},null,8,["model-value"]),l(ze,null,{activator:a(({props:r})=>[l(y,Ae({icon:"mdi-dots-vertical",variant:"text"},r),null,16)]),default:a(()=>[l(S,null,{default:a(()=>[l(P,null,{default:a(()=>[l(y,{"prepend-icon":"mdi-content-copy",variant:"text",onClick:e[1]||(e[1]=r=>t.$emit("copy"))},{default:a(()=>e[9]||(e[9]=[p("Copy")])),_:1})]),_:1}),l(P,null,{default:a(()=>[l(y,{"prepend-icon":"mdi-content-cut",variant:"text",onClick:e[2]||(e[2]=r=>t.$emit("cut"))},{default:a(()=>e[10]||(e[10]=[p("Cut")])),_:1})]),_:1}),l(P,null,{default:a(()=>[l(y,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:e[3]||(e[3]=r=>t.$emit("insert",0))},{default:a(()=>e[11]||(e[11]=[p("Insert before")])),_:1})]),_:1}),l(P,null,{default:a(()=>[l(y,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:e[4]||(e[4]=r=>t.$emit("insert",1))},{default:a(()=>e[12]||(e[12]=[p("Insert after")])),_:1})]),_:1}),n.clip?(v(),c(P,{key:0},{default:a(()=>[l(y,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:e[5]||(e[5]=r=>t.$emit("paste",0))},{default:a(()=>e[13]||(e[13]=[p("Paste before")])),_:1})]),_:1})):ee("",!0),n.clip?(v(),c(P,{key:1},{default:a(()=>[l(y,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:e[6]||(e[6]=r=>t.$emit("paste",1))},{default:a(()=>e[14]||(e[14]=[p("Paste after")])),_:1})]),_:1})):ee("",!0),l(P,null,{default:a(()=>[l(y,{"prepend-icon":"mdi-delete",variant:"text",onClick:e[7]||(e[7]=r=>t.$emit("remove"))},{default:a(()=>e[15]||(e[15]=[p("Delete")])),_:1})]),_:1})]),_:1})]),_:1}),U("div",Mt,[p($(t.data.type)+" ",1),U("span",Nt,$(t.data.title||t.data.text||""),1)])]),_:1}),l(X,null,{default:a(()=>[l(s,{data:t.data,"onUpdate:data":e[8]||(e[8]=r=>t.data=r)},null,8,["data"])]),_:1})]),_:1})}const zt=H(It,[["render",Ot]]),At={components:{Content:zt,History:Je,Elements:Be},setup(){return{aside:Te()}},props:["item"],emits:["update:item"],data:()=>({contents:[],menu:{},side:{},clip:null,index:null,checked:!1,vhistory:!1,velements:!1,elements:{"cms::text":{type:"cms::text",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" /></svg>'},"cms::heading":{type:"cms::heading",text:{type:"cms::string"},level:{type:"cms::number"},icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M13,8H15.31L15.63,5H17.63L17.31,8H19.31L19.63,5H21.63L21.31,8H23V10H21.1L20.9,12H23V14H20.69L20.37,17H18.37L18.69,14H16.69L16.37,17H14.37L14.69,14H13V12H14.9L15.1,10H13V8M17.1,10L16.9,12H18.9L19.1,10H17.1Z" /></svg>'},"cms::article":{type:"cms::article",title:{type:"cms::string"},intro:{type:"cms::text"},cover:{type:"cms::image"},icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 21H5C3.89 21 3 20.11 3 19V5C3 3.89 3.89 3 5 3H19C20.11 3 21 3.89 21 5V10.33C20.7 10.21 20.37 10.14 20.04 10.14C19.67 10.14 19.32 10.22 19 10.37V5H5V19H10.11L10 19.11V21M7 9H17V7H7V9M7 17H12.11L14 15.12V15H7V17M7 13H16.12L17 12.12V11H7V13M21.7 13.58L20.42 12.3C20.21 12.09 19.86 12.09 19.65 12.3L18.65 13.3L20.7 15.35L21.7 14.35C21.91 14.14 21.91 13.79 21.7 13.58M12 22H14.06L20.11 15.93L18.06 13.88L12 19.94V22Z" /></svg>'}}}),mounted(){this.contents=JSON.parse(this.item.versions[0]?this.item.versions[0].data:this.item.data||"[]")},methods:{add(t,e){e!==null?this.contents.splice(e,0,{type:t}):this.contents.push({type:t}),this.velements=!1},clean(){return this.contents.forEach(t=>{delete t._checked,delete t._hide}),this.contents},copy(t){const e=JSON.parse(JSON.stringify(this.contents[t]));e.id=null,this.clip={type:"copy",index:t,content:e}},cut(t){this.clip={type:"cut",index:t,content:this.contents[t]},this.contents.splice(t,1)},insert(t){this.index=t,this.velements=!0},paste(t){this.contents.splice(t,0,this.clip.content),this.clip=null},purge(){for(let t=this.contents.length-1;t>=0;t--)this.contents[t]._checked&&this.remove(t);this.checked=!1},remove(t){this.contents.splice(t,1)},search(t){this.contents.forEach(e=>{e._hide=t!==""&&!JSON.stringify(e).toLocaleLowerCase().includes(t)})},show(t){return(typeof t._hide>"u"||typeof t._hide<"u"&&t._hide!==!0)&&this.aside.isUsed("type",t.type)},toggle(){this.contents.forEach(t=>{t._checked=!t._checked})},visibility(t){this.aside.show.type=!!t}},watch:{contents:{deep:!0,handler(){const t={};this.contents.forEach(e=>{e.type&&(t[e.type]=(t[e.type]||0)+1)}),this.aside.store.type=t}}}},Bt={class:"header"},qt={class:"bulk"},Jt={class:"btn-group"};function Rt(t,e,n,o,d,i){const s=w("Content"),r=w("Elements"),f=w("History"),m=Qe("observe-visibility");return v(),C(b,null,[K((v(),c(N,null,{default:a(()=>[l(Ie,{elevation:"0"},{default:a(()=>[U("div",Bt,[U("div",qt,[l(Oe,{modelValue:t.checked,"onUpdate:modelValue":e[0]||(e[0]=u=>t.checked=u),onClick:e[1]||(e[1]=he(u=>i.toggle(),["stop"]))},null,8,["modelValue"]),l(ze,{location:"bottom right"},{activator:a(({props:u})=>[l(y,Ae({"append-icon":"mdi-menu-down",variant:"outlined"},u),{default:a(()=>e[12]||(e[12]=[p("Actions")])),_:2},1040)]),default:a(()=>[l(S,null,{default:a(()=>[l(P,null,{default:a(()=>[l(y,{"prepend-icon":"mdi-delete",variant:"text",onClick:e[2]||(e[2]=u=>i.purge())},{default:a(()=>e[13]||(e[13]=[p("Delete")])),_:1})]),_:1})]),_:1})]),_:1})]),l(D,{"prepend-inner-icon":"mdi-magnify",label:"Search",variant:"underlined",class:"search",clearable:"","hide-details":"",onInput:e[3]||(e[3]=u=>i.search(u.target.value)),"onClick:clear":e[4]||(e[4]=u=>i.search(""))}),l(y,{class:te({hidden:!n.item.versions.length}),variant:"outlined",onClick:e[5]||(e[5]=u=>t.vhistory=!0)},{default:a(()=>e[14]||(e[14]=[p(" History ")])),_:1},8,["class"])]),l(Q,null,{default:a(()=>[(v(!0),C(b,null,T(t.contents,(u,g)=>K((v(),c(s,{key:g,clip:t.clip,content:u,"onUpdate:content":V=>t.contents[g]=V,checked:u._checked,"onUpdate:checked":V=>u._checked=V,onCopy:V=>i.copy(g),onCut:V=>i.cut(g),onInsert:V=>i.insert(g+V),onPaste:V=>i.paste(g+V),onRemove:V=>i.remove(g)},null,8,["clip","content","onUpdate:content","checked","onUpdate:checked","onCopy","onCut","onInsert","onPaste","onRemove"])),[[Ee,i.show(u)]])),128))]),_:1}),U("div",Jt,[l(y,{icon:"mdi-view-grid-plus",color:"primary",onClick:e[6]||(e[6]=u=>t.velements=!0)})])]),_:1})]),_:1})),[[m,i.visibility]]),(v(),c(le,{to:"body"},[l(ne,{modelValue:t.velements,"onUpdate:modelValue":e[8]||(e[8]=u=>t.velements=u),scrollable:"",width:"auto"},{default:a(()=>[l(r,{ce:t.elements,index:t.index,onAdd:e[7]||(e[7]=u=>i.add(u.type,u.index))},null,8,["ce","index"])]),_:1},8,["modelValue"])])),(v(),c(le,{to:"body"},[l(ne,{modelValue:t.vhistory,"onUpdate:modelValue":e[11]||(e[11]=u=>t.vhistory=u),scrollable:"",width:"auto"},{default:a(()=>[l(f,{name:"data",data:i.clean(),versions:n.item.versions||[],onUse:e[9]||(e[9]=u=>t.use(u)),onHide:e[10]||(e[10]=u=>t.vhistory=!1)},null,8,["data","versions"])]),_:1},8,["modelValue"])]))],64)}const Zt=H(At,[["render",Rt],["__scopeId","data-v-e991e237"]]),Ft={props:["item"],emits:["update:item"],setup(){return{app:_e()}},data:()=>({height:"100vh"}),computed:{url(){const t=this.app.url.replace(/:domain/,this.item.domain).replace(/:slug/,this.item.slug).replace(/:lang/,this.item.lang),e=t.endsWith("/")?t.length-1:t.length,n=t.startsWith("//")?1:0;return t.substring(n,e)||"/"}},methods:{resize(){this.height=this.$refs.preview.contentWindow.document.body.scrollHeight+"px"}}},St=["src"];function Qt(t,e,n,o,d,i){return v(),C("iframe",{ref:"preview",src:i.url,style:Ge("min-height: "+t.height),onLoad:e[0]||(e[0]=s=>i.resize())},null,44,St)}const Gt=H(Ft,[["render",Qt]]),Wt={components:{Aside:nt,PageDetailsPage:_t,PageDetailsContent:Zt,PageDetailsPreview:Gt},props:["item"],emits:["update:item"],data:()=>({tab:"page",nav:null,page:{}}),watch:{item(){this.page.id&&this.item.id===this.page.id||this.$apollo.query({query:je`query($id: ID!) {
            page(id: $id) {
              id
              parent_id
              domain
              slug
              lang
              name
              title
              to
              tag
              status
              cache
              config
              data
              meta
              start
              end
              editor
              created_at
              updated_at
              deleted_at
              has
              contents {
                id
                data
              }
              versions {
                published
                meta
                data
                editor
                created_at
              }
            }
          }`,variables:{id:this.item.id}}).then(t=>{!t.errors&&t.data?this.page=Object.assign(this.page,t.data.page):console.log(`page(id: ${this.item.id})`,t)}).catch(t=>{console.log(`page(id: ${this.item.id})`,t)})}}};function Xt(t,e,n,o,d,i){const s=w("PageDetailsPage"),r=w("PageDetailsContent"),f=w("PageDetailsPreview"),m=w("Aside");return v(),C(b,null,[l(We,{elevation:2,density:"compact",image:"src/assets/background.png"},{append:a(()=>[l(y,{onClick:e[1]||(e[1]=he(u=>t.nav=!t.nav,["stop"]))},{default:a(()=>[l(me,{size:"x-large"},{default:a(()=>[p($(t.nav?"mdi-chevron-right":"mdi-chevron-left"),1)]),_:1})]),_:1})]),default:a(()=>[l(Ye,null,{default:a(()=>[U("div",{class:"app-title",onClick:e[0]||(e[0]=u=>t.$emit("update:item",t.page))},[l(me,{icon:"mdi-keyboard-backspace"}),e[8]||(e[8]=p(" Back to pages "))])]),_:1})]),_:1}),l(Xe,null,{default:a(()=>[l(Me,{"fixed-tabs":"",modelValue:t.tab,"onUpdate:modelValue":e[2]||(e[2]=u=>t.tab=u)},{default:a(()=>[l(z,{value:"page"},{default:a(()=>e[9]||(e[9]=[p("Page")])),_:1}),l(z,{value:"content"},{default:a(()=>e[10]||(e[10]=[p("Content")])),_:1}),l(z,{value:"preview"},{default:a(()=>e[11]||(e[11]=[p("Preview")])),_:1})]),_:1},8,["modelValue"]),l(Ne,{modelValue:t.tab,"onUpdate:modelValue":e[6]||(e[6]=u=>t.tab=u)},{default:a(()=>[l(A,{value:"page"},{default:a(()=>[l(s,{item:t.page,"onUpdate:item":e[3]||(e[3]=u=>t.page=u)},null,8,["item"])]),_:1}),l(A,{value:"content"},{default:a(()=>[l(r,{item:t.page,"onUpdate:item":e[4]||(e[4]=u=>t.page=u)},null,8,["item"])]),_:1}),l(A,{value:"preview"},{default:a(()=>[l(f,{item:t.page,"onUpdate:item":e[5]||(e[5]=u=>t.page=u)},null,8,["item"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(m,{state:t.nav,"onUpdate:state":e[7]||(e[7]=u=>t.nav=u)},null,8,["state"])],64)}const Kt=H(Wt,[["render",Xt],["__scopeId","data-v-e4e4b1c1"]]);export{xt as N,Kt as P};
