import{_ as k,av as S,an as U,$ as L,b as o,d as f,w as a,G as x,o as n,a as s,aG as h,aH as i,j as d,t as g,a3 as A,i as _,E as b,aJ as C,aL as N,c as y,F as V,a1 as w,aM as B,r as F}from"../index.js";const I={data:()=>({user:null}),setup(){const t=U();return{auth:L(),messages:t}},created(){this.auth.user().then(t=>{this.user=t}).catch(t=>{this.messages.add({message:"Failed to load user",color:"error"})})},methods:{logout(){this.auth.logout().then(()=>{this.user=null,S.replace("/")}).catch(t=>{this.messages.add("Logout failed")})}}};function D(t,e,v,l,p,c){return t.user?(n(),o(x,{key:0},{activator:a(({props:r})=>[s(_,b({icon:"mdi-account-circle-outline"},r,{class:"icon"}),null,16)]),default:a(()=>[s(h,null,{default:a(()=>{var r;return[(r=t.user)!=null&&r.name?(n(),o(i,{key:0},{default:a(()=>[d(g(t.user.name),1)]),_:1})):f("",!0),s(i,null,{default:a(()=>[s(A,{class:"menu",variant:"text",onClick:e[0]||(e[0]=m=>c.logout())},{default:a(()=>e[1]||(e[1]=[d("Logout")])),_:1,__:[1]})]),_:1})]}),_:1})]),_:1})):f("",!0)}const H=k(I,[["render",D]]),G={props:{content:{type:Array,required:!0},filter:{type:Object,required:!0}},emits:["update:filter"],setup(){return{drawer:C()}},data(){return{open:[0,1,2]}},methods:{active(t){for(const e in t.value)if(this.filter[e]!==t.value[e])return!1;return!0},has(t){return!!this.filter[t]},toggle(t){for(const e in t.value)this.filter[e]=t.value[e];this.$emit("update:filter",this.filter)}}};function M(t,e,v,l,p,c){return n(),o(N,{modelValue:l.drawer.aside,"onUpdate:modelValue":e[1]||(e[1]=r=>l.drawer.aside=r),"mobile-breakpoint":"md",location:"end"},{default:a(()=>[s(h,{opened:p.open,"onUpdate:opened":e[0]||(e[0]=r=>p.open=r)},{default:a(()=>[(n(!0),y(V,null,w(v.content,(r,m)=>(n(),o(B,{key:m,value:m},{activator:a(({props:u})=>[s(i,b({ref_for:!0},u,{class:{active:c.has(r.key)}}),{default:a(()=>[d(g(r.key),1)]),_:2},1040,["class"])]),default:a(()=>[(n(!0),y(V,null,w(r.items||[],(u,$)=>(n(),o(i,{onClick:E=>c.toggle(u),active:c.active(u),key:$,rounded:"lg"},{default:a(()=>[u.icon?(n(),o(_,{key:0,icon:u.icon,class:"icon"},null,8,["icon"])):f("",!0),d(" "+g(u.title),1)]),_:2},1032,["onClick","active"]))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]),_:1},8,["modelValue"])}const J=k(G,[["render",M],["__scopeId","data-v-6fd0659e"]]),j={setup(){const t=C();return{auth:L(),drawer:t}}};function q(t,e,v,l,p,c){const r=F("router-link");return n(),o(N,{modelValue:l.drawer.nav,"onUpdate:modelValue":e[0]||(e[0]=m=>l.drawer.nav=m),location:"start","mobile-breakpoint":"lg"},{default:a(()=>[s(h,null,{default:a(()=>[l.auth.can("page:view")?(n(),o(i,{key:0,rounded:"lg"},{default:a(()=>[s(_,{icon:"mdi-file-tree",class:"icon"}),s(r,{to:"/pages",class:"router-link"},{default:a(()=>e[1]||(e[1]=[d("Pages")])),_:1,__:[1]})]),_:1})):f("",!0),l.auth.can("element:view")?(n(),o(i,{key:1,rounded:"lg"},{default:a(()=>[s(_,{icon:"mdi-share-variant",class:"icon"}),s(r,{to:"/elements",class:"router-link"},{default:a(()=>e[2]||(e[2]=[d("Shared elements")])),_:1,__:[2]})]),_:1})):f("",!0),l.auth.can("file:view")?(n(),o(i,{key:2,rounded:"lg"},{default:a(()=>[s(_,{icon:"mdi-folder-multiple-image",class:"icon"}),s(r,{to:"/files",class:"router-link"},{default:a(()=>e[3]||(e[3]=[d("Files")])),_:1,__:[3]})]),_:1})):f("",!0)]),_:1})]),_:1},8,["modelValue"])}const O=k(j,[["render",q],["__scopeId","data-v-32733cd4"]]);export{J as A,O as N,H as U};
