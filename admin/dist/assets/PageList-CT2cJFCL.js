var Qt=Object.defineProperty;var en=(e,t,n)=>t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Se=(e,t,n)=>en(e,typeof t!="symbol"?t+"":t,n);import{U as tn,A as nn,N as an}from"./Navigation-Cr90_rXC.js";import{af as Be,r as T,c as P,o as p,a as u,w as d,F as j,a0 as ee,az as M,aA as be,N as Le,m as X,aB as je,P as bt,ai as sn,aC as ht,f as I,b as v,ar as K,j as C,t as A,d as _,_ as G,H,aD as it,am as He,Z as fe,$ as Ct,h as ue,aE as Qe,E as Pe,C as de,a2 as b,aF as Oe,aG as V,ap as ke,D as Ce,i as we,aH as re,aI as wt,aJ as Ke,aK as rn,av as he,aL as ln,ax as rt,aM as Me,aN as lt,aO as Ie,an as ot,T as Ve,aP as Te,a1 as Dt,a3 as Et,a4 as St,a5 as Pt,aQ as Bt,V as Ye,e as ge,ac as Ne,aR as dt,aS as ce,aT as Ot,aU as _e,ao as Ht,aq as Kt,aV as Mt,aW as qt,aX as Rt,U as on,aY as dn,as as un}from"../index.js";import{H as cn,A as hn}from"./HistoryDialog-DB5QzTyj.js";import{S as Vt,F as ut,u as xe,E as fn}from"./ElementListItems-Bv9LrEIu.js";import{l as mn}from"./vue-draggable-plus-By0QSgvd.js";var pn=!1,gn=!0;/*!
 * helper-js v3.1.6
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */function et(e){return Object.prototype.toString.call(e)==="[object Array]"}function xt(e){return Object.prototype.toString.call(e)==="[object Object]"}function vn(e){return typeof e=="function"}function yn(e,t){return e<t?e:t}function zt(e,t){let n,s=0;for(;(n=e.indexOf(t))>-1;)e.splice(n,1),s++;return s}function Wt(e){return e[e.length-1]}function bn(e){return et(e)?e:[e]}function kn(e,t){let n=new Set(t);const s={};return n.forEach(r=>{s[r]=e[r]}),s}function _n(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){if(t.reverse)if(e.length!=null)for(let n=e.length-1;n>=0;n--){const s={value:e[n],index:n};(!t.exclude||!t.exclude(s))&&(yield s)}else if(xt(e)){const n=Object.keys(e);n.reverse();for(const s of n){const r={value:e[s],key:s};(!t.exclude||!t.exclude(r))&&(yield r)}}else throw"Unsupported type";else if(e.length!=null)for(let n=0;n<e.length;n++){const s={value:e[n],index:n};(!t.exclude||!t.exclude(s))&&(yield s)}else if(xt(e))for(const n of Object.keys(e)){const s={value:e[n],key:n};(!t.exclude||!t.exclude(s))&&(yield s)}else throw"Unsupported type"}()}function Cn(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}function Jt(e,t){return Object.keys(t).forEach(n=>{Cn(e,n,t[n])}),e}function wn(e){const t={};return Object.keys(e).forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t}function ne(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=Jt({...n},{childrenKey:"children"});const{childrenKey:s}=n,r=et(e)?e:[e];class a{}const l=(i,h,o)=>{n.reverse&&(i=i.slice(),i.reverse());const c=i.length;for(let m=0;m<c;m++){const f=i[m],g=n.reverse?c-m-1:m,y=o?[...o,g]:[];n.childFirst&&f[s]!=null&&l(f[s],f,y);const D=t(f,g,h,y);if(D===!1)throw new a;if(D==="skip children")continue;if(D==="skip siblings")break;n.childFirst||f[s]!=null&&l(f[s],f,y)}};try{l(r,null,et(e)?[]:null)}catch(i){if(!(i instanceof a))throw i}}function Dn(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s;return ne(e,function(){if(t(...arguments))return s={node:arguments.length<=0?void 0:arguments[0],index:arguments.length<=1?void 0:arguments[1],parent:arguments.length<=2?void 0:arguments[2],path:arguments.length<=3?void 0:arguments[3]},!1},n),s}function En(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=Dn(e,t,n);return s==null?void 0:s.node}function Yt(e,t){const n={childrenKey:"children"};t&&Object.assign(n,t);const{childrenKey:s,nodeHandler:r}=n,a=new kt;return a.childrenKey=s,ne(e,(l,i,h,o)=>{let c=Object.assign({},l);c[s]&&(c[s]=[]),r&&(c=r(c,{oldNode:l,index:i,parent:h,path:o})),a.set(o,c)},{childrenKey:s}),a.data}class kt{constructor(){Se(this,"data");Se(this,"childrenKey","children");let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.data=t}get rootChildren(){const{childrenKey:t}=this,{data:n}=this;return et(n)?n:n[t]}iteratePath(t){var n=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{childrenKey:r,rootChildren:a}=n;if(s.reverse){const l=[...n.iteratePath(t,{...s,reverse:!1})];l.reverse();for(const{path:i,node:h}of l)yield{path:i,node:h}}else{let l=[],i=a;for(const h of t){const o=[...l,h],c=i[h];yield{path:o,node:c},l=o,i=c[r]}}}()}getFamily(t){const n=[];for(const{node:s}of this.iteratePath(t))n.push(s);return n}get(t){return Wt(this.getFamily(t))}getParentAndIndex(t){const n=t.slice(),s=n.pop();return{parent:this.get(n),index:s,parentPath:n}}getParent(t){return this.getParentAndIndex(t).parent}set(t,n){if(t==null||t.length===0)this.data=n;else{const{childrenKey:s}=this;let{rootChildren:r}=this;const{parent:a,index:l}=this.getParentAndIndex(t);let i;t.length===1?(r||(this.data?this.data[s]=[]:this.data=[]),i=r):(a[s]||(a[s]=[]),i=a[s]),i[l]=n}}delete(t){const{childrenKey:n,rootChildren:s}=this,{parent:r,index:a}=this.getParentAndIndex(t),l=t.length===1?s:r[n],i=l[a];return l.splice(a,1),i}walk(t,n){const{childrenKey:s,data:r}=this;return ne(r,t,s,n)}clone(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Yt(this.data),wn({childrenKey:this.childrenKey,nodeHandler:t.nodeHandler||void 0})}}function It(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return vn(e)?e(...t):e}function Sn(e,t){return function(){let s,r;try{s=e(...arguments)}catch(a){r=a}finally{}if(r)throw r;return s}}function Ue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[];let s;const r={};let a=r;return{action:function(){for(var h=arguments.length,o=new Array(h),c=0;c<h;c++)o[c]=arguments[c];if(o.length===0)return a===r&&(a=e()),a;if(s||(s=new xn),!s.has(o)&&(s.set(o,e(...o)),t.capacity!=null)){n.push(o);const m=n.splice(0,n.length-t.capacity);for(const f of m)s.delete(f)}return s.get(o)},clearCache:()=>{s=null,n.splice(0,n.length)}}}function Pn(){let e,t;return{promise:new Promise((s,r)=>{e=s,t=r}),resolve:e,reject:t}}function On(e,t){for(;;){if(e.parentNode==null)return!1;if(e.parentNode===t)return!0;e=e.parentNode}}function ft(e){let t=e.getBoundingClientRect();if(document.documentElement.clientTop>0){const n=t.top-document.documentElement.clientTop,s=t.bottom,r=t.left-document.documentElement.clientLeft,a=t.right,l=t.width||a-r,i=t.height||s-n,c={top:n,right:a,bottom:s,left:r,width:l,height:i,x:r,y:n};t={...c,toJSON:()=>c}}return t}function Tt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n&&n.withSelf?e:e.parentElement;for(;s;){const r=n.until&&s===n.until;if(r&&!n.withUntil)return;const a=t(s);if(a==="break")return;if(a)return s;if(r)return;s=s.parentElement}}function tt(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function Lt(e,t){for(const n of t)if(tt(e,n))return!0;return!1}function ae(e,t,n,s){e.addEventListener?e.addEventListener(t,n,s):e.attachEvent&&e.attachEvent(`on${t}`,n,s)}function se(e,t,n,s){e.removeEventListener?e.removeEventListener(t,n,s):e.detachEvent&&e.detachEvent(`on${t}`,n,s)}function Vn(e){let t=[];const n=()=>{if(!r.listening){for(const a of e){ae.apply(this,a);const l=()=>se.apply(this,a);t.push(l)}r.listening=!0}},r={listening:!1,stop:()=>{if(r.listening){for(const a of t)a();t=[],r.listening=!1}},resume:n,start:n};return r.start(),r}function nt(e,t){return getComputedStyle(e)[t]}function _t(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n={start:0,end:e.length-1,maxTimes:1e3,...n};let{start:s,end:r}=n;const{returnNearestIfNoHit:a,maxTimes:l}=n;let i,h;s==null&&(s=0,r=e.length-1);let o=0,c;for(;s>=0&&s<=r;){if(o>=l)throw Error(`binarySearch: loop times is over ${l}, you can increase the limit.`);i=Math.floor((r-s)/2+s),h=e[i];const m=o+1;if(c=t(h,i,m),c>0)r=i-1;else if(c<0)s=i+1;else return{index:i,value:h,count:m,hit:!0};o++}return a?{index:i,value:h,count:o+1,hit:!1,greater:c>0}:null}class xn{constructor(){Se(this,"_map",new Map);Se(this,"_values",{});Se(this,"_objCount",0)}_keysToString(t){const{_map:n}=this;let s=[];for(const r of t){if(!n.has(r))return null;s.push(n.get(r)[0])}return s.toString()}has(t){return this._keysToString(t)!=null}get(t){const{_values:n}=this,s=this._keysToString(t);if(s==null)throw"Value not found by specified keys";return n[s][1]}set(t,n){const{_map:s,_values:r}=this;let a=[];for(const l of t){let i,h=1;s.has(l)?([i,h]=s.get(l),h++):(this._objCount++,i=this._objCount.toString()),s.set(l,[i,h]),a.push(i)}r[a.toString()]=[t.slice(),n]}delete(t){const{_values:n,_map:s}=this,r=this._keysToString(t);if(r==null)throw"Value not found by specified keys";delete n[r];for(const a of t){let[l,i]=s.get(a);i--,i===0?s.delete(a):s.set(a,[l,i])}}clear(){this._map.clear(),this._values={}}*entries(){const{_values:t}=this;for(const n in t){const[s,r]=t[n];yield[s,r]}}count(){return[...this.entries()].length}}/*!
 * @virtual-list/vue
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://virtual-list.phphe.com
 * Released under the MIT License.
 */const In=Be({props:{table:Boolean}}),Xt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n},Tn={key:0},Ln={key:1};function Nn(e,t,n,s,r,a){return e.table?(p(),P("table",Tn,[M(e.$slots,"prepend"),I("tbody",null,[M(e.$slots,"default")]),M(e.$slots,"append")])):(p(),P("div",Ln,[M(e.$slots,"prepend"),M(e.$slots,"default"),M(e.$slots,"append")]))}const Un=Xt(In,[["render",Nn]]),$n=Be({components:{VirtualListTable:Un},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const t=Le(0),n=Le(e.firstRender-1),s=X(()=>{var O;return yn(n.value,(((O=e.items)==null?void 0:O.length)||1)-1)}),r=Le(0),a=X(()=>f.value[t.value]?Ee(t.value):0),l=X(()=>f.value.length>0?Ee(f.value.length-1)+Wt(m.value):0),i=X(()=>f.value[s.value]?l.value-Ee(s.value)-m.value[s.value]:0),h=X(()=>e.disabled?{}:{overflow:"auto"}),o=X(()=>{const O={display:"flex"};return e.disabled||(e.horizontal?Object.assign(O,{"margin-left":a.value+"px","margin-right":i.value+"px",width:l.value-i.value-a.value+"px"}):Object.assign(O,{"margin-top":a.value+"px","margin-bottom":i.value+"px"})),O["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete O.display,delete O["flex-direction"]),O}),c=X(()=>je((e.items||[]).map(()=>null))),m=X(()=>(e.items||[]).map((O,E)=>{var w;if(c[E]!=null)return c[E];let B=(w=e.itemSize)==null?void 0:w.call(e,O,E);return B==null&&(B=r.value),B})),f=X(()=>{const O=[];return m.value.reduce((E,w)=>(O.push(E),E+w),0),O});bt(()=>e.items,F);const g=X(()=>{if(!e.items||e.disabled)return;const O=[];for(let E=t.value;E<=s.value;E++){const w=e.items[E];if(!w)break;O.push({item:w,index:E})}return O}),y=Le(),D=Le();sn(async()=>{F();try{ct()}catch{await ht(),F()}});let x;function N(){const O=y.value;if(!O)return;const E=oe(O);x!=null&&e.buffer-Math.abs(E-x)>=10||(x=E,F())}let U=!1,Q=!1;async function F(){var O;if(U){Q=!0;return}if(!e.items||e.disabled)return;U=!0;const E=y.value,w=(O=D.value)==null?void 0:O.$el;if(!E||!w)return;r.value||(r.value=We()),t.value=Re(),n.value=ze(),await ht();let B,Z=0;const z={},me=e.table?w.querySelector("tbody").children:w.children;for(let L=0;L<me.length;L++){const $=me[L],q=nt($,"position");if(q&&["absolute","fixed"].includes(q))continue;const ie=nt($,"display")!=="none"?De($):0,pe=$.getAttribute("vt-index"),Je=pe?parseInt(pe):t.value+Z;z[Je]=(z[Je]||0)+ie,Z++}for(const L of Object.keys(z)){const $=parseInt(L);c.value[$]!==z[$]&&(c.value[$]=z[$],B=!0)}B&&await ht(),U=!1,Q&&(Q=!1,F());function Re(){const L=oe(E)-R(E)-e.buffer;return _t(f.value,$=>$-L,{returnNearestIfNoHit:!0}).index}function ze(){const L=oe(E)-R(E)+te(E)+e.buffer;return _t(f.value,$=>$-L,{returnNearestIfNoHit:!0}).index}function We(){const L=[],$=e.table?w.querySelector("tbody").children:w.children;for(let q=0;q<$.length;q++){const ie=$[q],pe=getComputedStyle(ie);if(["absolute","fixed"].includes(pe.position))continue;const Je=De(ie);if(L.push(Je),L.length>=10)break}return L.length===0?0:L.reduce((q,ie)=>q+ie,0)/L.length}}function te(O){const E=getComputedStyle(O);let w=parseFloat(e.horizontal?E.width:E.height);return E.boxSizing==="border-box"&&(e.horizontal?w=w-parseFloat(E.borderLeftWidth)-parseFloat(E.borderRightWidth):w=w-parseFloat(E.borderTopWidth)-parseFloat(E.borderBottomWidth)),w}function De(O){let E=te(O);const w=getComputedStyle(O);return e.horizontal?E+=parseFloat(w.borderLeftWidth)+parseFloat(w.borderRightWidth)+parseFloat(w.marginLeft)+parseFloat(w.marginRight):E+=parseFloat(w.borderTopWidth)+parseFloat(w.borderBottomWidth)+parseFloat(w.marginTop)+parseFloat(w.marginBottom),E=Number.isNaN(E)?0:E,E}function oe(O){return e.horizontal?O.scrollLeft:O.scrollTop}function R(O){const E=getComputedStyle(O);return e.horizontal?parseFloat(E.paddingLeft):parseFloat(E.paddingTop)}function Ee(O){return f.value[O]}function ct(){const O=y.value;new ResizeObserver(E=>{for(let w of E)if(tt(w.target,"vtlist")){F();break}}).observe(O)}function qe(O,E){if(e.itemKey){if(typeof e.itemKey=="string"&&e.itemKey==="index")return E;if(typeof e.itemKey=="function")return e.itemKey(O,E)}}return{listElRef:y,listInnerRef:D,onscroll:N,listStyle:h,listInnerStyle:o,visibleItemsInfo:g,getItemKey:qe,update:F,sizes:m,positions:f,runtimeSizes:c}}});function Fn(e,t,n,s,r,a){const l=T("VirtualListTable");return p(),P("div",{class:"vtlist",ref:"listElRef",style:be(e.listStyle),onScrollPassive:t[0]||(t[0]=(...i)=>e.onscroll&&e.onscroll(...i))},[u(l,{class:"vtlist-inner",ref:"listInnerRef",style:be(e.listInnerStyle),table:e.table},{prepend:d(()=>[M(e.$slots,"prepend")]),append:d(()=>[M(e.$slots,"append")]),default:d(()=>[e.disabled?(p(!0),P(j,{key:0},ee(e.items,(i,h)=>M(e.$slots,"default",{key:e.getItemKey(i,h),item:i,index:h})),128)):(p(!0),P(j,{key:1},ee(e.visibleItemsInfo,({item:i,index:h})=>M(e.$slots,"default",{key:e.getItemKey(i,h),item:i,index:h})),128))]),_:3},8,["style","table"])],36)}const An=Xt($n,[["render",Fn]]);/*!
 * @he-tree/tree-utils v0.1.0-alpha.5
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const ye="children";function jn(e){const n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s={...Bn,...n,data:e,stats:null,statsFlat:null,_statsMap:null,initialized:!1,init(){const{data:a,childrenKey:l}=this,i=new kt([]);this._statsMap=new Map,ne(a,(o,c,m,f)=>{const g=this.statHandler({...Nt(),data:o,open:!!this.defaultOpen,parent:i.getParent(f),children:[],level:f.length});this._statsMap.set(o,g),i.set(f,g)},{childrenKey:l});const h=[];i.walk(o=>{h.push(o)}),this.stats=this.statsHandler(i.rootChildren),this.statsFlat=this.statsFlatHandler(h),this.initialized=!0},getStat(a){let l=this._statsMap.get(a);if(!l)throw new Ut("Stat not found");return l},has(a){if(a.isStat)return this.statsFlat.indexOf(a)>-1;try{return!!this.getStat(a)}catch(l){if(l instanceof Ut)return!1;throw l}},_getPathByStat(a){if(a==null)return[];const i=this.getSiblings(a).indexOf(a);return[...a.parent?this._getPathByStat(a.parent):[],i]},afterOneCheckChanged(a){const{checked:l}=a;if(a._ignoreCheckedOnce)return delete a._ignoreCheckedOnce,!1;const i=h=>{const{parent:o}=h;if(o){let c,m,f;for(const y of o.children)y.checked?c=!0:y.checked===0?f=!0:m=!0;const g=f?0:m?c?0:!1:!0;o.checked!==g&&(this._ignoreCheckedOnce(o),o.checked=g),i(o)}};return i(a),ne(a.children,h=>{h.checked!==l&&(this._ignoreCheckedOnce(h),h.checked=l)},{childrenKey:ye}),!0},_ignoreCheckedOnce(a){a._ignoreCheckedOnce=!0,setTimeout(()=>{a._ignoreCheckedOnce&&(a._ignoreCheckedOnce=!1)},100)},isVisible(a){const l=a.isStat?a:this.getStat(a),i=h=>!h||!h.hidden&&h.open&&i(h.parent);return!!(!l.hidden&&i(l.parent))},updateCheck(){ne(this.stats,a=>{if(a.children&&a.children.length>0){const l=a.children.every(i=>i.checked);a.checked!==l&&(this._ignoreCheckedOnce(a),a.checked=l)}},{childFirst:!0,childrenKey:ye})},getChecked(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.statsFlat.filter(l=>l.checked||a&&l.checked===0)},getUnchecked(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.statsFlat.filter(l=>a?!l.checked:l.checked===!1)},openAll(){for(const a of this.statsFlat)a.open=!0},closeAll(){for(const a of this.statsFlat)a.open=!1},openNodeAndParents(a){const l=a.isStat?a:this.getStat(a);for(const i of this.iterateParent(l,{withSelf:!0}))i.open=!0},_calcFlatIndex(a,l){let i=a?this.statsFlat.indexOf(a)+1:0;const h=a?a.children:this.stats;for(let o=0;o<l;o++)i+=this._count(h[o]);return i},add(a,l,i){if(this.has(a))throw"Can't add because data exists in tree";const h=l?l.children:this.stats;i==null&&(i=h.length);const o=this.statHandler({...Nt(),open:!!this.defaultOpen,data:a,parent:l||null,children:[],level:l?l.level+1:1});this._setPosition(o,l||null,i);const c=a[this.childrenKey];if(c){const m=c.slice();for(const f of m)this.add(f,o)}},remove(a){const l=this.getSiblings(a);if(l.includes(a)){zt(l,a);const i=this._flat(a);this.statsFlat.splice(this.statsFlat.indexOf(a),i.length);for(const h of i)this._statsMap.delete(h.data);return this.afterRemoveStat(a),!0}return!1},getSiblings(a){const{parent:l}=a;return l?l.children:this.stats},_setPosition(a,l,i){(l?l.children:this.stats).splice(i,0,a),a.parent=l,a.level=l?l.level+1:1;const o=this._calcFlatIndex(l,i),c=this._flat(a);this.statsFlat.splice(o,0,...c);for(const m of c)this._statsMap.has(m.data)||this._statsMap.set(m.data,m);ne(a,(m,f,g)=>{g&&(m.level=g.level+1)},{childrenKey:ye}),this.afterSetStat(a,l,i)},*iterateParent(a,l){let i=l!=null&&l.withSelf?a:a.parent;for(;i;)yield i,i=i.parent},move(a,l,i){if(this.has(a)){if(a.parent===l&&this.getSiblings(a).indexOf(a)===i)return!1;if(a===l)throw new Error("Can't move node to it self");if(l&&a.level<l.level){let h;for(const o of this.iterateParent(l))if(o.level===a.level){h=o;break}if(a===h)throw new Error("Can't move node to its descendant")}this.remove(a)}return this._setPosition(a,l,i),!0},_flat(a){const l=[];return ne(a,i=>{l.push(i)},{childrenKey:ye}),l},_count(a){return this._flat(a).length},getData(a,l){const{childrenKey:i}=this,h=new kt([]);return h.childrenKey=i,ne(l||this.stats,(o,c,m,f)=>{let g={...o.data,[i]:[]};a&&(g=a(g)),h.set(f,g)},{childrenKey:ye}),h.data}},r=s;return s.noInitialization||r.init(),r}const Bn={childrenKey:"children",defaultOpen:!1,statsHandler(e){return e},statsFlatHandler(e){return e},afterSetStat(e,t,n){},afterRemoveStat(e){},statHandler(e){return e}};function Nt(){return{isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null}}class Ut extends Error{constructor(t){super(t),this.name="StatNotFoundError"}}/*!
 * drag-event-service v2.0.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const Xe={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},mt={isTouch(e){return e.type&&e.type.startsWith("touch")},_getStore(e){return e._wrapperStore||(e._wrapperStore=[]),e._wrapperStore},on(e,t,n,s){const{args:r,mouseArgs:a,touchArgs:l}=$t(s),i=this._getStore(e),h=this,o=function(c){let m;if(h.isTouch(c))m={x:c.changedTouches[0].pageX,y:c.changedTouches[0].pageY,pageX:c.changedTouches[0].pageX,pageY:c.changedTouches[0].pageY,clientX:c.changedTouches[0].clientX,clientY:c.changedTouches[0].clientY,screenX:c.changedTouches[0].screenX,screenY:c.changedTouches[0].screenY};else if(m={x:c.pageX,y:c.pageY,pageX:c.pageX,pageY:c.pageY,clientX:c.clientX,clientY:c.clientY,screenX:c.screenX,screenY:c.screenY},t==="start"&&c.which!==1)return;return n.call(this,c,m)};i.push({handler:n,wrapper:o}),ae.call(null,e,Xe[t][0],o,...r,...a),ae.call(null,e,Xe[t][1],o,...r,...l)},off(e,t,n,s){const{args:r,mouseArgs:a}=$t(s),l=this._getStore(e);for(let i=l.length-1;i>=0;i--){const{handler:h,wrapper:o}=l[i];n===h&&(se.call(null,e,Xe[t][0],o,...r,...a),se.call(null,e,Xe[t][1],o,...r,...a),l.splice(i,1))}}};function $t(e){e||(e={});const t=e.args||[],n=e.mouseArgs||[],s=e.touchArgs||[];return{args:t,mouseArgs:n,touchArgs:s}}/*!
 * @he-tree/dnd-utils v0.1.0-alpha.4
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const pt=new Map,le={triggerElement:null,dragElement:null,internal:!1,dropEffect:"none",preventDefault:!1},Y=le;function $e(e){e.dataTransfer&&(e.dataTransfer.dropEffect=Y.dropEffect)}function Hn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pt.has(e))throw"Already registered on specified element";const n={...t},s=n;Jt(n,Kn),mt.on(e,"start",r,{touchArgs:[{passive:!0}]}),mt.on(e,"end",a);function r(m){var f;const g=m.target;g.nodeType===Node.ELEMENT_NODE&&(Y.triggerElement=g);const y=g;if(n.ingoreHTMLTags&&y.tagName&&n.ingoreHTMLTags.find(x=>x.toUpperCase()===y.tagName))return;const D=(f=n.beforeDragStart)===null||f===void 0?void 0:f.call(n,m);D&&(D.setAttribute("draggable","true"),Y.dragElement=D)}function a(m){Y.dragElement&&Y.dragElement.removeAttribute("draggable")}function l(m){var f;Y.internal=!0,(f=n.onDragStart)===null||f===void 0||f.call(n,m),$e(m)}function i(m){var f;(f=n.onDrag)===null||f===void 0||f.call(n,m),$e(m)}function h(m){var f;(f=n.onDragEnd)===null||f===void 0||f.call(n,m),Y.internal=!1,Y.dragElement&&Y.dragElement.removeAttribute("draggable"),Y.triggerElement=null,Y.dragElement=null,Y.dropEffect="none"}const o=qn(e,{onDragLeave(m){var f;(f=n.onDragLeave)===null||f===void 0||f.call(n,m),$e(m)},onDragEnter(m){var f;s.ifPreventDefault(m)&&m.preventDefault(),(f=n.onDragEnter)===null||f===void 0||f.call(n,m),$e(m)},onDragOver(m){var f;s.ifPreventDefault(m)&&m.preventDefault(),(f=n.onDragOver)===null||f===void 0||f.call(n,m),$e(m)},onDrop(m){var f;s.ifPreventDefault(m)&&m.preventDefault(),(f=n.onDrop)===null||f===void 0||f.call(n,m)},onEnter(m){var f;(f=n.onEnter)===null||f===void 0||f.call(n,m)},onLeave(m){var f;(f=n.onLeave)===null||f===void 0||f.call(n,m)}});return ae(e,"dragstart",l),ae(e,"drag",i),ae(e,"dragend",h),Object.assign(n,{root:e,destroy:()=>{mt.off(e,"start",r,{touchArgs:[{passive:!0}]}),se(e,"dragstart",l),se(e,"drag",i),se(e,"dragend",h),o(),pt.delete(e)}}),pt.set(e,s),s}const Kn={ingoreHTMLTags:["INPUT","TEXTAREA","SELECT","OPTGROUP","OPTION"],ifPreventDefault(e){return le.dragElement?!0:Y.preventDefault},beforeDragStart(e){},onDragStart(e){},onDrag(e){},onDragEnter(e){},onDragLeave(e){},onDragOver(e){},onDragEnd(e){},onDrop(e){}};let at=null;const Mn=e=>{at=e,setTimeout(()=>{at=null},20)};function qn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e;let s=!1;const r=g=>{var y;s=!0,(y=t.onEnter)===null||y===void 0||y.call(t,g),c.resume()},a=g=>{var y;Mn(g.target),(y=t.onDragEnter)===null||y===void 0||y.call(t,g),s||r(g)},l=g=>{var y;s||r(g),(y=t.onDragOver)===null||y===void 0||y.call(t,g)},i=g=>{var y;(y=t.onDragLeave)===null||y===void 0||y.call(t,g);const D=function(){var N;let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;s=!1,(N=t.onLeave)===null||N===void 0||N.call(t,U),c.stop()},x=at;at=null,x&&On(x,n)||D()},h=g=>{var y;(y=t.onDrop)===null||y===void 0||y.call(t,g)},o=g=>{var y;g instanceof KeyboardEvent&&g.key!=="Escape"||(s=!1,c.stop(),(y=t.onEndBeforeLeave)===null||y===void 0||y.call(t,g))},c=Vn([[e,"drop",o],[window,"mouseup",o],[window,"touchend",o],[window,"keydown",o]]);c.stop();const m=()=>{ae(e,"dragenter",a),ae(e,"dragover",l),ae(e,"dragleave",i),ae(e,"drop",h)},f=()=>{se(e,"dragenter",a),se(e,"dragover",l),se(e,"dragleave",i),se(e,"drop",h),c.stop()};return m(),f}/*!
 * @he-tree/vue v2.9.3
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://hetree.phphe.com/
 * Released under the MIT License.
 */let st=!1;const Rn=()=>{st=!0,setTimeout(()=>{st=!1},100)},zn=Be({props:["stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor"],emits:["open","close","check"],setup(e,{emit:t}){const n=X(()=>({[e.rtl?"paddingRight":"paddingLeft"]:e.indent*(e.stat.level-1)+"px"}));bt(()=>e.stat.checked,a=>{st||e.processor.afterOneCheckChanged(e.stat)&&t("check",e.stat)}),bt(()=>e.stat.open,a=>{st||(t(a?"open":"close",e.stat),Rn())});const s=X(()=>{const a=[],l=c=>{var m;if(c.parent){let f=(m=c.parent)==null?void 0:m.children.indexOf(c);do{f++;let g=c.parent.children[f];if(g){if(!g.hidden)return!0}else break}while(!0)}return!1},i=e.rtl?"right":"left",h=e.btt?"top":"bottom";let o=e.stat;for(;o;){let c=(o.level-2)*e.indent+e.treeLineOffset;const m=l(o),f=()=>{a.push({style:{[i]:c+"px",[h]:m?0:"50%"}})};o===e.stat?o.level>1&&f():m&&f(),o=o.parent}return a}),r=X(()=>{let a=(e.stat.level-2)*e.indent+e.treeLineOffset;return{[e.rtl?"right":"left"]:a+"px"}});return{indentStyle:n,vLines:s,hLineStyle:r}}}),Gt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n},Wn={class:"tree-node-inner"},Jn={key:1,class:"tree-node",ref:"el"};function Yn(e,t,n,s,r,a){return e.table?(p(),P("tr",Jn,[M(e.$slots,"default",{indentStyle:e.indentStyle})],512)):(p(),P("div",{key:0,class:K(["tree-node",{"tree-node--with-tree-line":e.treeLine}]),style:be(e.indentStyle),ref:"el"},[e.treeLine?(p(),P(j,{key:0},[(p(!0),P(j,null,ee(e.vLines,l=>(p(),P("div",{class:"tree-line tree-vline",style:be(l.style)},null,4))),256)),e.stat.level>1?(p(),P("div",{key:0,class:"tree-line tree-hline",style:be(e.hLineStyle)},null,4)):_("",!0)],64)):_("",!0),I("div",Wn,[M(e.$slots,"default",{indentStyle:e.indentStyle})])],6))}const Xn=Gt(zn,[["render",Yn]]);function Gn(e,t={}){const n={...t,statHandler(s){return this._statHandler2&&(s=this._statHandler2(s)),gt(t.statHandler,je(s))},statsHandler(s){return gt(t.statsHandler,je(s))},statsFlatHandler(s){return gt(t.statsFlatHandler,je(s))}};return jn(e,n)}function gt(e,t){return e?e(t):t}const Zn=Be({components:{VirtualList:An,TreeNode:Xn},props:{value:{required:pn,type:Array},modelValue:{required:gn,type:Array},updateBehavior:{type:String,default:"modify"},processor:{type:Object,default:()=>Gn([],{noInitialization:!0})},childrenKey:{type:String,default:"children"},textKey:{type:String,default:"text"},indent:{type:Number,default:20},virtualization:{type:Boolean,default:!1},virtualizationPrerenderCount:{type:Number,default:20},defaultOpen:{type:Boolean,default:!0},statHandler:{type:Function},rtl:{type:Boolean,default:!1},btt:{type:Boolean,default:!1},table:{type:Boolean,default:!1},watermark:{type:Boolean,default:!1},nodeKey:{type:[String,Function],default:"index"},treeLine:{type:Boolean,default:!1},treeLineOffset:{type:Number,default:8}},emits:["update:modelValue","click:node","open:node","close:node","check:node","beforeDragStart","before-drag-start","after-drop","change","enter","leave"],data(){return{stats:[],statsFlat:[],dragNode:null,dragOvering:!1,placeholderData:{},placeholderColspan:1,batchUpdateWaiting:!1,self:this,_ignoreValueChangeOnce:!1}},computed:{valueComputed(){return this.modelValue||[]},visibleStats(){const{statsFlat:e,isVisible:t}=this;let n=e;return this.btt&&(n=n.slice(),n.reverse()),n.filter(s=>t(s))},rootChildren(){return this.stats}},methods:{_emitValue(e){this.$emit("update:modelValue",e)},_updateValue(e){return this.updateBehavior==="disabled"?!1:(e!==this.valueComputed&&(this._ignoreValueChangeOnce=!0),this._emitValue(e),!0)},getStat:vt(W("getStat")),has:vt(W("has")),updateCheck:W("updateCheck"),getChecked:W("getChecked"),getUnchecked:W("getUnchecked"),openAll:W("openAll"),closeAll:W("closeAll"),openNodeAndParents:W("openNodeAndParents"),isVisible:W("isVisible"),move:Ft("move"),add:vt(Ft("add")),addMulti(e,t,n){this.batchUpdate(()=>{let s=n;for(const r of e)this.add(r,t,s),s!=null&&s++})},remove:W("remove"),removeMulti(e){let t=[...e];this.batchUpdate(()=>{for(const n of t)this.remove(n)})},iterateParent:W("iterateParent"),getSiblings:W("getSiblings"),getData:W("getData"),getRootEl(){return this.$refs.vtlist.listElRef},batchUpdate(e){const t=this.ignoreUpdate(e);return this.batchUpdateWaiting||this._updateValue(this.updateBehavior==="new"?this.getData():this.valueComputed),t},ignoreUpdate(e){const t=this.batchUpdateWaiting;this.batchUpdateWaiting=!0;const n=e();return this.batchUpdateWaiting=t,n}},watch:{processor:{immediate:!0,handler(e){if(e){const t=n=>{if(n){const{childrenKey:s}=this;return n[s]||(n[s]=[]),n[s]}else return this.valueComputed};e._statHandler2=this.statHandler?n=>n.data===this.placeholderData?n:this.statHandler(n):null,e.afterSetStat=(n,s,r)=>{const{childrenKey:a,updateBehavior:l}=this;let i=this.valueComputed;if(l==="new"){if(this.batchUpdateWaiting)return;i=this.getData()}else if(l==="modify"){const h=t(s==null?void 0:s.data);h.includes(n.data)||h.splice(r,0,n.data)}this.batchUpdateWaiting||this._updateValue(i)},e.afterRemoveStat=n=>{var s;const{childrenKey:r,updateBehavior:a}=this;let l=this.valueComputed;if(a==="new"){if(this.batchUpdateWaiting)return;l=this.getData()}else if(a==="modify"){const i=t((s=n.parent)==null?void 0:s.data);zt(i,n.data)}this.batchUpdateWaiting||this._updateValue(l)}}e.initialized||(e.data=this.valueComputed,Object.assign(e,kn(this,["childrenKey","defaultOpen"])),e.init(),e.updateCheck()),this.stats=e.stats,this.statsFlat=e.statsFlat,e.data!==this.valueComputed&&this._updateValue(e.data)}},valueComputed:{handler(e){if(this.dragOvering||this.dragNode||this._ignoreValueChangeOnce)this._ignoreValueChangeOnce=!1;else{const{processor:t}=this;t.data=e,t.init(),this.stats=t.stats,this.statsFlat=t.statsFlat}}}},created(){},mounted(){typeof window<"u"&&(this.watermark===!1&&(window._heTreeWatermarkDisabled=!0),this.watermark&&!window._heTreeWatermarkDisabled&&(window._heTreeWatermark||(window._heTreeWatermark=!0,console.log("%c[he-tree] Vue tree component:  https://hetree.phphe.com","color:#0075ff; font-size:14px;"))))}});function W(e){return function(...t){return this.processor[e](...t)}}function Ft(e){return function(...t){return this.batchUpdate(()=>this.processor[e](...t))}}function vt(e){return function(t,...n){return t&&(t=je(t)),e.call(this,t,...n)}}const Qn={key:0,class:"drag-placeholder he-tree-drag-placeholder"},ea=["colspan"],ta={class:"drag-placeholder he-tree-drag-placeholder"};function na(e,t,n,s,r,a){const l=T("TreeNode"),i=T("VirtualList");return p(),v(i,{class:K(["he-tree",{"he-tree--rtl rtl":e.rtl,"he-tree--drag-overing drag-overing":e.dragOvering}]),ref:"vtlist",items:e.visibleStats,disabled:!e.virtualization,table:e.table,itemKey:e.nodeKey},{prepend:d(()=>[M(e.$slots,"prepend",{tree:e.self})]),default:d(({item:h,index:o})=>[u(l,{"vt-index":o,class:K([h.class,{"drag-placeholder-wrapper":h.data===e.placeholderData,"dragging-node":h===e.dragNode}]),style:be(h.style),stat:h,rtl:e.rtl,btt:e.btt,indent:e.indent,table:e.table,treeLine:e.treeLine,treeLineOffset:e.treeLineOffset,processor:e.processor,onClick:c=>e.$emit("click:node",h),onOpen:t[0]||(t[0]=c=>e.$emit("open:node",c)),onClose:t[1]||(t[1]=c=>e.$emit("close:node",c)),onCheck:t[2]||(t[2]=c=>e.$emit("check:node",c))},{default:d(({indentStyle:c})=>[h.data===e.placeholderData?(p(),P(j,{key:0},[e.table?(p(),P("td",{key:1,style:be(c),colspan:e.placeholderColspan},[I("div",ta,[M(e.$slots,"placeholder",{tree:e.self})])],12,ea)):(p(),P("div",Qn,[M(e.$slots,"placeholder",{tree:e.self})]))],64)):M(e.$slots,"default",{key:1,node:h.data,stat:h,indentStyle:c,tree:e.self},()=>[C(A(h.data[e.textKey]),1)])]),_:2},1032,["vt-index","class","style","stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor","onClick"])]),append:d(()=>[M(e.$slots,"append",{tree:e.self})]),_:3},8,["class","items","disabled","table","itemKey"])}const aa=Gt(Zn,[["render",na]]);let S=null,k=null,Ze,Ae,ve,Ge,yt,J,At;const Fe={get startInfo(){return Ze},get targetInfo(){return Ae}},sa=Be({extends:aa,props:{triggerClass:{type:[String,Array]},disableDrag:Boolean,disableDrop:Boolean,eachDraggable:{type:Function},eachDroppable:{type:Function},rootDroppable:{type:[Boolean,Function],default:!0},dragOpen:{type:Boolean,default:!0},dragOpenDelay:{type:Number,default:0},beforeDragOpen:{type:Function},resolveStartMovePoint:{type:[String,Function]},keepPlaceholder:{type:Boolean},maxLevel:{type:Number},dragCopy:{type:Boolean},dragCopyDataHandler:{type:Function},onExternalDragOver:{type:Function},externalDataHandler:{type:Function},ondragstart:{type:Function}},data(){return{treeDraggableInstance:null}},computed:{},methods:{getNodeByElement(e){const t=e.getAttribute("vt-index");return t==null?null:this.visibleStats[t]},isDraggable(e){if(this.disableDrag)return!1;if(e.draggable!=null)return e.draggable;if(this.eachDraggable){const n=this.eachDraggable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDraggable(t):!0},isDroppable(e){if(this.disableDrop)return!1;if(!e)return It(this.rootDroppable,[this,S]);if(e.droppable!=null)return e.droppable;if(this.eachDroppable){const n=this.eachDroppable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDroppable(t):!0},_eachDroppable(){var e;return It((e=this._isDragCopy)==null?void 0:e.call(this),[this])}},mounted(){const e=(o,c)=>{let m=!0;return S&&S!==this&&(m=m&&this._isMoved),this.table&&!this._isDragCopy&&(m=m&&this._isDragCopy),m&&(o.x!==c.x||o.y!==c.y)},t=(o,c)=>{k.ignoreUpdate(()=>{if(!k.has(k.placeholderData)){if(k.table){let f=0;const g=k.getRootEl().querySelector("tr");if(g)for(const{value:y}of _n(g.children))nt(y,"display")!=="none"&&(f+=y.colSpan||1);f<1&&(f=1),k.placeholderColspan=f}k.add(k.placeholderData)}const m=k.getStat(k.placeholderData);k.move(m,o,c)})},n=()=>{const o=this;if(o.has(o.placeholderData))return o.remove(o.getStat(o.placeholderData)),!0},s=o=>{o?le.dropEffect=S!=null&&S.dragCopy?"copy":"move":le.dropEffect="none"},r=o=>{const c=this;o?s(!0):c.keepPlaceholder?c.has(c.placeholderData)||s(!1):(n(),s(!1))};let a={x:0,y:0};const l=this.getRootEl();let i=null;const h=()=>{k!=null&&k.has(k.placeholderData)&&k.ignoreUpdate(()=>{k.remove(k.getStat(k.placeholderData)),S&&(S.dragNode.hidden=!1,S.dragOvering=!1)})};this.treeDraggableInstance=Hn(l,{beforeDragStart:o=>{if(!le.triggerElement)return;let c=this.triggerClass;(!c||c.length===0)&&(c="tree-node");let m=bn(c),f=Tt(le.triggerElement,g=>{if(Lt(g,m))return!0;if(tt(g,"tree-node"))return"break"},{withSelf:!0,until:l});if(i=Tt(f,g=>{if(tt(g,"tree-node"))return!0},{withSelf:!0,until:l}),!!i){if(J=this.getNodeByElement(i),!J)throw"Can't find drag node";if(this.isDraggable(J))return this.$emit("before-drag-start",J),this.$emit("beforeDragStart",J),l}},onDragStart:o=>{var c,m,f;if(!i||!J)return;{const{x:D,y:x}=i.getBoundingClientRect(),{clientX:N,clientY:U}=o;(c=o.dataTransfer)==null||c.setDragImage(i,N-D,U-x)}yt={x:o.clientX,y:o.clientY},S=this,S.dragNode=J,Ge=(()=>{if(this.resolveStartMovePoint==="mouse")return{x:o.clientX,y:o.clientY};if(typeof this.resolveStartMovePoint=="function")return this.resolveStartMovePoint(i);{let D,x=0;if(this.table){let N=i.getBoundingClientRect();D={x:N.x,y:N.y},this.rtl&&(D.x=N.right),x=N.height}else if(!this.rtl)D=i.children[0].getBoundingClientRect().toJSON(),x=D.height;else{const N=i.children[0].getBoundingClientRect();D={x:N.right,y:N.y},x=N.height}return this.btt&&(D.y+=x),D}})(),this.dragOvering=!0;const g=S.getSiblings(S.dragNode),y=g.indexOf(J);Ze={tree:S,dragNode:J,parent:J.parent,siblings:g,indexBeforeDrop:y},k=this,(m=o.dataTransfer)==null||m.setData("text",`he-tree drag start at ${new Date().toISOString()}`),S._eachDroppable()||setTimeout(()=>{J.hidden=!0,t(J.parent,y+1)},0),(f=this.ondragstart)==null||f.call(this,o)},onEnter:o=>{this.$emit("enter",o)},onLeave:o=>{ve=null,this.dragOvering=!1,le.preventDefault=!1,n(),this.$emit("leave",o)},onDragOver:Sn(o=>{if(!S){if(!this.onExternalDragOver||this.onExternalDragOver(o)===!1)return;le.preventDefault=!0}const c={x:o.clientX,y:o.clientY},m=e(c,a);if(a=c,!m)return;this.dragOvering=!0,k=this;const f=Ge?{x:Ge.x+(c.x-yt.x),y:Ge.y+(c.y-yt.y)}:{...c},{btt:g,rtl:y}=k;if(k.disableDrop){le.dropEffect="none";return}let D,x;const N=k.getRootEl().querySelectorAll(".tree-node"),U=[];N.forEach(w=>{!Lt(w,["drag-placeholder-wrapper","dragging-node"])&&nt(w,"display")!=="none"&&U.push(w)});const Q=_t(U,w=>ft(w)[g?"bottom":"top"]-f.y,{returnNearestIfNoHit:!0});let F=null,te,De;Q.hit||(Q.greater?g||(F=Q.index-1,U[F]||F++):g&&(F=Q.index+1,U[F]||F--)),F==null&&(F=Q.index),te=U[F],De=g?U[F-1]:U[F+1],D=te&&k.getNodeByElement(te),x=De&&k.getNodeByElement(De);const{indent:oe}=k,R=Ue(()=>{if(k.table){let w=ft(te).toJSON();const B=oe*(D.level-1);return y?(w.width-=B,w.right-=B):w.x+=B,w}else return ft(te.firstElementChild)}).action,Ee=Ue(()=>g?f.y>R().y+R().height/2:f.y<R().y+R().height/2).action,ct=Ue(()=>g?!te||F===U.length-1&&Ee():!te||F===0&&Ee()).action,qe=Ue(()=>y?f.x-(R().x+R().width):R().x-f.x).action,O=Ue(()=>y?f.x<R().x+R().width-oe:f.x>R().x+oe).action;let E;if(ct())E=1,D=null;else if(D)qe()>0?E=D.level-Math.ceil(qe()/oe):O()?E=D.level+1:E=D.level;else return;x&&E<x.level&&(E=x.level),(async()=>{let w,B,Z=!1,z=null;const me=async L=>{if(L.open)return!0;if(k.dragOpen)if(k.dragOpenDelay)if(z=L,ve===L)Z=!0;else{let $=Pn();ve=L;const q=L;return setTimeout(async()=>{q!==ve?(Z=!0,$.resolve(!0)):(k.beforeDragOpen&&await k.beforeDragOpen(L),q!==ve?(Z=!0,$.resolve(!0)):(L.open=!0,z=null,$.resolve(!0)))},k.dragOpenDelay),await $.promise}else return k.beforeDragOpen&&await k.beforeDragOpen(L),L.open=!0,!0;else return!1},Re=async()=>{if(k.isDroppable(D)&&await me(D)){if(Z)return;w=D,B=null}else return!1},ze=(L=E)=>{let $=D,q=[];for(;$&&$.level>=L;)$=$.parent||null,q.unshift($);let ie=0;for(const pe of q){if(k.isDroppable(pe))return w=pe,B=q[ie+1]||D,!0;ie++}return!1};At=D||null,D?E>D.level?await Re()===!1&&ze(D.level):ze()===!1&&await Re():k.isDroppable(null)&&(w=null),ve=z;const We=!!(!Z&&(w||w===null));return{cancelled:Z,success:We,parent:w,index:We?B?(w?w.children:k.stats).filter(L=>L.data!==k.placeholderData).indexOf(B)+1:0:-1}})().then(w=>{if(!w.cancelled){if(!w.success){r(!1);return}if(k.maxLevel!=null&&k.maxLevel>0){let B=1;if(S){const Z=S.dragNode;let z=0;ne(Z,me=>{me.level>z&&(z=me.level)},{childrenKey:ye}),B=z-Z.level+1}if(B+(w.parent?w.parent.level:0)>k.maxLevel){r(!1);return}}r(!0),t(w.parent,w.index)}})}),onDrop:o=>{k=this;const c=!S;if(!k)return;const m=S==null?void 0:S.dragNode;let f,g=(()=>{var y;let D=!0;if(!k.has(k.placeholderData))D=!1;else if(c)f=(y=this.externalDataHandler)==null?void 0:y.call(this,o),D=f!=null;else if(!S.dragCopy){const x=k.getStat(k.placeholderData);S===k&&x.parent===m.parent&&En(m,N=>N===x)}return D})();if(g){const y=k.getStat(k.placeholderData),D=k.getSiblings(y);Ae={tree:k,dragNode:m,parent:y.parent,siblings:D,indexBeforeDrop:D.indexOf(y)}}(()=>{if(h(),g){let y=Ae.indexBeforeDrop;S&&!S.dragCopy&&S===k&&Ze.parent==Ae.parent&&Ze.indexBeforeDrop<y&&y--,S&&S!==k&&!S._eachDroppable()&&S.batchUpdate(()=>{S.remove(m),S.updateCheck()}),k.batchUpdate(()=>{let D=S==null?void 0:S.dragNode,x;f?x=f:S._eachDroppable()&&(x=Yt(S.dragNode.data,{childrenKey:S.childrenKey}),S.dragCopyDataHandler&&(x=S.dragCopyDataHandler(x))),x&&(k.add(x),D=k.getStat(x)),k.move(D,Ae.parent,y),k.updateCheck()})}k.$emit("after-drop"),g&&(S&&(S.dragCopy||S.$emit("change")),k!==S&&k.$emit("change"))})()},onDragEnd:o=>{h(),S&&(S.dragNode&&(S.dragNode.hidden=!1),S.dragNode=null,S.dragOvering=!1,S=null),k=null,ve=null,J=null,At=null}})},unmounted(){var e;(e=this.treeDraggableInstance)==null||e.destroy()}}),ia={components:{Draggable:sa},props:{embed:{type:Boolean,default:!1},filter:{type:Object,default:()=>({})}},emits:["select"],data(){return{clip:null,menu:{},items:[],loading:!0,checked:!1,term:""}},setup(){const e=it(),t=He(),n=fe();return{app:Ct(),auth:n,languages:e,messages:t}},created(){this.searchd=this.debounce(this.search,500),this.fetch().then(e=>{this.items=e.data,this.loading=!1})},computed:{canTrash(){return this.$refs.tree.statsFlat.some(e=>e.check&&!e.data.deleted_at)},isChecked(){return this.$refs.tree.statsFlat.some(e=>e.check)},isTrashed(){return this.$refs.tree.statsFlat.some(e=>e.check&&e.data.deleted_at)}},methods:{add(){if(this.embed||!this.auth.can("page:add")){this.messages.add("Permission denied","error");return}const e=this.create();this.$apollo.mutate({mutation:H`mutation ($input: PageInput!) {
            addPage(input: $input) {
              id
            }
          }`,variables:{input:e}}).then(t=>{if(t.errors)throw t.errors;e.id=t.data.addPage.id,e.published=!0,this.$refs.tree.add(e),this.$emit("select",e)}).catch(t=>{this.messages.add("Error adding root page","error"),this.$log("PageList::add(): Error adding root page",t)})},change(){if(!this.auth.can("page:move")){this.messages.add("Permission denied","error");return}const e=Fe.targetInfo.parent,n=Fe.targetInfo.siblings[Fe.targetInfo.indexBeforeDrop+1]||null;this.$apollo.mutate({mutation:H`mutation ($id: ID!, $parent: ID, $ref: ID) {
            movePage(id: $id, parent: $parent, ref: $ref) {
              id
            }
          }`,variables:{id:Fe.startInfo.dragNode.data.id,parent:e?e.data.id:null,ref:n?n.data.id:null}}).then(s=>{if(s.errors)throw s.errors;const r=Fe.startInfo.parent;r!=null&&r.data&&!(r!=null&&r.children.length)&&(r.data.has=!1),e&&(e.data.has=!0)}).catch(s=>{this.messages.add("Error moving page","error"),this.$log("PageList::change(): Error moving page",s)})},copy(e,t){this.clip={type:"copy",node:t,stat:e}},create(e={}){return Object.assign({path:"_"+Math.floor(Math.random()*1e4),lang:this.languages.current||this.languages.default(),status:0,cache:5},e)},cut(e,t){this.clip={type:"cut",node:t,stat:e}},debounce(e,t){let n;return function(...s){return new Promise((r,a)=>{const l=this;clearTimeout(n),n=setTimeout(()=>{try{r(e.apply(l,s))}catch(i){a(i)}},t)})}},drop(e){if(!this.auth.can("page:drop")){this.messages.add("Permission denied","error");return}const t=e?[e]:this.$refs.tree.statsFlat.filter(n=>{var s;return n.check&&((s=n.data)==null?void 0:s.id)});t.length&&this.$apollo.mutate({mutation:H`mutation ($id: [ID!]!) {
            dropPage(id: $id) {
              id
            }
          }`,variables:{id:t.map(n=>n.data.id)}}).then(n=>{if(n.errors)throw n.errors;for(const s of t)this.update(s,r=>{r.data.deleted_at=new Date().toISOString().replace(/T/," ").substring(0,19),r.check=!1});this.invalidate()}).catch(n=>{this.messages.add("Error trashing page","error"),this.$log("PageList::drop(): Error trashing page",t,n)})},fetch(e=null,t=1,n=100){return this.auth.can("page:view")?this.$apollo.query({query:H`query($filter: PageFilter, $limit: Int!, $page: Int!, $trashed: Trashed) {
            pages(filter: $filter, first: $limit, page: $page, trashed: $trashed) {
              data {
                ${this.fields()}
              }
              paginatorInfo {
                currentPage
                lastPage
              }
            }
          }`,variables:{filter:{parent_id:e},page:t,limit:n,trashed:this.filter.trashed||"WITHOUT"}}).then(s=>{if(s.errors)throw s.errors;return this.transform(s.data.pages)}).catch(s=>{this.messages.add("Error fetching pages","error"),this.$log("PageList::fetch(): Error fetching page",e,t,n,s)}):(this.messages.add("Permission denied","error"),Promise.resolve([]))},fields(){return`id
          parent_id
          lang
          path
          domain
          name
          title
          to
          tag
          type
          theme
          status
          cache
          editor
          updated_at
          deleted_at
          has
          latest {
            id
            published
            publish_at
            data
            editor
            created_at
          }`},insert(e,t=null){if(!this.auth.can("page:add")){this.messages.add("Permission denied","error");return}const n=this.$refs.tree.getSiblings(e),s=t!==null?e.parent:e,r=n.indexOf(e),a=this.create();let l=null;switch(t===null&&!e.open&&this.load(e,e.data),t){case 0:l=e.data.id;break;case null:l=e.children&&e.children[0]?e.children[0].data.id:null;break;case 1:l=n[r+1]?n[r+1].data.id:null;break}this.$apollo.mutate({mutation:H`mutation ($input: PageInput!, $parent: ID, $ref: ID) {
            addPage(input: $input, parent: $parent, ref: $ref) {
              id
            }
          }`,variables:{input:a,parent:s?s.data.id:null,ref:l}}).then(i=>{if(i.errors)throw i.errors;a.id=i.data.addPage.id,(t!==null||e.open)&&this.$refs.tree.add(a,s,t!==null?r+t:0),s&&(s.data.has=!0),this.invalidate()}).catch(i=>{this.messages.add("Error inserting page","error"),this.$log("PageList::insert(): Error inserting page",i)})},invalidate(){const e=this.$apollo.provider.defaultClient.cache;e.evict({id:"ROOT_QUERY",fieldName:"pages"}),e.gc()},keep(e){if(!this.auth.can("page:keep")){this.messages.add("Permission denied","error");return}const t=e?[e]:this.$refs.tree.statsFlat.filter(r=>r.check&&r.data.id&&r.data.deleted_at),n=t.filter(r=>t.indexOf(r.parent)===-1),s=e.data.deleted_at||null;n.length&&this.$apollo.mutate({mutation:H`mutation ($id: [ID!]!) {
            keepPage(id: $id) {
              id
            }
          }`,variables:{id:n.map(r=>r.data.id)}}).then(r=>{if(r.errors)throw r.errors;for(const a of n)this.update(a,l=>{s>=l.data.deleted_at&&(l.data.deleted_at=null,l.check=!1)});this.invalidate()}).catch(r=>{this.messages.add("Error restoring page","error"),this.$log("PageList::keep(): Error restoring page",n,r)})},load(e,t){!e.open&&!t.children&&(e.loading=!0,this.fetch(t.id,e.page?e.page+1:1).then(n=>{this.$refs.tree.addMulti(n.data,e,0),e.page=n.currentPage||1}).finally(()=>{e.loading=!1})),e.open=!e.open},move(e,t=null){if(!this.auth.can("page:move")){this.messages.add("Permission denied","error");return}const n=this.$refs.tree.getSiblings(e),s=t!==null?e.parent:e,r=n.indexOf(e);let a=null;switch(t){case 0:a=e.data.id;break;case null:a=e.children&&e.children[0]?e.children[0].data.id:null;break;case 1:a=n[r+1]?n[r+1].data.id:null;break}this.$apollo.mutate({mutation:H`mutation ($id: ID!, $parent: ID, $ref: ID) {
            movePage(id: $id, parent: $parent, ref: $ref) {
              id
            }
          }`,variables:{id:this.clip.node.id,parent:s?s.data.id:null,ref:a}}).then(l=>{var h;if(l.errors)throw l.errors;const i=t!==null?r<this.$refs.tree.getSiblings(e).indexOf(this.clip.stat)?r+t:r:0;this.$refs.tree.move(this.clip.stat,s,i),s&&((h=this.clip.stat.children)!=null&&h.length||(e.parent.data.has=!1),s.data.has=!0),this.invalidate()}).catch(l=>{this.messages.add("Error moving page","error"),this.$log("PageList::move(): Error moving page",e,t,l)}),this.show()},paste(e,t=null){if(!this.auth.can("page:add")){this.messages.add("Permission denied","error");return}const n=this.$refs.tree.getSiblings(e),s=t!==null?e.parent:e,r=n.indexOf(e),a={...this.clip.node};let l=null;switch(t){case 0:l=e.data.id;break;case null:l=e.children&&e.children[0]?e.children[0].data.id:null;break;case 1:l=n[r+1]?n[r+1].data.id:null;break}return this.$apollo.query({query:H`query($id: ID!) {
            page(id: $id) {
              meta
              config
              content
              files {
                id
              }
              elements {
                id
              }
            }
          }`,variables:{id:a.id}}).then(i=>{var h,o,c,m,f,g,y,D,x,N;if(i.errors)throw i.errors;this.$apollo.mutate({mutation:H`mutation ($input: PageInput!, $parent: ID, $ref: ID, $elements: [ID!], $files: [ID!]) {
              addPage(input: $input, parent: $parent, ref: $ref, elements: $elements, files: $files) {
                ${this.fields()}
              }
            }`,variables:{input:{status:0,to:a.to,tag:a.tag,type:a.type,theme:a.theme,lang:a.lang,name:a.name,title:a.title,cache:a.cache,domain:a.domain,related_id:a.id,meta:((o=(h=i==null?void 0:i.data)==null?void 0:h.page)==null?void 0:o.meta)||"{}",config:((m=(c=i==null?void 0:i.data)==null?void 0:c.page)==null?void 0:m.config)||"{}",content:((g=(f=i==null?void 0:i.data)==null?void 0:f.page)==null?void 0:g.content)||"[]",path:a.path+"_"+Math.floor(Math.random()*1e4)},parent:s?s.data.id:null,ref:l,elements:((D=(y=i==null?void 0:i.data)==null?void 0:y.page)==null?void 0:D.elements.map(U=>U.id))||[],files:((N=(x=i==null?void 0:i.data)==null?void 0:x.page)==null?void 0:N.files.map(U=>U.id))||[]}}).then(U=>{if(U.errors)throw U.errors;if(!U.data.addPage)throw new Error("No page data returned");const Q=t!==null?this.$refs.tree.getSiblings(e).indexOf(e)+t:0,F=U.data.addPage;this.$refs.tree.add(F,s,Q),this.invalidate()}).catch(U=>{this.messages.add("Error copying page","error"),this.$log("PageList::paste(): Error copying page",e,t,U)})}).catch(i=>{this.messages.add("Error fetching page","error"),this.$log("PageList::paste(): Error fetching page",a.id,i)})},publish(e){if(!this.auth.can("page:publish")){this.messages.add("Permission denied","error");return}const t=e?[e]:this.$refs.tree.statsFlat.filter(n=>n.check&&n.data.id&&!n.data.published);t.length&&this.$apollo.mutate({mutation:H`mutation ($id: [ID!]!) {
            pubPage(id: $id) {
              id
            }
          }`,variables:{id:t.map(n=>n.data.id)}}).then(n=>{if(n.errors)throw n.errors;for(const s of t)s.data.published=!0,s.check=!1;this.invalidate()}).catch(n=>{this.messages.add("Error publishing page","error"),this.$log("PageList::publish(): Error publishing page",t,n)})},purge(e){if(!this.auth.can("page:purge")){this.messages.add("Permission denied","error");return}const t=e?[e]:this.$refs.tree.statsFlat.filter(n=>n.check&&n.data.id);t.length&&this.$apollo.mutate({mutation:H`mutation ($id: [ID!]!) {
            purgePage(id: $id) {
              id
            }
          }`,variables:{id:t.map(n=>n.data.id).reverse()}}).then(n=>{var s;if(n.errors)throw n.errors;for(const r of t)this.$refs.tree.remove(r),r.parent&&!((s=r.parent.children)!=null&&s.length)&&(r.parent.data.has=!1)}).catch(n=>{this.messages.add("Error purging page","error"),this.$log("PageList::purge(): Error purging page",t,n)})},search(e=1,t=100){if(!this.auth.can("page:view"))return this.messages.add("Permission denied","error"),Promise.resolve([]);const n=this.filter.publish||null,s=this.filter.trashed||"WITHOUT",r={...this.filter};return delete r.trashed,delete r.publish,this.term&&(r.any=this.term),this.$apollo.query({query:H`query($filter: PageFilter, $limit: Int!, $page: Int!, $trashed: Trashed, $publish: Publish) {
            pages(filter: $filter, first: $limit, page: $page, trashed: $trashed, publish: $publish) {
              data {
                ${this.fields()}
              }
              paginatorInfo {
                currentPage
                lastPage
              }
            }
          }`,variables:{filter:r,page:e,limit:t,trashed:s,publish:n}}).then(a=>{if(a.errors)throw a.errors;return this.transform(a.data.pages)}).catch(a=>{this.messages.add("Error searching pages","error"),this.$log("PageList::search(): Error searching pages",e,t,a)})},show(e=null){e===null?this.menu={}:this.menu[e]?this.menu[e]=!1:(this.menu={},this.menu[e]=!0)},status(e,t){if(!this.auth.can("page:save")){this.messages.add("Permission denied","error");return}(e?[e]:this.$refs.tree.statsFlat.filter(s=>s.check&&s.data.id)).forEach(s=>{this.$apollo.mutate({mutation:H`mutation ($id: ID!, $input: PageInput!) {
              savePage(id: $id, input: $input) {
                id
              }
            }`,variables:{id:s.data.id,input:{status:t}}}).then(r=>{if(r.errors)throw r.errors;s.data.status=t}).catch(r=>{this.messages.add("Error saving page","error"),this.$log("PageList::status(): Error saving page",s,t,r)})})},title(e){const t=[];return e.publish_at&&t.push("Publish at: "+new Date(e.publish_at).toLocaleDateString()),e.theme&&t.push("Theme: "+e.theme),e.type&&t.push("Page type: "+e.type),e.tag&&t.push("Tag: "+e.tag),e.cache&&t.push("Cache: "+e.cache+" min"),t.join(`
`)},toggle(){this.$refs.tree.statsFlat.forEach(e=>{e.check=!e.check})},transform(e){return{data:e.data.map(n=>{var r,a,l,i,h;const s=(r=n.latest)!=null&&r.data?JSON.parse(n.latest.data):{...n};return Object.assign(s,{id:n.id,has:n.has,parent_id:n.parent_id,deleted_at:n.deleted_at,created_at:n.created_at,updated_at:((a=n.latest)==null?void 0:a.created_at)||n.updated_at,editor:((l=n.latest)==null?void 0:l.editor)||n.editor,published:((i=n.latest)==null?void 0:i.published)??!0,publish_at:((h=n.latest)==null?void 0:h.publish_at)||null,latest:n.latest})}),currentPage:e.paginatorInfo.currentPage,lastPage:e.paginatorInfo.lastPage}},update(e,t){var n;if(typeof t!="function")throw new Error("Second paramter must be a function");t(e),(n=e.children)==null||n.forEach(s=>{t(s,t)})},url(e){return this.app.urlpage.replace(/:domain/,e.domain||"").replace(/:path/,e.path||"").replace(/\/+$/,"/")}},watch:{filter:{deep:!0,handler(e){this.items=[],this.loading=!0,(e.publish?this.search():this.fetch()).then(n=>{this.items=n.data,this.loading=!1})}},term:{handler(){this.items=[],this.loading=!0,(this.term?this.searchd():this.fetch()).then(t=>{this.items=t.data,this.loading=!1})}}}},ra={class:"header"},la={class:"bulk"},oa={class:"search"},da={key:0,class:"spinner",width:"24",height:"24",viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg"},ua=["title"],ca=["onClick"],ha={key:1,class:"item-lang"},fa={class:"item-title"},ma={key:2,class:"item-subtitle"},pa=["href"],ga={class:"item-domain"},va={class:"item-path item-subtitle"},ya={key:0,class:"item-to item-subtitle"},ba={key:0,class:"loading"},ka={key:1,class:"notfound"},_a={key:2,class:"btn-group"};function Ca(e,t,n,s,r,a){const l=T("Draggable");return p(),P(j,null,[I("div",ra,[I("div",la,[u(Qe,{modelValue:r.checked,"onUpdate:modelValue":t[0]||(t[0]=i=>r.checked=i),onClick:t[1]||(t[1]=ue(i=>a.toggle(),["stop"]))},null,8,["modelValue"]),u(Pe,null,{activator:d(({props:i})=>[u(b,Ce({"append-icon":"mdi-menu-down",variant:"text"},i),{default:d(()=>t[15]||(t[15]=[C("Actions")])),_:2,__:[15]},1040)]),default:d(()=>[u(Oe,null,{default:d(()=>[a.isChecked&&s.auth.can("page:publish")?(p(),v(V,{key:0},{default:d(()=>[u(b,{"prepend-icon":"mdi-publish",variant:"text",onClick:t[2]||(t[2]=i=>a.publish())},{default:d(()=>t[16]||(t[16]=[C("Publish")])),_:1,__:[16]})]),_:1})):_("",!0),a.isChecked&&s.auth.can("page:save")?(p(),v(V,{key:1},{default:d(()=>[u(b,{"prepend-icon":"mdi-eye",variant:"text",onClick:t[3]||(t[3]=i=>a.status(null,1))},{default:d(()=>t[17]||(t[17]=[C("Enable")])),_:1,__:[17]})]),_:1})):_("",!0),a.isChecked&&s.auth.can("page:save")?(p(),v(V,{key:2},{default:d(()=>[u(b,{"prepend-icon":"mdi-eye-off",variant:"text",onClick:t[4]||(t[4]=i=>a.status(null,0))},{default:d(()=>t[18]||(t[18]=[C("Disable")])),_:1,__:[18]})]),_:1})):_("",!0),u(ke),a.canTrash&&s.auth.can("page:drop")?(p(),v(V,{key:3},{default:d(()=>[u(b,{"prepend-icon":"mdi-delete",variant:"text",onClick:t[5]||(t[5]=i=>a.drop())},{default:d(()=>t[19]||(t[19]=[C("Trash")])),_:1,__:[19]})]),_:1})):_("",!0),a.isTrashed&&s.auth.can("page:keep")?(p(),v(V,{key:4},{default:d(()=>[u(b,{"prepend-icon":"mdi-delete-restore",variant:"text",onClick:t[6]||(t[6]=i=>a.keep())},{default:d(()=>t[20]||(t[20]=[C("Restore")])),_:1,__:[20]})]),_:1})):_("",!0),a.isChecked&&s.auth.can("page:purge")?(p(),v(V,{key:5},{default:d(()=>[u(b,{"prepend-icon":"mdi-delete-forever",variant:"text",onClick:t[7]||(t[7]=i=>a.purge())},{default:d(()=>t[21]||(t[21]=[C("Purge")])),_:1,__:[21]})]),_:1})):_("",!0)]),_:1})]),_:1})]),I("div",oa,[u(de,{modelValue:r.term,"onUpdate:modelValue":t[8]||(t[8]=i=>r.term=i),"prepend-inner-icon":"mdi-magnify",variant:"underlined",label:"Search for","hide-details":"",clearable:""},null,8,["modelValue"])])]),u(l,{modelValue:r.items,"onUpdate:modelValue":t[12]||(t[12]=i=>r.items=i),ref:"tree",defaultOpen:!1,disableDrag:!s.auth.can("page:move"),watermark:!1,virtualization:"",onChange:t[13]||(t[13]=i=>a.change())},{default:d(({node:i,stat:h})=>[h.loading?(p(),P("svg",da,t[22]||(t[22]=[I("circle",{class:"spin1",cx:"4",cy:"12",r:"3"},null,-1),I("circle",{class:"spin1 spin2",cx:"12",cy:"12",r:"3"},null,-1),I("circle",{class:"spin1 spin3",cx:"20",cy:"12",r:"3"},null,-1)]))):(p(),v(we,{key:1,class:K({hidden:!i.has}),size:"large",onClick:o=>a.load(h,i),icon:h.open?"mdi-menu-down":"mdi-menu-right"},null,8,["class","onClick","icon"])),u(Qe,{modelValue:h.check,"onUpdate:modelValue":o=>h.check=o,class:K({draft:!i.published})},null,8,["modelValue","onUpdate:modelValue","class"]),i.id?(p(),v(Pe,{key:2},{activator:d(({props:o})=>[u(b,Ce({icon:"mdi-dots-vertical",variant:"text"},o),null,16)]),default:d(()=>[u(Oe,null,{default:d(()=>[!i.deleted_at&&!i.published&&s.auth.can("page:publish")?(p(),v(V,{key:0},{default:d(()=>[u(b,{"prepend-icon":"mdi-publish",variant:"text",onClick:o=>a.publish(h)},{default:d(()=>t[23]||(t[23]=[C("Publish")])),_:2,__:[23]},1032,["onClick"])]),_:2},1024)):_("",!0),i.status!==0&&s.auth.can("page:save")?(p(),v(V,{key:1},{default:d(()=>[u(b,{"prepend-icon":"mdi-eye-off",variant:"text",onClick:o=>a.status(h,0)},{default:d(()=>t[24]||(t[24]=[C("Disable")])),_:2,__:[24]},1032,["onClick"])]),_:2},1024)):_("",!0),i.status!==1&&s.auth.can("page:save")?(p(),v(V,{key:2},{default:d(()=>[u(b,{"prepend-icon":"mdi-eye",variant:"text",onClick:o=>a.status(h,1)},{default:d(()=>t[25]||(t[25]=[C("Enable")])),_:2,__:[25]},1032,["onClick"])]),_:2},1024)):_("",!0),i.status!==2&&s.auth.can("page:save")?(p(),v(V,{key:3},{default:d(()=>[u(b,{"prepend-icon":"mdi-eye-off-outline",variant:"text",onClick:o=>a.status(h,2)},{default:d(()=>t[26]||(t[26]=[C("Hide in menu")])),_:2,__:[26]},1032,["onClick"])]),_:2},1024)):_("",!0),u(ke),s.auth.can("page:move")?(p(),v(V,{key:4},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-cut",variant:"text",onClick:o=>a.cut(h,i)},{default:d(()=>t[27]||(t[27]=[C("Cut")])),_:2,__:[27]},1032,["onClick"])]),_:2},1024)):_("",!0),!this.embed&&s.auth.can("page:add")?(p(),v(V,{key:5},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-copy",variant:"text",onClick:o=>a.copy(h,i)},{default:d(()=>t[28]||(t[28]=[C("Copy")])),_:2,__:[28]},1032,["onClick"])]),_:2},1024)):_("",!0),r.clip&&r.clip.type=="copy"&&!this.embed&&s.auth.can("page:add")?(p(),v(V,{key:6},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:t[9]||(t[9]=ue(o=>a.show("paste"),["stop"]))},{default:d(()=>t[29]||(t[29]=[C("Paste")])),_:1,__:[29]})]),_:1})):_("",!0),r.clip&&r.clip.type=="copy"&&r.menu.paste&&!this.embed&&s.auth.can("page:add")?(p(),v(re,{key:7},{default:d(()=>[u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:o=>a.paste(h,0)},{default:d(()=>t[30]||(t[30]=[C(" Before")])),_:2,__:[30]},1032,["onClick"])]),_:2},1024)]),_:2},1024)):_("",!0),r.clip&&r.clip.type=="copy"&&r.menu.paste&&!this.embed&&s.auth.can("page:add")?(p(),v(re,{key:8},{default:d(()=>[u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:o=>a.paste(h)},{default:d(()=>t[31]||(t[31]=[C(" Into")])),_:2,__:[31]},1032,["onClick"])]),_:2},1024)]),_:2},1024)):_("",!0),r.clip&&r.clip.type=="copy"&&r.menu.paste&&!this.embed&&s.auth.can("page:add")?(p(),v(re,{key:9},{default:d(()=>[u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:o=>a.paste(h,1)},{default:d(()=>t[32]||(t[32]=[C(" After")])),_:2,__:[32]},1032,["onClick"])]),_:2},1024)]),_:2},1024)):_("",!0),r.clip&&r.clip.type=="cut"&&s.auth.can("page:move")?(p(),v(V,{key:10},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:t[10]||(t[10]=ue(o=>a.show("move"),["stop"]))},{default:d(()=>t[33]||(t[33]=[C("Paste")])),_:1,__:[33]})]),_:1})):_("",!0),r.clip&&r.clip.type=="cut"&&r.menu.move&&s.auth.can("page:move")?(p(),v(re,{key:11},{default:d(()=>[u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:o=>a.move(h,0)},{default:d(()=>t[34]||(t[34]=[C(" Before")])),_:2,__:[34]},1032,["onClick"])]),_:2},1024)]),_:2},1024)):_("",!0),r.clip&&r.clip.type=="cut"&&r.menu.move&&s.auth.can("page:move")?(p(),v(re,{key:12},{default:d(()=>[u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:o=>a.move(h)},{default:d(()=>t[35]||(t[35]=[C(" Into")])),_:2,__:[35]},1032,["onClick"])]),_:2},1024)]),_:2},1024)):_("",!0),r.clip&&r.clip.type=="cut"&&r.menu.move&&s.auth.can("page:move")?(p(),v(re,{key:13},{default:d(()=>[u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:o=>a.move(h,1)},{default:d(()=>t[36]||(t[36]=[C(" After")])),_:2,__:[36]},1032,["onClick"])]),_:2},1024)]),_:2},1024)):_("",!0),!this.embed&&s.auth.can("page:add")?(p(),v(V,{key:14},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:t[11]||(t[11]=ue(o=>a.show("insert"),["stop"]))},{default:d(()=>t[37]||(t[37]=[C("Insert")])),_:1,__:[37]})]),_:1})):_("",!0),r.menu.insert&&!this.embed&&s.auth.can("page:add")?(p(),v(re,{key:15},{default:d(()=>[u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:o=>a.insert(h,0)},{default:d(()=>t[38]||(t[38]=[C(" Before")])),_:2,__:[38]},1032,["onClick"])]),_:2},1024)]),_:2},1024)):_("",!0),r.menu.insert&&!this.embed&&s.auth.can("page:add")?(p(),v(re,{key:16},{default:d(()=>[u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:o=>a.insert(h)},{default:d(()=>t[39]||(t[39]=[C(" Into")])),_:2,__:[39]},1032,["onClick"])]),_:2},1024)]),_:2},1024)):_("",!0),r.menu.insert&&!this.embed&&s.auth.can("page:add")?(p(),v(re,{key:17},{default:d(()=>[u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:o=>a.insert(h,1)},{default:d(()=>t[40]||(t[40]=[C(" After")])),_:2,__:[40]},1032,["onClick"])]),_:2},1024)]),_:2},1024)):_("",!0),u(ke),!i.deleted_at&&s.auth.can("page:drop")?(p(),v(V,{key:18},{default:d(()=>[u(b,{"prepend-icon":"mdi-delete",variant:"text",onClick:o=>a.drop(h)},{default:d(()=>t[41]||(t[41]=[C("Trash")])),_:2,__:[41]},1032,["onClick"])]),_:2},1024)):_("",!0),i.deleted_at&&s.auth.can("page:keep")?(p(),v(V,{key:19},{default:d(()=>[u(b,{"prepend-icon":"mdi-delete-restore",variant:"text",onClick:o=>a.keep(h)},{default:d(()=>t[42]||(t[42]=[C("Restore")])),_:2,__:[42]},1032,["onClick"])]),_:2},1024)):_("",!0),s.auth.can("page:purge")?(p(),v(V,{key:20},{default:d(()=>[u(b,{"prepend-icon":"mdi-delete-forever",variant:"text",onClick:o=>a.purge(h)},{default:d(()=>t[43]||(t[43]=[C("Purge")])),_:2,__:[43]},1032,["onClick"])]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024)):_("",!0),I("div",{class:K(["item-content",{"status-hidden":i.status==2,"status-enabled":i.status==1,"status-disabled":!i.status,trashed:i.deleted_at}]),title:a.title(i)},[I("div",{class:"item-text",onClick:o=>e.$emit("select",i)},[i.publish_at?(p(),v(we,{key:0,class:"publish-at",icon:"mdi-clock-outline"})):_("",!0),i.lang?(p(),P("span",ha,A(i.lang),1)):_("",!0),I("span",fa,A(i.name||"New"),1),i.title?(p(),P("div",ma,A(i.title),1)):_("",!0)],8,ca),I("a",{class:"item-aux",href:a.url(i),target:"_blank",draggable:"false"},[I("div",ga,A(i.domain),1),I("span",va,A(a.url(i)),1),i.to?(p(),P("span",ya,"  "+A(i.to),1)):_("",!0)],8,pa)],10,ua)]),_:1},8,["modelValue","disableDrag"]),r.loading?(p(),P("p",ba,t[44]||(t[44]=[C(" Loading "),I("svg",{class:"spinner",width:"32",height:"32",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[I("circle",{class:"spin1",cx:"4",cy:"12",r:"3"}),I("circle",{class:"spin1 spin2",cx:"12",cy:"12",r:"3"}),I("circle",{class:"spin1 spin3",cx:"20",cy:"12",r:"3"})],-1)]))):_("",!0),!r.loading&&!r.items.length?(p(),P("p",ka," No items found ")):_("",!0),!r.loading&&!r.items.length&&!this.embed&&this.auth.can("page:add")?(p(),P("div",_a,[u(b,{onClick:t[14]||(t[14]=i=>a.add()),icon:"mdi-folder-plus",color:"primary",elevation:"0"})])):_("",!0)],64)}const wa=G(ia,[["render",Ca]]),Da={data:()=>({active:{},open:[0,1,2]}),setup(){const e=wt(),t=Ke();return{drawer:e,side:t}},computed:{stores(){const e=Object.keys(this.side.store).sort(),t={};for(const n of e)t[n]=this.side.store[n];return t}},methods:{isActive(e,t){return typeof this.active[e]>"u"&&(this.active[e]={}),typeof this.active[e][t]>"u"&&(this.active[e][t]=!1),this.active[e][t]},sort(e){const t=Object.keys(e).sort(),n={};for(const s of t)n[s]=e[s];return n},toggle(e,t){this.side.toggle(e,t),this.active[e][t]=!this.active[e][t]}}},Ea={class:"name"},Sa={class:"value"};function Pa(e,t,n,s,r,a){return p(),v(rn,{modelValue:s.drawer.aside,"onUpdate:modelValue":t[1]||(t[1]=l=>s.drawer.aside=l),"mobile-breakpoint":"md",location:"end"},{default:d(()=>[u(Oe,{opened:e.open,"onUpdate:opened":t[0]||(t[0]=l=>e.open=l)},{default:d(()=>[(p(!0),P(j,null,ee(a.stores,(l,i)=>he((p(),v(ln,{key:i,value:Object.keys(a.stores).indexOf(i)},{activator:d(({props:h})=>[u(V,Ce({ref_for:!0},h),{default:d(()=>[C(A(i),1)]),_:2},1040)]),default:d(()=>[(p(!0),P(j,null,ee(l,(h,o)=>(p(),v(V,{key:o,active:a.isActive(i,o),onClick:c=>a.toggle(i,o),rounded:"lg"},{default:d(()=>[I("span",Ea,A(o),1),I("span",Sa,A(h),1)]),_:2},1032,["active","onClick"]))),128))]),_:2},1032,["value"])),[[rt,Object.keys(l).length]])),128))]),_:1},8,["opened"])]),_:1},8,["modelValue"])}const Oa=G(Da,[["render",Pa],["__scopeId","data-v-b089c62f"]]),Va={components:{Fields:ut,SchemaItems:Vt},props:{item:{type:Object,required:!0},assets:{type:Object,default:()=>{}}},emits:["change","error"],data:()=>({vschemas:!1,panel:[]}),setup(){const e=He(),t=Me(),n=Ke();return{auth:fe(),messages:e,schemas:t,side:n}},computed:{available(){return Object.keys(this.schemas).length}},methods:{add(e){if(this.item.meta||(this.item.meta={}),this.item.meta[e.type]){this.messages.add("Element is already available","error");return}this.item.meta[e.type]={id:xe(),type:e.type,data:{}},this.panel.push(Object.keys(this.item.meta).length-1),this.vschemas=!1},error(e,t){e._error=t,this.$emit("error",Object.values(this.item.meta||{}).some(n=>n._error)),this.store()},fields(e){var t,n;return(t=this.schemas.meta[e])!=null&&t.fields?(n=this.schemas.meta[e])==null?void 0:n.fields:(console.warn(`No definition of fields for "${e}" available`),[])},remove(e){delete this.item.meta[e]},reset(){Object.values(this.item.meta||{}).forEach(e=>{delete e._changed,delete e._error})},shown(e){const t=this.side.shown("state","valid"),n=this.side.shown("state","error"),s=this.side.shown("state","changed");return this.side.shown("type",e.type)&&(n&&e._error||s&&e._changed||t&&!e._error&&!e._changed)},store(e=!0){if(!e)return;const t={},n={};for(const s of Object.values(this.item.meta||{}))s.type&&(t[s.type]=(t[s.type]||0)+1),!s._changed&&!s._error&&(n.valid=(n.valid||0)+1),s._changed&&(n.changed=(n.changed||0)+1),s._error&&(n.error=(n.error||0)+1);this.side.store={type:t,state:n}},title(e){var t,n;return(((t=e.data)==null?void 0:t.title)||((n=e.data)==null?void 0:n.text)||Object.values(e.data||{}).map(s=>s&&typeof s!="object"&&typeof s!="boolean"?s:null).filter(s=>!!s).join(" - ")).substring(0,50)||""},update(e){e._changed=!0,this.$emit("change",!0),this.store()},validate(){var t;const e=[];return(t=this.$refs.field)==null||t.forEach(n=>{e.push(n.validate())}),Promise.all(e).then(n=>n.every(s=>s))}}},xa={class:"element-title"},Ia={class:"element-type"},Ta={key:0,class:"btn-group"};function La(e,t,n,s,r,a){const l=T("Fields"),i=T("SchemaItems"),h=lt("observe-visibility");return p(),P(j,null,[he((p(),v(Ie,null,{default:d(()=>[u(Te,null,{default:d(()=>[u(Dt,{class:"list",modelValue:e.panel,"onUpdate:modelValue":t[0]||(t[0]=o=>e.panel=o),elevation:"0",multiple:""},{default:d(()=>[(p(!0),P(j,null,ee(n.item.meta||{},(o,c)=>he((p(),v(Et,{key:c,class:K({changed:o._changed,error:o._error})},{default:d(()=>[u(St,{"expand-icon":"mdi-pencil"},{default:d(()=>[s.auth.can("page:save")?(p(),v(b,{key:0,icon:"mdi-delete",variant:"text",onClick:m=>a.remove(c)},null,8,["onClick"])):_("",!0),I("div",xa,A(a.title(o)),1),I("div",Ia,A(o.type),1)]),_:2},1024),u(Pt,null,{default:d(()=>[u(l,{ref_for:!0,ref:"field",data:o.data,"onUpdate:data":m=>o.data=m,files:o.files,"onUpdate:files":m=>o.files=m,readonly:!s.auth.can("page:save"),fields:a.fields(o.type),assets:n.assets,onError:m=>a.error(o,m),onChange:m=>a.update(o)},null,8,["data","onUpdate:data","files","onUpdate:files","readonly","fields","assets","onError","onChange"])]),_:2},1024)]),_:2},1032,["class"])),[[rt,a.shown(o)]])),128))]),_:1},8,["modelValue"]),a.available&&s.auth.can("page:save")?(p(),P("div",Ta,[u(b,{icon:"mdi-view-grid-plus",color:"primary",onClick:t[1]||(t[1]=o=>e.vschemas=!0),elevation:"0"})])):_("",!0)]),_:1})]),_:1})),[[h,a.store]]),(p(),v(Ve,{to:"body"},[u(ot,{modelValue:e.vschemas,"onUpdate:modelValue":t[3]||(t[3]=o=>e.vschemas=o),scrollable:"",width:"auto"},{default:d(()=>[u(i,{type:"meta",onAdd:t[2]||(t[2]=o=>a.add(o))})]),_:1},8,["modelValue"])]))],64)}const Na=G(Va,[["render",La],["__scopeId","data-v-6f0b9495"]]),Ua={props:{item:{type:Object,required:!0},assets:{type:Object,default:()=>{}}},emits:["change","error"],data:()=>({errors:{}}),setup(){const e=it(),t=Bt(),n=Ke(),s=fe();return{app:Ct(),auth:s,side:n,config:t,languages:e}},computed:{langs(){const e=[{code:null,name:"None"}];return Object.entries(this.languages.available).forEach(t=>{e.push({code:t[0],name:t[1]})}),e},readonly(){return!this.auth.can("page:save")}},methods:{reset(){this.errors={}},store(e=!0){e&&this.validate().then(t=>{let n={};t!==!0&&(n={error:t}),this.side.store={state:n}})},update(e,t){this.item[e]=t,this.$emit("change",!0),this.validate(),this.store()},updatePath(e){var t,n,s;!e&&((t=this.item.path)==null?void 0:t.at(0))==="_"&&(this.item.path=(s=(n=this.item.name)==null?void 0:n.replace(/[ ]+/g,"-"))==null?void 0:s.toLowerCase())},async validate(){await this.$nextTick();const e=[];return Object.values(this.$refs).forEach(t=>{e.push(t.validate())}),Promise.all(e).then(t=>{const n=t.reduce((s,r)=>s+r.length,0);return this.$emit("error",!!n),n||!0})}},watch:{item:{deep:!0,immediate:!0,handler(e){this.validate()}}}};function $a(e,t,n,s,r,a){const l=lt("observe-visibility");return he((p(),v(Ie,null,{default:d(()=>[u(Te,null,{default:d(()=>[u(Ye,null,{default:d(()=>[u(ge,{cols:"12",md:"6"},{default:d(()=>[u(Ne,{ref:"status",items:[{key:0,val:"Disabled"},{key:1,val:"Enabled"},{key:2,val:"Hidden in navigation"}],readonly:a.readonly,modelValue:n.item.status,"onUpdate:modelValue":t[0]||(t[0]=i=>a.update("status",i)),variant:"underlined","item-title":"val","item-value":"key",label:"Status"},null,8,["readonly","modelValue"])]),_:1}),u(ge,{cols:"12",md:"6"},{default:d(()=>[u(Ne,{ref:"lang",items:a.langs,readonly:a.readonly,modelValue:n.item.lang,"onUpdate:modelValue":t[1]||(t[1]=i=>a.update("lang",i)),variant:"underlined","item-title":"name","item-value":"code",label:"Language"},null,8,["items","readonly","modelValue"])]),_:1})]),_:1}),u(Ye,null,{default:d(()=>[u(ge,{cols:"12",md:"6"},{default:d(()=>[u(de,{ref:"name",rules:[i=>!!i||"The field is required"],readonly:a.readonly,modelValue:n.item.name,"onUpdate:modelValue":t[2]||(t[2]=i=>a.update("name",i)),"onUpdate:focused":t[3]||(t[3]=i=>a.updatePath(i)),variant:"underlined",label:"Page name",counter:"255",maxlength:"255"},null,8,["rules","readonly","modelValue"]),u(de,{ref:"title",readonly:a.readonly,modelValue:n.item.title,"onUpdate:modelValue":t[4]||(t[4]=i=>a.update("title",i)),variant:"underlined",label:"Page title",counter:"255",maxlength:"255"},null,8,["readonly","modelValue"])]),_:1}),u(ge,{cols:"12",md:"6"},{default:d(()=>[u(de,{ref:"path",rules:[i=>!!i||"The field is required"],readonly:a.readonly,modelValue:n.item.path,"onUpdate:modelValue":t[5]||(t[5]=i=>a.update("path",i)),variant:"underlined",label:"URL path",counter:"255",maxlength:"255"},null,8,["rules","readonly","modelValue"]),u(de,{ref:"domain",readonly:a.readonly,modelValue:n.item.domain,"onUpdate:modelValue":t[6]||(t[6]=i=>a.update("domain",i)),variant:"underlined",label:"Domain",counter:"255",maxlength:"255"},null,8,["readonly","modelValue"])]),_:1})]),_:1}),u(Ye,null,{default:d(()=>[u(ge,{cols:"12",md:"6"},{default:d(()=>[u(Ne,{ref:"theme",readonly:a.readonly,items:Object.keys(s.config.get("themes",{default:""})),modelValue:n.item.theme,"onUpdate:modelValue":t[7]||(t[7]=i=>{a.update("theme",i),n.item.type=""}),variant:"underlined",label:"Theme"},null,8,["readonly","items","modelValue"]),u(Ne,{ref:"type",readonly:a.readonly,items:Object.keys(s.config.get(`themes.${n.item.theme||""}.types`,{default:""})),modelValue:n.item.type,"onUpdate:modelValue":t[8]||(t[8]=i=>a.update("type",i)),variant:"underlined",label:"Page type"},null,8,["readonly","items","modelValue"])]),_:1}),u(ge,{cols:"12",md:"6"},{default:d(()=>[u(de,{ref:"tag",modelValue:n.item.tag,"onUpdate:modelValue":[t[9]||(t[9]=i=>n.item.tag=i),t[10]||(t[10]=i=>a.update())],readonly:a.readonly,label:"Page tag",variant:"underlined",counter:"30",maxlength:"30"},null,8,["modelValue","readonly"]),u(Ne,{ref:"cache",items:[{key:0,val:"No cache"},{key:1,val:"1 minute"},{key:5,val:"5 minutes"},{key:15,val:"15 minutes"},{key:30,val:"30 minutes"},{key:60,val:"1 hour"},{key:180,val:"3 hours"},{key:360,val:"6 hours"},{key:720,val:"12 hours"},{key:1440,val:"24 hours"}],readonly:a.readonly,modelValue:n.item.cache,"onUpdate:modelValue":t[11]||(t[11]=i=>a.update("cache",i)),variant:"underlined",label:"Cache time","item-title":"val","item-value":"key"},null,8,["readonly","modelValue"])]),_:1})]),_:1}),u(Ye,null,{default:d(()=>[u(ge,{cols:"12"},{default:d(()=>[u(de,{ref:"to",rules:[i=>!i||i.match("^((https?:)?//([^\\s/:@]+(:[^\\s/:@]+)?@)?([0-9a-z]+(\\.|-))*[0-9a-z]+\\.[a-z]{2,}(:[0-9]{1,5})?)?(/[^\\s]*)*$")!==null||"URL is not valid"],readonly:a.readonly,modelValue:n.item.to,"onUpdate:modelValue":t[12]||(t[12]=i=>a.update("to",i)),variant:"underlined",label:"Redirect URL",counter:"255",maxlength:"255"},null,8,["rules","readonly","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})),[[l,a.store]])}const Fa=G(Ua,[["render",$a]]),Aa={components:{Fields:ut,SchemaItems:Vt},props:{item:{type:Object,required:!0},assets:{type:Object,default:()=>{}}},emits:["change","error"],data:()=>({vschemas:!1,panel:[]}),setup(){const e=He(),t=Me(),n=Ke();return{auth:fe(),messages:e,schemas:t,side:n}},computed:{available(){return Object.keys(this.schemas).length}},methods:{add(e){if(this.item.config||(this.item.config={}),this.item.config[e.type]){this.messages.add("Element is already available","error");return}this.item.config[e.type]={id:xe(),type:e.type,data:{}},this.panel.push(Object.keys(this.item.config).length-1),this.vschemas=!1},error(e,t){e._error=t,this.$emit("error",Object.values(this.item.config||{}).some(n=>n._error)),this.store()},fields(e){var t,n;return(t=this.schemas.config[e])!=null&&t.fields?(n=this.schemas.config[e])==null?void 0:n.fields:(console.warn(`No definition of fields for "${e}" available`),[])},remove(e){delete this.item.config[e]},reset(){Object.values(this.item.config||{}).forEach(e=>{delete e._changed,delete e._error})},shown(e){const t=this.side.shown("state","valid"),n=this.side.shown("state","error"),s=this.side.shown("state","changed");return this.side.shown("type",e.type)&&(n&&e._error||s&&e._changed||t&&!e._error&&!e._changed)},store(e=!0){if(!e)return;const t={},n={};for(const s of Object.values(this.item.config||{}))s.type&&(t[s.type]=(t[s.type]||0)+1),!s._changed&&!s._error&&(n.valid=(n.valid||0)+1),s._changed&&(n.changed=(n.changed||0)+1),s._error&&(n.error=(n.error||0)+1);this.side.store={type:t,state:n}},title(e){var t,n;return(((t=e.data)==null?void 0:t.title)||((n=e.data)==null?void 0:n.text)||Object.values(e.data||{}).map(s=>s&&typeof s!="object"&&typeof s!="boolean"?s:null).filter(s=>!!s).join(" - ")).substring(0,50)||""},update(e){e._changed=!0,this.$emit("change",!0),this.store()},validate(){var t;const e=[];return(t=this.$refs.field)==null||t.forEach(n=>{e.push(n.validate())}),Promise.all(e).then(n=>n.every(s=>s))}}},ja={class:"element-title"},Ba={class:"element-type"},Ha={key:0,class:"btn-group"};function Ka(e,t,n,s,r,a){const l=T("Fields"),i=T("SchemaItems"),h=lt("observe-visibility");return p(),P(j,null,[he((p(),v(Ie,null,{default:d(()=>[u(Te,null,{default:d(()=>[u(Dt,{class:"list",modelValue:e.panel,"onUpdate:modelValue":t[0]||(t[0]=o=>e.panel=o),elevation:"0",multiple:""},{default:d(()=>[(p(!0),P(j,null,ee(n.item.config||{},(o,c)=>he((p(),v(Et,{key:c,class:K({changed:o._changed,error:o._error})},{default:d(()=>[u(St,{"expand-icon":"mdi-pencil"},{default:d(()=>[s.auth.can("page:save")?(p(),v(b,{key:0,icon:"mdi-delete",variant:"text",onClick:m=>a.remove(c)},null,8,["onClick"])):_("",!0),I("div",ja,A(a.title(o)),1),I("div",Ba,A(o.type),1)]),_:2},1024),u(Pt,null,{default:d(()=>[u(l,{ref_for:!0,ref:"field",data:o.data,"onUpdate:data":m=>o.data=m,files:o.files,"onUpdate:files":m=>o.files=m,readonly:!s.auth.can("page:save"),fields:a.fields(o.type),assets:n.assets,onError:m=>a.error(o,m),onChange:m=>a.update(o)},null,8,["data","onUpdate:data","files","onUpdate:files","readonly","fields","assets","onError","onChange"])]),_:2},1024)]),_:2},1032,["class"])),[[rt,a.shown(o)]])),128))]),_:1},8,["modelValue"]),a.available&&s.auth.can("page:save")?(p(),P("div",Ha,[u(b,{icon:"mdi-view-grid-plus",color:"primary",onClick:t[1]||(t[1]=o=>e.vschemas=!0),elevation:"0"})])):_("",!0)]),_:1})]),_:1})),[[h,a.store]]),(p(),v(Ve,{to:"body"},[u(ot,{modelValue:e.vschemas,"onUpdate:modelValue":t[3]||(t[3]=o=>e.vschemas=o),scrollable:"",width:"auto"},{default:d(()=>[u(i,{type:"config",onAdd:t[2]||(t[2]=o=>a.add(o))})]),_:1},8,["modelValue"])]))],64)}const Ma=G(Aa,[["render",Ka],["__scopeId","data-v-7f7f5f79"]]),qa={components:{PageDetailItemMeta:Na,PageDetailItemProps:Fa,PageDetailItemConfig:Ma},props:{item:{type:Object,required:!0},assets:{type:Object,default:()=>{}}},emits:["update:item","update:aside","error"],data:()=>({changed:{},errors:{},tab:"details"}),methods:{error(e,t){this.errors[e]=t,this.$emit("error",Object.values(this.errors).includes(!0))},reset(){var e,t,n;this.changed={},this.errors={},(e=this.$refs.props)==null||e.reset(),(t=this.$refs.meta)==null||t.reset(),(n=this.$refs.config)==null||n.reset()},update(e){this.changed[e]=!0,this.$emit("update:item",this.item)},validate(){const e=Object.values(this.$refs).map(t=>t.validate());return Promise.all(e).then(t=>t.every(n=>n))}}};function Ra(e,t,n,s,r,a){const l=T("PageDetailItemProps"),i=T("PageDetailItemMeta"),h=T("PageDetailItemConfig");return p(),v(Ie,null,{default:d(()=>[u(Te,{class:"box"},{default:d(()=>[u(dt,{class:"subtabs",modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=o=>e.tab=o),"align-tabs":"center"},{default:d(()=>[u(ce,{value:"details",class:K({changed:e.changed.details,error:e.errors.details}),onClick:t[0]||(t[0]=o=>e.$emit("update:aside","meta"))},{default:d(()=>t[11]||(t[11]=[C("Detail")])),_:1,__:[11]},8,["class"]),u(ce,{value:"meta",class:K({changed:e.changed.meta,error:e.errors.meta}),onClick:t[1]||(t[1]=o=>e.$emit("update:aside","count"))},{default:d(()=>t[12]||(t[12]=[C("Meta")])),_:1,__:[12]},8,["class"]),u(ce,{value:"config",class:K({changed:e.changed.config,error:e.errors.config}),onClick:t[2]||(t[2]=o=>e.$emit("update:aside","count"))},{default:d(()=>t[13]||(t[13]=[C("Config")])),_:1,__:[13]},8,["class"])]),_:1},8,["modelValue"]),u(Ot,{modelValue:e.tab,"onUpdate:modelValue":t[10]||(t[10]=o=>e.tab=o)},{default:d(()=>[u(_e,{value:"details"},{default:d(()=>[u(l,{ref:"props",item:n.item,assets:n.assets,onChange:t[4]||(t[4]=o=>a.update("details")),onError:t[5]||(t[5]=o=>a.error("details",o))},null,8,["item","assets"])]),_:1}),u(_e,{value:"meta"},{default:d(()=>[u(i,{ref:"meta",item:n.item,assets:n.assets,onChange:t[6]||(t[6]=o=>a.update("meta")),onError:t[7]||(t[7]=o=>a.error("meta",o))},null,8,["item","assets"])]),_:1}),u(_e,{value:"config"},{default:d(()=>[u(h,{ref:"config",item:n.item,assets:n.assets,onChange:t[8]||(t[8]=o=>a.update("config")),onError:t[9]||(t[9]=o=>a.error("config",o))},null,8,["item","assets"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const za=G(qa,[["render",Ra],["__scopeId","data-v-2dc7cec1"]]),Wa={components:{ElementListItems:fn,SchemaItems:Vt},props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","add"]};function Ja(e,t,n,s,r,a){const l=T("SchemaItems"),i=T("ElementListItems");return p(),v(ot,{modelValue:n.modelValue,"max-width":"1200",scrollable:""},{default:d(()=>[u(Ht,null,{append:d(()=>[u(we,{onClick:t[0]||(t[0]=h=>e.$emit("update:modelValue",!1))},{default:d(()=>t[3]||(t[3]=[C("mdi-close")])),_:1,__:[3]})]),title:d(()=>t[4]||(t[4]=[C(" Content Elements ")])),default:d(()=>[u(ke),u(Kt,null,{default:d(()=>[u(l,{type:"content",onAdd:t[1]||(t[1]=h=>e.$emit("add",h))}),u(dt,null,{default:d(()=>[u(ce,null,{default:d(()=>t[5]||(t[5]=[C("Shared elements")])),_:1,__:[5]})]),_:1}),u(i,{onSelect:t[2]||(t[2]=h=>e.$emit("add",h)),embed:""})]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Zt=G(Wa,[["render",Ja],["__scopeId","data-v-c6a0c11d"]]),Ya={components:{Fields:ut,SchemaDialog:Zt,VueDraggable:mn},props:{item:{type:Object,required:!0},assets:{type:Object,required:!0},content:{type:Array,required:!0},elements:{type:Object,required:!0},section:{type:[String,null],default:null}},emits:["error","update:content"],data:()=>({panel:[],menu:{},clip:null,index:null,checked:!1,vschemas:!1,currentPage:1,lastPage:1}),setup(){const e=He(),t=Me(),n=Ke();return{auth:fe(),side:n,messages:e,schemas:t}},computed:{changed(){return this.content.some(e=>e._changed)}},methods:{add(e,t){let n={id:xe(),group:this.section||"main"};e.id?(this.elements[e.id]=e,n=Object.assign(n,{type:"reference",refid:e.id})):n=Object.assign(n,{type:e.type,data:{}}),t!==null?(this.content.splice(t,0,n),this.panel.push(this.panel.includes(t)?t+1:t)):(this.content.push(n),this.panel.push(this.content.length-1)),this.$emit("update:content",this.content),this.vschemas=!1,this.store()},copy(e){const t=JSON.parse(JSON.stringify(this.content[e]));t.id=null,this.clip={type:"copy",index:e,content:t}},cut(e){this.clip={type:"cut",index:e,content:this.content[e]},this.content.splice(e,1),this.store()},error(e,t){e._error=t,this.$emit("error",this.content.some(n=>n._error)),this.store()},fields(e){var t,n;return(t=this.schemas.content[e])!=null&&t.fields?(n=this.schemas.content[e])==null?void 0:n.fields:(console.warn(`No definition of fields for "${e}" schemas`),[])},insert(e){this.index=e,this.vschemas=!0},paste(e){this.content.splice(e,0,this.clip.content),this.$emit("update:content",this.content),this.clip=null,this.store()},purge(){for(let e=this.content.length-1;e>=0;e--)this.content[e]._checked&&this.content.splice(e,1);this.$emit("update:content",this.content),this.checked=!1,this.store()},remove(e){this.content.splice(e,1),this.$emit("error",this.content.some(t=>t._error)),this.$emit("update:content",this.content),this.store()},reset(){this.content.forEach(e=>{delete e._changed,delete e._error}),this.store()},search(e){e&&(e=e.toLocaleLowerCase().trim(),this.content.forEach(t=>{const n=t.type==="reference"?this.elements[t.refid]||{}:t;t._hide=!JSON.stringify(Object.values((n==null?void 0:n.data)||{})).toLocaleLowerCase().includes(e)}))},share(e){var n;if(!this.auth.can("element:add")){this.messages.add("Permission denied","error");return}const t=this.content[e];if(!t){this.messages.add("Element not found","error");return}if(t.type==="reference"){this.messages.add("Element is already shared","error");return}this.$apollo.mutate({mutation:H`
            mutation($input: ElementInput!, $files: [ID!]) {
              addElement(input: $input, files: $files) {
                id
                type
                lang
                name
                data
                editor
                updated_at
                files {
                  id
                  lang
                  mime
                  name
                  path
                  previews
                  description
                  updated_at
                  editor
                }
              }
            }
          `,variables:{input:{type:t.type,lang:this.item.lang,name:this.title(t),data:JSON.stringify(t.data||{})},files:((n=t.files)==null?void 0:n.filter((s,r,a)=>a.indexOf(s)===r))||[]}}).then(s=>{if(s.errors)throw s.errors;const r=s.data.addElement;for(const a of r.files||[])a.previews=JSON.parse(a.previews||"{}"),this.assets[a.id]=a;r.data=JSON.parse(r.data),r.files=r.files.map(a=>a.id),this.elements[r.id]=r,this.content[e]={id:xe(),group:this.section||"main",type:"reference",refid:r.id},this.$emit("update:content",this.content),this.store()}).catch(s=>{this.messages.add("Unable to make element shared","error"),this.$log("PageDetailContentList::share(): Error making element shared",e,s)})},shown(e){const t=this.side.shown("state","valid"),n=this.side.shown("state","error"),s=this.side.shown("state","changed");return!e._hide&&this.side.shown("type",e.type)&&(n&&e._error||s&&e._changed||t&&!e._error&&!e._changed)},store(e=!0){if(!e)return;const t={},n={};this.content.forEach(s=>{s.type&&(t[s.type]=(t[s.type]||0)+1),!s._changed&&!s._error&&(n.valid=(n.valid||0)+1),s._changed&&(n.changed=(n.changed||0)+1),s._error&&(n.error=(n.error||0)+1)}),this.side.store={type:t,state:n}},title(e){var t,n;return(((t=e.data)==null?void 0:t.title)||((n=e.data)==null?void 0:n.text)||Object.values(e.data||{}).map(s=>s&&typeof s!="object"&&typeof s!="boolean"?s:null).filter(s=>!!s).join(" - ")).substring(0,50)||e.type||""},toggle(){this.content.forEach(e=>{this.shown(e)&&(e._checked=!e._checked)})},unshare(e){if(!this.content[e]){this.messages.add("Content element not found","error");return}const t=this.content[e];if(t.type!=="reference"||!this.elements[t.refid]){this.messages.add("Element is not shared","error");return}for(const n of this.elements[t.refid].files||[])this.assets[n.id]=n;this.content[e].type=this.elements[t.refid].type||null,this.content[e].data=this.elements[t.refid].data||{},delete this.content[e].refid,this.$emit("update:content",this.content),this.store()},update(e){e._changed=!0,e.group=this.section||"main",this.$emit("error",this.content.some(t=>t._error)),this.$emit("update:content",this.content),this.store()},validate(){var t;const e=[];return(t=this.$refs.field)==null||t.forEach(n=>{e.push(n.validate())}),Promise.all(e).then(n=>n.every(s=>s))}}},Xa={class:"header"},Ga={key:0,class:"bulk"},Za={class:"element-title"},Qa={class:"element-type"},es={key:0,class:"btn-group"};function ts(e,t,n,s,r,a){const l=T("Fields"),i=T("VueDraggable"),h=T("SchemaDialog"),o=lt("observe-visibility");return p(),P(j,null,[he((p(),P("div",null,[I("div",Xa,[s.auth.can("page:save")?(p(),P("div",Ga,[u(Qe,{modelValue:e.checked,"onUpdate:modelValue":t[0]||(t[0]=c=>e.checked=c),onClick:t[1]||(t[1]=ue(c=>a.toggle(),["stop"]))},null,8,["modelValue"]),u(Pe,{location:"bottom right"},{activator:d(({props:c})=>[u(b,Ce({"append-icon":"mdi-menu-down",variant:"text"},c),{default:d(()=>t[11]||(t[11]=[C("Actions")])),_:2,__:[11]},1040)]),default:d(()=>[u(Oe,null,{default:d(()=>[u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-delete",variant:"text",onClick:t[2]||(t[2]=c=>a.purge())},{default:d(()=>t[12]||(t[12]=[C("Delete")])),_:1,__:[12]})]),_:1})]),_:1})]),_:1})])):_("",!0),u(de,{"prepend-inner-icon":"mdi-magnify",variant:"underlined",label:"Search for",class:"search",clearable:"","hide-details":"",onInput:t[3]||(t[3]=c=>a.search(c.target.value)),"onClick:clear":t[4]||(t[4]=c=>a.search(""))})]),u(Dt,{class:"list",modelValue:e.panel,"onUpdate:modelValue":t[7]||(t[7]=c=>e.panel=c),elevation:"0",multiple:""},{default:d(()=>[u(i,{"onUpdate:modelValue":t[6]||(t[6]=c=>e.$emit("update:content",c)),disabled:!s.auth.can("page:save"),modelValue:n.content,draggable:".content",group:"content"},{default:d(()=>[(p(!0),P(j,null,ee(n.content,(c,m)=>he((p(),v(Et,{key:m,class:K(["content",{changed:c._changed,error:c._error}])},{default:d(()=>[u(St,{"expand-icon":"mdi-pencil"},{default:d(()=>{var f;return[s.auth.can("page:save")?(p(),v(Qe,{key:0,modelValue:c._checked,"onUpdate:modelValue":g=>c._checked=g,onClick:t[5]||(t[5]=ue(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])):_("",!0),s.auth.can("page:save")?(p(),v(Pe,{key:1},{activator:d(({props:g})=>[u(b,Ce({icon:"mdi-dots-vertical",variant:"text"},{ref_for:!0},g),null,16)]),default:d(()=>[u(Oe,null,{default:d(()=>[c._error?_("",!0):(p(),v(V,{key:0},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-copy",variant:"text",onClick:g=>a.copy(m)},{default:d(()=>t[13]||(t[13]=[C("Copy")])),_:2,__:[13]},1032,["onClick"])]),_:2},1024)),c._error?_("",!0):(p(),v(V,{key:1},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-cut",variant:"text",onClick:g=>a.cut(m)},{default:d(()=>t[14]||(t[14]=[C("Cut")])),_:2,__:[14]},1032,["onClick"])]),_:2},1024)),u(ke),!c._error&&e.clip?(p(),v(V,{key:2},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:g=>a.paste(m)},{default:d(()=>t[15]||(t[15]=[C(" Paste before")])),_:2,__:[15]},1032,["onClick"])]),_:2},1024)):_("",!0),!c._error&&e.clip?(p(),v(V,{key:3},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:g=>a.paste(m+1)},{default:d(()=>t[16]||(t[16]=[C(" Paste after")])),_:2,__:[16]},1032,["onClick"])]),_:2},1024)):_("",!0),c._error?_("",!0):(p(),v(V,{key:4},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:g=>a.insert(m)},{default:d(()=>t[17]||(t[17]=[C(" Insert before")])),_:2,__:[17]},1032,["onClick"])]),_:2},1024)),c._error?_("",!0):(p(),v(V,{key:5},{default:d(()=>[u(b,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:g=>a.insert(m+1)},{default:d(()=>t[18]||(t[18]=[C(" Insert after")])),_:2,__:[18]},1032,["onClick"])]),_:2},1024)),u(ke),u(V,null,{default:d(()=>[u(b,{"prepend-icon":"mdi-delete",variant:"text",onClick:g=>a.remove(m)},{default:d(()=>t[19]||(t[19]=[C("Delete")])),_:2,__:[19]},1032,["onClick"])]),_:2},1024),!c._error&&c.type!=="reference"&&s.auth.can("element:add")?(p(),v(V,{key:6},{default:d(()=>[u(b,{"prepend-icon":"mdi-link",variant:"text",onClick:g=>a.share(m)},{default:d(()=>t[20]||(t[20]=[C("Make shared")])),_:2,__:[20]},1032,["onClick"])]),_:2},1024)):_("",!0),c.type==="reference"?(p(),v(V,{key:7},{default:d(()=>[u(b,{"prepend-icon":"mdi-link-off",variant:"text",onClick:g=>a.unshare(m)},{default:d(()=>t[21]||(t[21]=[C("Merge copy")])),_:2,__:[21]},1032,["onClick"])]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024)):_("",!0),c.type==="reference"?(p(),v(we,{key:2,class:"icon-shared",icon:"mdi-link",title:"Shared element"})):_("",!0),I("div",Za,A(c.type==="reference"?(f=n.elements[c.refid])==null?void 0:f.name:a.title(c)),1),I("div",Qa,A(c.type),1)]}),_:2},1024),u(Pt,null,{default:d(()=>{var f,g;return[c.type==="reference"?(p(),v(l,{key:0,data:((f=n.elements[c.refid])==null?void 0:f.data)||{},fields:a.fields((g=n.elements[c.refid])==null?void 0:g.type),assets:n.assets,readonly:!0},null,8,["data","fields","assets"])):(p(),v(l,{key:1,ref_for:!0,ref:"field",data:c.data,"onUpdate:data":y=>c.data=y,files:c.files,"onUpdate:files":y=>c.files=y,readonly:!s.auth.can("page:save"),fields:a.fields(c.type),assets:n.assets,onError:y=>a.error(c,y),onChange:y=>a.update(c)},null,8,["data","onUpdate:data","files","onUpdate:files","readonly","fields","assets","onError","onChange"]))]}),_:2},1024)]),_:2},1032,["class"])),[[rt,a.shown(c)]])),128))]),_:1},8,["disabled","modelValue"])]),_:1},8,["modelValue"]),s.auth.can("page:save")?(p(),P("div",es,[u(b,{onClick:t[8]||(t[8]=c=>e.vschemas=!0),icon:"mdi-view-grid-plus",color:"primary",elevation:"0"})])):_("",!0)])),[[o,a.store]]),(p(),v(Ve,{to:"body"},[u(h,{modelValue:e.vschemas,"onUpdate:modelValue":t[9]||(t[9]=c=>e.vschemas=c),onAdd:t[10]||(t[10]=c=>a.add(c,e.index))},null,8,["modelValue"])]))],64)}const ns=G(Ya,[["render",ts],["__scopeId","data-v-1287ada2"]]),as={components:{PageDetailContentList:ns},props:{item:{type:Object,required:!0},assets:{type:Object,required:!0},elements:{type:Object,required:!0}},emits:["change","error"],data:()=>({changed:{},errors:{},tab:"default"}),setup(){return{config:Bt()}},computed:{names(){const e=this.item.type||"default",t=this.item.theme||"default";return this.config.get(`themes.${t}.types.${e}.sections`,["main"])},sections(){if(this.names.length<=1)return{};const e={};for(const t of this.names)e[t]=[];for(const t of this.item.content){const n=t.group||"main";e[n]||(e[n]=[]),e[n].push(t)}return e}},methods:{error(e,t){this.errors[e]=t,this.$emit("error",Object.values(this.errors).includes(!0))},reset(){this.changed={},this.errors={},Array.isArray(this.$refs.content)?this.$refs.content.forEach(e=>e.reset()):this.$refs.content.reset()},update(e,t){const n=this.sections;n[e]=t,this.item.content=Object.values(n).reduce((s,r)=>s.concat(r),[]),this.changed[e]=!0},validate(){const t=(Array.isArray(this.$refs.content)?this.$refs.content:[this.$refs.content]).map(n=>n.validate());return Promise.all(t).then(n=>n.every(s=>s))}}},ss={key:0};function is(e,t,n,s,r,a){const l=T("PageDetailContentList");return p(),v(Ie,null,{default:d(()=>[u(Te,{class:"box"},{default:d(()=>[Object.keys(a.sections).length>1?(p(),P("div",ss,[u(dt,{class:"subtabs",modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=i=>e.tab=i),"align-tabs":"center"},{default:d(()=>[(p(!0),P(j,null,ee(a.sections,(i,h)=>(p(),v(ce,{key:h,class:K({changed:e.changed[h],error:e.errors[h]}),value:h},{default:d(()=>[C(A(h),1)]),_:2},1032,["class","value"]))),128))]),_:1},8,["modelValue"]),u(Ot,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=i=>e.tab=i)},{default:d(()=>[(p(!0),P(j,null,ee(a.sections,(i,h)=>(p(),v(_e,{key:h,value:h},{default:d(()=>[u(l,{ref_for:!0,ref:"content",section:h,item:n.item,assets:n.assets,content:i,elements:n.elements,onError:o=>a.error(h,o),"onUpdate:content":o=>{a.update(h,o),this.$emit("change","content")}},null,8,["section","item","assets","content","elements","onError","onUpdate:content"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])):(p(),v(l,{key:1,ref:"content",item:n.item,assets:n.assets,content:n.item.content,elements:n.elements,onError:t[2]||(t[2]=i=>e.$emit("error",i)),"onUpdate:content":t[3]||(t[3]=i=>{n.item.content=i,this.$emit("change","content")})},null,8,["item","assets","content","elements"]))]),_:1})]),_:1})}const rs=G(as,[["render",is],["__scopeId","data-v-807b3580"]]),ls={components:{Fields:ut},props:{modelValue:{type:Boolean,required:!0},readonly:{type:Boolean,default:!1},element:{type:Object,required:!0},assets:{type:Object,default:()=>({})},type:{type:String,default:"content"}},emits:["update:modelValue","update:element"],setup(){return{schemas:Me()}},data(){return{error:!1}},methods:{fields(e){var t,n;return!this.schemas[this.type]||!((t=this.schemas[this.type][e])!=null&&t.fields)?(console.warn(`No definition of fields for "${e}" (${this.type}) schemas`),[]):(n=this.schemas.content[e])==null?void 0:n.fields}}};function os(e,t,n,s,r,a){const l=T("Fields");return p(),v(ot,{modelValue:n.modelValue,"max-width":"1200",scrollable:""},{default:d(()=>[u(Ht,null,{append:d(()=>[!n.readonly&&!r.error?(p(),v(b,{key:0,variant:"outlined",onClick:t[0]||(t[0]=i=>e.$emit("update:element",n.element))},{default:d(()=>t[5]||(t[5]=[C("Save")])),_:1,__:[5]})):_("",!0),u(b,{variant:"flat",icon:"mdi-close",onClick:t[1]||(t[1]=i=>e.$emit("update:modelValue",!1))})]),title:d(()=>t[6]||(t[6]=[C(" Content Element ")])),default:d(()=>[u(ke),u(Kt,null,{default:d(()=>[u(l,{data:n.element.data,"onUpdate:data":t[2]||(t[2]=i=>n.element.data=i),files:n.element.files,"onUpdate:files":t[3]||(t[3]=i=>n.element.files=i),readonly:n.readonly,fields:a.fields(n.element.type),assets:n.assets,onError:t[4]||(t[4]=i=>r.error=n.element._error=i)},null,8,["data","files","readonly","fields","assets"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const ds=G(ls,[["render",os]]),us={components:{FieldsDialog:ds,SchemaDialog:Zt},props:{save:{type:Function,required:!0},item:{type:Object,required:!0},elements:{type:Object,required:!0},assets:{type:Object,default:()=>({})}},emits:["change"],setup(){const e=fe();return{app:Ct(),auth:e}},data(){return{pos:null,index:null,element:null,expanded:!1,vschemas:!1,vpreview:!1,vedit:!1}},mounted(){window.addEventListener("message",this.message),this.$refs.iframe.contentWindow.postMessage("init")},beforeUnmount(){window.removeEventListener("message",this.message)},computed:{url(){return this.app.urlpage.replace(/:domain/,this.item.domain||"").replace(/:path/,this.item.path||"").replace(/\/+$/,"/")}},methods:{add(e){const t=this.section||"main";this.vschemas=!1,e.id?(this.elements[e.id]=e,this.element={id:xe(),group:t,type:"reference",refid:e.id},this.update()):(this.element={id:xe(),group:t,type:e.type,data:{}},this.vedit=!0)},edit(){this.element=this.item.content[this.index]||null,this.vedit=!!this.element},fullscreen(){const e=this.$refs.preview;this.expanded?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e!=null&&e.requestFullscreen?e.requestFullscreen():e!=null&&e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),this.expanded=!this.expanded},message(e){switch(e.data){case null:this.index=null;break;case!1:this.vpreview=!0,setTimeout(()=>{this.vpreview=!1},3e3);break;default:this.index=this.item.content.findIndex(t=>t.id===e.data)??null}},remove(){this.index!==null&&(this.item.content.splice(this.index,1),this.$emit("change","content"),this.index=null,this.save(!0).then(()=>{this.$refs.iframe.contentWindow.postMessage("reload",this.url)}))},update(){this.pos!==null&&this.item.content.splice(this.index+this.pos,0,this.element),this.vedit=!1,this.index=null,this.pos=null,this.$emit("change","content"),this.save(!0).then(()=>{this.$refs.iframe.contentWindow.postMessage("reload",this.url)})}}},cs={class:"page-preview",ref:"preview"},hs={key:0,class:"actions"},fs={key:1,class:"preview-mode"},ms=["src"];function ps(e,t,n,s,r,a){const l=T("FieldsDialog"),i=T("SchemaDialog");return p(),P(j,null,[I("div",cs,[r.index!==null?(p(),P("div",hs,[u(b,{icon:"mdi-pencil",variant:"text",onClick:t[0]||(t[0]=h=>a.edit())}),u(b,{icon:"mdi-table-row-plus-before",variant:"text",onClick:t[1]||(t[1]=h=>{r.vschemas=!0,r.pos=0})}),u(b,{icon:"mdi-table-row-plus-after",variant:"text",onClick:t[2]||(t[2]=h=>{r.vschemas=!0,r.pos=1})}),u(b,{icon:"mdi-trash-can-outline",variant:"text",onClick:t[3]||(t[3]=h=>a.remove())})])):_("",!0),r.vpreview?(p(),P("div",fs," Preview mode ")):_("",!0),I("iframe",{ref:"iframe",src:a.url},null,8,ms),r.expanded?_("",!0):(p(),v(b,{key:2,class:"fullscreen",icon:"mdi-fullscreen",variant:"text",onClick:t[4]||(t[4]=h=>a.fullscreen())})),r.expanded?(p(),v(b,{key:3,class:"fullscreen",icon:"mdi-fullscreen-exit",variant:"text",onClick:t[5]||(t[5]=h=>a.fullscreen())})):_("",!0)],512),(p(),v(Ve,{to:"body"},[r.element?(p(),v(l,{key:0,modelValue:r.vedit,"onUpdate:modelValue":t[6]||(t[6]=h=>r.vedit=h),element:r.element.type==="reference"?n.elements[r.element.refid]:r.element,readonly:!s.auth.can("page:save")||!!r.element.refid,"onUpdate:element":t[7]||(t[7]=h=>a.update())},null,8,["modelValue","element","readonly"])):_("",!0)])),(p(),v(Ve,{to:"body"},[u(i,{modelValue:r.vschemas,"onUpdate:modelValue":t[8]||(t[8]=h=>r.vschemas=h),onAdd:t[9]||(t[9]=h=>a.add(h))},null,8,["modelValue"])]))],64)}const gs=G(us,[["render",ps]]),vs={components:{AsideMeta:hn,AsideCount:Oa,HistoryDialog:cn,PageDetailItem:za,PageDetailContent:rs,PageDetailPreview:gs},inject:["closeView","compose","translate","txlanguages"],props:{item:{type:Object,required:!0}},provide(){return{compose:this.composeText,translate:this.translateText}},setup(){const e=it(),t=He(),n=Me(),s=wt();return{auth:fe(),drawer:s,languages:e,messages:t,schemas:n}},data:()=>({tab:"page",aside:"meta",asidePage:"meta",changed:{},errors:{},assets:{},elements:{},latest:null,pubmenu:null,publishAt:null,translating:!1,vhistory:!1}),computed:{hasChanged(){return Object.values(this.changed).some(e=>e)},hasError(){return Object.values(this.errors).some(e=>e)},langs(){const e=[],t=["ar","bg","cs","da","de","el","en","en-GB","en_US","es","et","fi","fr","he","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","uk","vi","zh","zh-HANS","zh-HANT"];return Object.entries(this.languages.available).forEach(n=>{t.includes(n[0])&&n[0]!==this.item.lang&&e.push({code:n[0],name:n[1]})}),e}},created(){var e;this.$options._compose=this.compose,!(!((e=this.item)!=null&&e.id)||!this.auth.can("page:view"))&&this.$apollo.query({query:H`query($id: ID!) {
          page(id: $id) {
            id
            lang
            path
            domain
            name
            title
            to
            tag
            type
            theme
            status
            cache
            meta
            config
            content
            editor
            updated_at
            deleted_at
            files {
              id
              lang
              mime
              name
              path
              previews
              description
              updated_at
              editor
            }
            elements {
              id
              type
              data
              editor
              updated_at
              files {
                id
                lang
                mime
                name
                path
                previews
                description
                updated_at
                editor
              }
            }
            latest {
              id
              published
              data
              aux
              editor
              created_at
              files {
                id
                lang
                mime
                name
                path
                previews
                description
                updated_at
                editor
              }
              elements {
                id
                type
                data
                name
                editor
                updated_at
                files {
                  id
                  lang
                  mime
                  name
                  path
                  previews
                  description
                  updated_at
                  editor
                }
              }
            }
          }
        }`,variables:{id:this.item.id}}).then(t=>{var s,r,a;if(t.errors||!t.data.page)throw t;const n=t.data.page;if(this.reset(),this.assets={},this.elements={},this.latest=n.latest,(s=this.latest)!=null&&s.aux){const l=JSON.parse(this.latest.aux);this.item.content=l.content??[],this.item.config=l.config??{},this.item.meta=l.meta??{}}else this.item.content=JSON.parse(n.content??"{}"),this.item.config=JSON.parse(n.config??"{}"),this.item.meta=JSON.parse(n.meta??"{}");for(const l of((r=this.latest)==null?void 0:r.elements)||n.elements||[])this.elements[l.id]={...l,data:JSON.parse(l.data||"{}"),files:(l.files||[]).map(i=>({...i,previews:JSON.parse(i.previews||"{}"),description:JSON.parse(i.description||"{}")}))};for(const l of((a=this.latest)==null?void 0:a.files)||n.files||[])this.assets[l.id]={...l,previews:JSON.parse(l.previews||"{}"),description:JSON.parse(l.description||"{}")};for(const l of this.item.content)l.files&&Array.isArray(l.files)&&(l.files=l.files.filter(i=>typeof this.assets[i]<"u"))}).catch(t=>{this.messages.add("Error fetching page","error"),this.$log("PageDetail::watch(item): Error fetching page",t)})},methods:{clean(e){if(e){e=JSON.parse(JSON.stringify(e));for(const t in e)for(const n in e[t])n.startsWith("_")&&delete e[t][n]}return e},composeText(e,t=[]){return this.$options._compose?(Array.isArray(t)||(t=[t]),t.push("page content as JSON: "+JSON.stringify(this.item.content)),t.push("required output language: "+(this.item.lang||"en")),this.$options._compose(e,t)):Promise.reject(new Error("Compose method is not available in PageDetail component"))},publish(e=null){if(!this.auth.can("page:publish")){this.messages.add("Permission denied","error");return}this.save(!0).then(t=>{var n,s;t&&this.$apollo.mutate({mutation:H`mutation ($id: [ID!]!, $at: DateTime) {
              pubPage(id: $id, at: $at) {
                id
              }
            }`,variables:{id:[this.item.id],at:(s=(n=e==null?void 0:e.toISOString())==null?void 0:n.substring(0,19))==null?void 0:s.replace("T"," ")}}).then(r=>{if(r.errors)throw r.errors;e?(this.item.publish_at=e,this.messages.add(`Page scheduled for publishing at ${e.toLocaleDateString()}`,"info")):(this.item.published=!0,this.messages.add("Page published successfully","success")),this.closeView()}).catch(r=>{this.messages.add("Error publishing page","error"),this.$log("PageDetail::publish(): Error publishing page",e,r)})})},reset(){var e,t;(e=this.$refs.page)==null||e.reset(),(t=this.$refs.content)==null||t.reset(),this.changed={},this.errors={}},save(e=!1){return this.auth.can("page:save")?this.hasChanged?this.validate().then(t=>{if(!t)return this.messages.add("There are invalid fields, please resolve the errors first","error"),t;const n=[];for(const a of this.item.content||[])n.push(...a.files||[]);const s={};for(const a in this.item.meta||{})s[a]={type:this.item.meta[a].type||"",data:this.item.meta[a].data||{},files:this.item.meta[a].files||[]},n.push(...this.item.meta[a].files||[]);const r={};for(const a in this.item.config||{})r[a]={type:this.item.config[a].type||"",data:this.item.config[a].data||{},files:this.item.config[a].files||[]},n.push(...this.item.config[a].files||[]);return this.$apollo.mutate({mutation:H`mutation ($id: ID!, $input: PageInput!, $elements: [ID!], $files: [ID!]) {
              savePage(id: $id, input: $input, elements: $elements, files: $files) {
                id
              }
            }`,variables:{id:this.item.id,input:{cache:this.item.cache||0,domain:this.item.domain||"",lang:this.item.lang||"",name:this.item.name||"",path:this.item.path||"",status:this.item.status||0,title:this.item.title||"",tag:this.item.tag||"",to:this.item.to||"",type:this.item.type||"",theme:this.item.theme||"",meta:JSON.stringify(this.clean(s)),config:JSON.stringify(this.clean(r)),content:JSON.stringify(this.clean(this.item.content))},elements:Object.keys(this.elements),files:n.filter((a,l,i)=>i.indexOf(a)===l)}}).then(a=>{if(a.errors)throw a.errors;return this.item.published=!1,this.$refs.history.reset(),this.reset(),e||this.messages.add("Page saved successfully","success"),!0}).catch(a=>{this.messages.add("Error saving page","error"),this.$log("PageDetail::save(): Error saving page",a)})}):Promise.resolve(!0):(this.messages.add("Permission denied","error"),Promise.resolve(!1))},translatePage(e){var s,r,a;if(!this.schemas.content){this.messages.add('No page schema for "content" found',"error");return}const t=["text","markdown","plaintext","string"],n=[{item:this.item,key:"title",text:this.item.title},{item:this.item,key:"name",text:this.item.name},{item:this.item,key:"path",text:this.item.path}];for(const l of Object.values(this.item.meta))for(const i in l.data){const h=(a=(r=(s=this.schemas.meta[l.type])==null?void 0:s.fields)==null?void 0:r[i])==null?void 0:a.type;l.data[i]&&t.includes(h)&&n.push({item:l.data,key:i,text:l.data[i]})}this.item.content.forEach(l=>{var i,h,o,c,m;for(const f in l.data){const g=(i=this.schemas.content[l.type])==null?void 0:i.fields,y=(h=g==null?void 0:g[f])==null?void 0:h.type;if(y==="items")for(const D in l.data[f]){const x=l.data[f][D];for(const N in x)t.includes((m=(c=(o=g[f])==null?void 0:o.item)==null?void 0:c[N])==null?void 0:m.type)&&n.push({item:x,key:N,text:x[N]})}else l.type!=="code"&&l.data[f]&&t.includes(y)&&n.push({item:l.data,key:f,text:l.data[f]})}}),this.translating=!0,this.translate(n.map(l=>l.text),e,this.item.lang).then(l=>{l.forEach((i,h)=>{n[h]&&(n[h].item[n[h].key]=i)}),this.changed.content=!0,this.changed.page=!0,this.item.lang=e}).finally(()=>{this.translating=!1})},translateText(e,t,n=null){return this.translate(e,t,n||this.item.lang)},update(e,t){e==="page"?Object.assign(this.item,t):this[e]=t,this.changed[e]=!0},use(e){Object.assign(this.item,e.data),this.changed.content=!0,this.changed.page=!0,this.vhistory=!1},validate(){var e,t;return Promise.all([(e=this.$refs.page)==null?void 0:e.validate(),(t=this.$refs.content)==null?void 0:t.validate()].filter(n=>n)).then(n=>n.every(s=>s))},versions(e){return this.auth.can("page:view")?e?this.$apollo.query({query:H`query($id: ID!) {
            page(id: $id) {
              id
              versions {
                id
                published
                publish_at
                data
                aux
                editor
                created_at
              }
            }
          }`,variables:{id:e}}).then(t=>{if(t.errors||!t.data.page)throw t;return(t.data.page.versions||[]).map(n=>{const s={...n,data:Object.assign(JSON.parse(n.data||"{}"),JSON.parse(n.aux||"{}"))};return delete s.aux,s}).reverse()}).catch(t=>{this.messages.add("Error fetching page versions","error"),this.$log("PageDetail::versions(): Error fetching page versions",e,t)}):Promise.resolve([]):(this.messages.add("Permission denied","error"),Promise.resolve([]))}},watch:{asidePage(e){this.aside=e}}},ys={class:"app-title"},bs={class:"menu-content"};function ks(e,t,n,s,r,a){const l=T("PageDetailItem"),i=T("PageDetailContent"),h=T("PageDetailPreview"),o=T("AsideMeta"),c=T("AsideCount"),m=T("HistoryDialog");return p(),P(j,null,[u(Mt,{elevation:0,density:"compact"},{prepend:d(()=>[u(b,{icon:"mdi-keyboard-backspace",onClick:t[0]||(t[0]=f=>a.closeView()),elevation:"0"})]),append:d(()=>[u(Pe,null,{activator:d(({props:f})=>[u(b,Ce({loading:e.translating,icon:"mdi-translate",elevation:"0"},f),null,16,["loading"])]),default:d(()=>[u(Oe,null,{default:d(()=>[(p(!0),P(j,null,ee(a.txlanguages(n.item.lang),f=>(p(),v(V,{key:f.code},{default:d(()=>[u(b,{variant:"text",onClick:g=>a.translatePage(f.code)},{default:d(()=>[C(" "+A(f.name)+" ("+A(f.code)+")",1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),u(b,{icon:"mdi-history",class:K({hidden:n.item.published&&!a.hasChanged&&!e.latest}),onClick:t[1]||(t[1]=f=>e.vhistory=!0),elevation:"0"},null,8,["class"]),u(b,{class:K([{error:a.hasError},"menu-save"]),disabled:!a.hasChanged||a.hasError||!s.auth.can("page:save"),onClick:t[2]||(t[2]=f=>a.save()),variant:"text"},{default:d(()=>t[23]||(t[23]=[C("Save")])),_:1,__:[23]},8,["class","disabled"]),u(Pe,{modelValue:e.pubmenu,"onUpdate:modelValue":t[6]||(t[6]=f=>e.pubmenu=f),"close-on-content-click":!1},{activator:d(({props:f})=>[u(dn,{class:"menu-publish",variant:"text"},{default:d(()=>[u(b,{class:K([{error:a.hasError},"button"]),disabled:n.item.published&&!a.hasChanged||a.hasError||!s.auth.can("page:publish"),onClick:t[3]||(t[3]=g=>a.publish())},{default:d(()=>t[24]||(t[24]=[C("Publish")])),_:1,__:[24]},8,["class","disabled"]),u(b,Ce({class:[{error:a.hasError},"icon"],icon:"mdi-menu-down",disabled:n.item.published&&!a.hasChanged||a.hasError||!s.auth.can("page:publish")},f),null,16,["class","disabled"])]),_:2},1024)]),default:d(()=>[I("div",bs,[u(on,{modelValue:e.publishAt,"onUpdate:modelValue":t[4]||(t[4]=f=>e.publishAt=f),"hide-header":"","show-adjacent-months":""},null,8,["modelValue"]),u(b,{disabled:!e.publishAt||a.hasError,color:e.publishAt?"primary":"",onClick:t[5]||(t[5]=f=>{a.publish(e.publishAt),e.pubmenu=!1}),variant:"flat"},{default:d(()=>t[25]||(t[25]=[C("Publish")])),_:1,__:[25]},8,["disabled","color"])])]),_:1},8,["modelValue"]),u(b,{onClick:t[7]||(t[7]=ue(f=>s.drawer.toggle("aside"),["stop"]))},{default:d(()=>[u(we,{size:"x-large"},{default:d(()=>[C(A(s.drawer.aside?"mdi-chevron-right":"mdi-chevron-left"),1)]),_:1})]),_:1})]),default:d(()=>[u(Rt,null,{default:d(()=>[I("div",ys," Page: "+A(n.item.name),1)]),_:1})]),_:1}),u(qt,{class:"page-details"},{default:d(()=>[u(un,{onSubmit:t[19]||(t[19]=ue(()=>{},["prevent"]))},{default:d(()=>[u(dt,{"fixed-tabs":"",modelValue:e.tab,"onUpdate:modelValue":t[11]||(t[11]=f=>e.tab=f)},{default:d(()=>[u(ce,{value:"page",class:K({changed:e.changed.page,error:e.errors.page}),onClick:t[8]||(t[8]=f=>e.aside=e.asidePage)},{default:d(()=>t[26]||(t[26]=[C("Page")])),_:1,__:[26]},8,["class"]),u(ce,{value:"content",class:K({changed:e.changed.content,error:e.errors.content}),onClick:t[9]||(t[9]=f=>e.aside="count")},{default:d(()=>t[27]||(t[27]=[C("Content")])),_:1,__:[27]},8,["class"]),u(ce,{value:"preview",onClick:t[10]||(t[10]=f=>e.aside="")},{default:d(()=>t[28]||(t[28]=[C("Preview")])),_:1,__:[28]})]),_:1},8,["modelValue"]),u(Ot,{modelValue:e.tab,"onUpdate:modelValue":t[18]||(t[18]=f=>e.tab=f)},{default:d(()=>[u(_e,{value:"page"},{default:d(()=>[u(l,{ref:"page",item:n.item,assets:e.assets,"onUpdate:item":t[12]||(t[12]=f=>{Object.assign(n.item,f),e.changed.page=!0}),"onUpdate:aside":t[13]||(t[13]=f=>e.asidePage=f),onError:t[14]||(t[14]=f=>e.errors.page=f)},null,8,["item","assets"])]),_:1}),u(_e,{value:"content"},{default:d(()=>[u(i,{ref:"content",item:n.item,assets:e.assets,elements:e.elements,onError:t[15]||(t[15]=f=>e.errors.content=f),onChange:t[16]||(t[16]=f=>e.changed.content=!0)},null,8,["item","assets","elements"])]),_:1}),u(_e,{value:"preview"},{default:d(()=>[u(h,{save:a.save,item:n.item,assets:e.assets,elements:e.elements,onChange:t[17]||(t[17]=f=>e.changed.content=!0)},null,8,["save","item","assets","elements"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e.aside==="meta"?(p(),v(o,{key:0,item:n.item},null,8,["item"])):_("",!0),e.aside==="count"?(p(),v(c,{key:1})):_("",!0),(p(),v(Ve,{to:"body"},[u(m,{ref:"history",modelValue:e.vhistory,"onUpdate:modelValue":t[20]||(t[20]=f=>e.vhistory=f),current:{data:{cache:n.item.cache,domain:n.item.domain,lang:n.item.lang,name:n.item.name,path:n.item.path,status:n.item.status,title:n.item.title,tag:n.item.tag,to:n.item.to,type:n.item.type,theme:n.item.theme,meta:a.clean(n.item.meta),config:a.clean(n.item.config),content:a.clean(n.item.content)}},load:()=>a.versions(n.item.id),onUse:t[21]||(t[21]=f=>a.use(f)),onRevert:t[22]||(t[22]=f=>{a.use(f),a.reset()})},null,8,["modelValue","current","load"])]))],64)}const jt=G(vs,[["render",ks],["__scopeId","data-v-cdab64a6"]]),_s={components:{PageListItems:wa,PageDetail:jt,Navigation:an,AsideList:nn,User:tn},inject:["openView"],data:()=>({filter:{trashed:"WITHOUT",publish:null,editor:null,lang:null}}),setup(){const e=it(),t=wt();return{auth:fe(),drawer:t,languages:e}},methods:{languages(){const e=[{title:"All",icon:"mdi-playlist-check",value:{lang:null}}];for(const t in this.languages.available)e.push({title:this.languages.available[t],icon:"mdi-translate",value:{lang:t}});return e},open(e){this.openView(jt,{item:e})}}};function Cs(e,t,n,s,r,a){var c;const l=T("User"),i=T("Navigation"),h=T("PageListItems"),o=T("AsideList");return p(),P(j,null,[u(Mt,{elevation:0,density:"compact"},{prepend:d(()=>[u(b,{onClick:t[0]||(t[0]=m=>s.drawer.toggle("nav"))},{default:d(()=>[u(we,{size:"x-large"},{default:d(()=>[C(A(s.drawer.nav?"mdi-close":"mdi-menu"),1)]),_:1})]),_:1})]),append:d(()=>[u(l),u(b,{onClick:t[1]||(t[1]=m=>s.drawer.toggle("aside"))},{default:d(()=>[u(we,{size:"x-large"},{default:d(()=>[C(A(s.drawer.aside?"mdi-chevron-right":"mdi-chevron-left"),1)]),_:1})]),_:1})]),default:d(()=>[u(Rt,null,{default:d(()=>t[4]||(t[4]=[C("Pages")])),_:1,__:[4]})]),_:1}),u(i),u(qt,{class:"page-list"},{default:d(()=>[u(Ie,null,{default:d(()=>[u(Te,{class:"box"},{default:d(()=>[u(h,{onSelect:t[2]||(t[2]=m=>a.open(m)),filter:e.filter},null,8,["filter"])]),_:1})]),_:1})]),_:1}),u(o,{filter:e.filter,"onUpdate:filter":t[3]||(t[3]=m=>e.filter=m),content:[{key:"publish",items:[{title:"All",icon:"mdi-playlist-check",value:{publish:null}},{title:"Published",icon:"mdi-publish",value:{publish:"PUBLISHED"}},{title:"Scheduled",icon:"mdi-clock-outline",value:{publish:"SCHEDULED"}},{title:"Drafts",icon:"mdi-pencil",value:{publish:"DRAFT"}}]},{key:"trashed",items:[{title:"All",icon:"mdi-playlist-check",value:{trashed:"WITH"}},{title:"Available only",icon:"mdi-delete-off",value:{trashed:"WITHOUT"}},{title:"Only trashed",icon:"mdi-delete",value:{trashed:"ONLY"}}]},{key:"editor",items:[{title:"All",icon:"mdi-playlist-check",value:{editor:null}},{title:"Edited by me",icon:"mdi-account",value:{editor:(c=this.auth.me)==null?void 0:c.email}}]},{key:"lang",items:a.languages()}]},null,8,["filter","content"])],64)}const Vs=G(_s,[["render",Cs],["__scopeId","data-v-a952b4ca"]]);export{Vs as default};
